{
  "version": 3,
  "file": "index.dev.js",
  "mappings": "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",
  "sources": [
    "webpack://tinode-webapp/./src/config.js",
    "webpack://tinode-webapp/./src/lib/blob-helpers.js",
    "webpack://tinode-webapp/./src/lib/host-name.js",
    "webpack://tinode-webapp/./src/lib/local-storage.js",
    "webpack://tinode-webapp/./src/lib/navigation.js",
    "webpack://tinode-webapp/./src/lib/strformat.js",
    "webpack://tinode-webapp/./src/lib/utils.js",
    "webpack://tinode-webapp/./src/version.js",
    "webpack://tinode-webapp/./src/views/acc-general-view.jsx",
    "webpack://tinode-webapp/./src/views/acc-notifications-view.jsx",
    "webpack://tinode-webapp/./src/views/acc-security-view.jsx",
    "webpack://tinode-webapp/./src/views/acc-support-view.jsx",
    "webpack://tinode-webapp/./src/views/contacts-view.jsx",
    "webpack://tinode-webapp/./src/views/create-account-view.jsx",
    "webpack://tinode-webapp/./src/views/edit-account-view.jsx",
    "webpack://tinode-webapp/./src/views/info-view.jsx",
    "webpack://tinode-webapp/./src/views/login-view.jsx",
    "webpack://tinode-webapp/./src/views/logo-view.jsx",
    "webpack://tinode-webapp/./src/views/messages-view.jsx",
    "webpack://tinode-webapp/./src/views/new-topic-view.jsx",
    "webpack://tinode-webapp/./src/views/password-reset-view.jsx",
    "webpack://tinode-webapp/./src/views/settings-view.jsx",
    "webpack://tinode-webapp/./src/views/sidepanel-view.jsx",
    "webpack://tinode-webapp/./src/views/tinode-web.jsx",
    "webpack://tinode-webapp/./src/views/validation-view.jsx",
    "webpack://tinode-webapp/./src/widgets/alert.jsx",
    "webpack://tinode-webapp/./src/widgets/attachment.jsx",
    "webpack://tinode-webapp/./src/widgets/avatar-upload.jsx",
    "webpack://tinode-webapp/./src/widgets/button-back.jsx",
    "webpack://tinode-webapp/./src/widgets/chat-message.jsx",
    "webpack://tinode-webapp/./src/widgets/checkbox.jsx",
    "webpack://tinode-webapp/./src/widgets/chip-input.jsx",
    "webpack://tinode-webapp/./src/widgets/chip.jsx",
    "webpack://tinode-webapp/./src/widgets/contact-action.jsx",
    "webpack://tinode-webapp/./src/widgets/contact-badges.jsx",
    "webpack://tinode-webapp/./src/widgets/contact-list.jsx",
    "webpack://tinode-webapp/./src/widgets/contact.jsx",
    "webpack://tinode-webapp/./src/widgets/context-menu.jsx",
    "webpack://tinode-webapp/./src/widgets/doc-preview.jsx",
    "webpack://tinode-webapp/./src/widgets/error-panel.jsx",
    "webpack://tinode-webapp/./src/widgets/file-progress.jsx",
    "webpack://tinode-webapp/./src/widgets/group-manager.jsx",
    "webpack://tinode-webapp/./src/widgets/group-subs.jsx",
    "webpack://tinode-webapp/./src/widgets/host-selector.jsx",
    "webpack://tinode-webapp/./src/widgets/image-preview.jsx",
    "webpack://tinode-webapp/./src/widgets/in-place-edit.jsx",
    "webpack://tinode-webapp/./src/widgets/invitation.jsx",
    "webpack://tinode-webapp/./src/widgets/letter-tile.jsx",
    "webpack://tinode-webapp/./src/widgets/load-spinner.jsx",
    "webpack://tinode-webapp/./src/widgets/menu-cancel.jsx",
    "webpack://tinode-webapp/./src/widgets/menu-contacts.jsx",
    "webpack://tinode-webapp/./src/widgets/menu-start.jsx",
    "webpack://tinode-webapp/./src/widgets/more-button.jsx",
    "webpack://tinode-webapp/./src/widgets/new-topic-by-id.jsx",
    "webpack://tinode-webapp/./src/widgets/new-topic-group.jsx",
    "webpack://tinode-webapp/./src/widgets/permissions-editor.jsx",
    "webpack://tinode-webapp/./src/widgets/received-marker.jsx",
    "webpack://tinode-webapp/./src/widgets/search-contacts.jsx",
    "webpack://tinode-webapp/./src/widgets/send-message.jsx",
    "webpack://tinode-webapp/./src/widgets/side-navbar.jsx",
    "webpack://tinode-webapp/./src/widgets/tag-manager.jsx",
    "webpack://tinode-webapp/./src/widgets/unread-badge.jsx",
    "webpack://tinode-webapp/./src/widgets/uploading-image.jsx",
    "webpack://tinode-webapp/./src/widgets/visible-password.jsx",
    "webpack://tinode-webapp/external \"React\"",
    "webpack://tinode-webapp/external \"ReactDOM\"",
    "webpack://tinode-webapp/external \"ReactIntl\"",
    "webpack://tinode-webapp/external \"Tinode\"",
    "webpack://tinode-webapp/external \"firebase\"",
    "webpack://tinode-webapp/external [\"firebase\",\"messaging\"]",
    "webpack://tinode-webapp/webpack/bootstrap",
    "webpack://tinode-webapp/webpack/runtime/compat get default export",
    "webpack://tinode-webapp/webpack/runtime/define property getters",
    "webpack://tinode-webapp/webpack/runtime/hasOwnProperty shorthand",
    "webpack://tinode-webapp/webpack/runtime/make namespace object",
    "webpack://tinode-webapp/./src/index.js"
  ],
  "sourcesContent": [
    "import { PACKAGE_VERSION } from './version.js';\r\n\r\n// Name of this application, used in the User-Agent.\r\nexport const APP_NAME = 'TinodeWeb/' + (PACKAGE_VERSION || '0.17');\r\n\r\n// API key. Use https://github.com/tinode/chat/tree/master/keygen to generate your own\r\nexport const API_KEY = 'AQEAAAABAAD_rAp4DJh05a1HAwFT3A6K';\r\n\r\n// The array of possible hosts to connect to.\r\nexport const KNOWN_HOSTS = {hosted: 'web.tinode.co', local: 'api-chat-gateway.yedda.link'};\r\n\r\n// Default host name and port to connect to.\r\nexport const DEFAULT_HOST = KNOWN_HOSTS.hosted;\r\n\r\n// Enable console logging.\r\nexport const LOGGING_ENABLED = true;\r\n\r\n// Minimum time between two keypress notifications, milliseconds.\r\nexport const KEYPRESS_DELAY = 3*1000;\r\n// Delay before sending a {note} for reciving a message, milliseconds.\r\nexport const RECEIVED_DELAY = 500;\r\n// Delay before sending a read notification, milliseconds.\r\nexport const READ_DELAY = 1000;\r\n\r\n// The default shortest allowed tag length. Matches the value on the server.\r\nexport const MIN_TAG_LENGTH = 2;\r\n// The default greatest allowed tag length. Matches the value on the server.\r\nexport const MAX_TAG_LENGTH = 96;\r\n// The default maximum number of tags allowed. Matches the value on the server.\r\nexport const MAX_TAG_COUNT = 16;\r\n\r\n// Access mode for P2P subscriptions initiated by the current user.\r\nexport const DEFAULT_P2P_ACCESS_MODE = 'JRWPS';\r\n// Access mode for new group topics created by the current user.\r\nexport const NEW_GRP_ACCESS_MODE = 'JRWPSAO';\r\n// Access mode for a channel.\r\nexport const CHANNEL_ACCESS_MODE = 'JR';\r\n\r\n// Access mode for no access.\r\nexport const NO_ACCESS_MODE = 'N';\r\n\r\n// Mediaquery breakpoint between desktop and mobile, in px. Should match the value\r\n// in @media (max-size: 640px) in base.css\r\nexport const MEDIA_BREAKPOINT = 640;\r\n// Size of css 'rem' unit in pixels. Default 1rem = 10pt = 13px.\r\nexport const REM_SIZE = 13;\r\n\r\n// Size of the avatar image: When an avatar image is uploaded, it's resized to\r\n// a square of this size.\r\nexport const AVATAR_SIZE = 128;\r\n\r\n// Size of the broken_image shown in MessagesView\r\nexport const BROKEN_IMAGE_SIZE = 32;\r\n\r\n// Number of chat messages to fetch in one call.\r\nexport const MESSAGES_PAGE = 24;\r\n\r\n// Default maximum in-band (included directly into the message) attachment size which fits into\r\n// a message of 256K in size. Used when the server-provided value is unavailable. The actual\r\n// binary size of the attachment should be smaller due to base64 encoding expansion and some overhead,\r\n// for instance 1024 bytes.\r\n// Increase this limit to a greater value in production, if desired. Also increase\r\n// max_message_size in the server config.\r\nexport const MAX_INBAND_ATTACHMENT_SIZE = 262144;\r\n\r\n// Default absolute maximum attachment size to be used with the server = 8MB.\r\n// Used when the server-provided value is unavailable. Increase to something like 100MB in production.\r\nexport const MAX_EXTERN_ATTACHMENT_SIZE = 1 << 23;\r\n\r\n// Maximum allowed linear dimension (pixels) of an image sent inline. Larger images will be shrunk\r\n// to make the larger dimension fit under this size. You may want to adjust it to 1600 or\r\n// 2400 for production.\r\nexport const MAX_IMAGE_DIM = 1024;\r\n\r\n// Linear dimensions of image preview: shrink image under this size for previews.\r\nexport const IMAGE_PREVIEW_DIM = 64;\r\n\r\n// Maximum number of online users to be shown in a topic title bar. Others will be\r\n// hidden under \"+X more\"\r\nexport const MAX_ONLINE_IN_TOPIC = 4;\r\n\r\n// Maximum length of user name, topic title, and private comment.\r\nexport const MAX_TITLE_LENGTH = 60;\r\n\r\n// Length of message previews in chat list, in characters.\r\nexport const MESSAGE_PREVIEW_LENGTH = 80;\r\n\r\n// Link for \"Contact Us\".\r\nexport const LINK_CONTACT_US = 'email:support@tinode.co';\r\n\r\n// Link to Privacy Policy.\r\nexport const LINK_PRIVACY_POLICY = 'https://tinode.co/privacy.html';\r\n\r\n// Link to Terms of Service.\r\nexport const LINK_TERMS_OF_SERVICE = 'https://tinode.co/terms.html';\r\n",
    "// File and image helper functions.\r\nimport { MAX_INBAND_ATTACHMENT_SIZE, MAX_IMAGE_DIM } from '../config.js';\r\nimport { bytesToHumanSize } from './strformat.js'\r\n\r\n// Supported image MIME types and corresponding file extensions.\r\nexport const SUPPORTED_IMAGE_FORMATS = ['image/jpeg', 'image/gif', 'image/png', 'image/svg', 'image/svg+xml'];\r\nexport const MIME_EXTENSIONS         = ['jpg',        'gif',       'png',       'svg',       'svg'];\r\n\r\n// Make a data: URL from public.photo\r\nexport function makeImageDataUrl(photo) {\r\n  if (photo) {\r\n    if (photo.data && photo.type) {\r\n      const mime = photo.type.startsWith('image/') ? photo.type : ('image/' + photo.type);\r\n      return 'data:' + mime + ';base64,' + photo.data;\r\n    }\r\n    return photo.ref;\r\n  }\r\n  return null;\r\n}\r\n\r\n// Calculate linear dimensions for scaling image down to fit under a certain size.\r\n// Returns an object which contains destination sizes, source sizes, and offsets\r\n// into source (when making square images).\r\nexport function fitImageSize(width, height, maxWidth, maxHeight, forceSquare) {\r\n  // Sanitize input\r\n  width = width | 0;\r\n  height = height | 0;\r\n  maxWidth = maxWidth | 0;\r\n  maxHeight = maxHeight | 0;\r\n\r\n  if (width <= 0 || height <= 0 || maxWidth <= 0 || maxHeight <= 0) {\r\n    return null;\r\n  }\r\n\r\n  if (forceSquare) {\r\n    maxWidth = maxHeight = Math.min(maxWidth, maxHeight);\r\n  }\r\n\r\n  const scale = Math.min(\r\n    Math.min(width, maxWidth) / width,\r\n    Math.min(height, maxHeight) / height\r\n  );\r\n\r\n  const size = {\r\n    dstWidth: (width * scale) | 0,\r\n    dstHeight: (height * scale) | 0,\r\n  };\r\n\r\n  if (forceSquare) {\r\n    // Also calculate parameters for making the image square.\r\n    size.dstWidth = size.dstHeight = Math.min(size.dstWidth, size.dstHeight);\r\n    size.srcWidth = size.srcHeight = Math.min(width, height);\r\n    size.xoffset = ((width - size.srcWidth) / 2) | 0;\r\n    size.yoffset = ((height - size.srcWidth) / 2) | 0;\r\n  } else {\r\n    size.xoffset = size.yoffset = 0;\r\n    size.srcWidth = width;\r\n    size.srcHeight = height;\r\n  }\r\n  return size;\r\n}\r\n\r\n// Ensure file's extension matches mime content type\r\nexport function fileNameForMime(fname, mime) {\r\n  const idx = SUPPORTED_IMAGE_FORMATS.indexOf(mime);\r\n  if (idx < 0 || !fname) {\r\n    // Unknown mime or empty name.\r\n    return fname;\r\n  }\r\n  const ext = MIME_EXTENSIONS[idx];\r\n\r\n  const at = fname.lastIndexOf('.');\r\n  if (at >= 0) {\r\n    fname = fname.substring(0, at);\r\n  }\r\n  return fname + '.' + ext;\r\n}\r\n\r\n// Scale uploaded image to fit under certain dimensions and byte size, optionally constraining to a square.\r\n// On success calls onSuccess callback with the scaled image as Blob.\r\nexport function imageScaled(fileOrBlob, maxWidth, maxHeight, maxSize, forceSquare, onSuccess, onError) {\r\n  const img = new Image();\r\n  img.crossOrigin = 'Anonymous';\r\n  img.onerror = function(err) {\r\n    onError(\"Image format unrecognized\");\r\n  }\r\n  img.onload = async function() {\r\n    // Once the image is loaded, the URL is no longer needed.\r\n    URL.revokeObjectURL(img.src);\r\n\r\n    // Calculate the desired image dimensions.\r\n    const dim = fitImageSize(this.width, this.height, maxWidth, maxHeight, forceSquare);\r\n    if (!dim) {\r\n      onError(\"Invalid image\");\r\n      return;\r\n    }\r\n    let canvas = document.createElement('canvas');\r\n    canvas.width = dim.dstWidth;\r\n    canvas.height = dim.dstHeight;\r\n    let ctx = canvas.getContext('2d');\r\n    ctx.imageSmoothingEnabled = true;\r\n    ctx.drawImage(this, dim.xoffset, dim.yoffset, dim.srcWidth, dim.srcHeight,\r\n      0, 0, dim.dstWidth, dim.dstHeight);\r\n\r\n    const mime = SUPPORTED_IMAGE_FORMATS.includes(fileOrBlob.type) ? fileOrBlob.type : 'image/jpeg';\r\n    // Generate blob to check size of the image.\r\n    let blob = await new Promise(resolve => canvas.toBlob(resolve, mime));\r\n    if (!blob) {\r\n      onError(\"Unsupported image format\");\r\n      return;\r\n    }\r\n\r\n    // Ensure the image is not too large. Shrink the image keeping the aspect ratio.\r\n    // Do nothing if maxsize is <= 0.\r\n    while (maxSize > 0 && blob.length > maxSize) {\r\n      dim.dstWidth = (dim.dstWidth * 0.70710678118) | 0;\r\n      dim.dstHeight = (dim.dstHeight * 0.70710678118) | 0;\r\n      canvas.width = dim.dstWidth;\r\n      canvas.height = dim.dstHeight;\r\n      ctx = canvas.getContext('2d');\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n      ctx.drawImage(this, dim.xoffset, dim.yoffset, dim.srcWidth, dim.srcHeight,\r\n        0, 0, dim.dstWidth, dim.dstHeight);\r\n      blob = await new Promise(resolve => canvas.toBlob(resolve, mime));\r\n    }\r\n\r\n    canvas = null;\r\n    onSuccess(mime, blob, dim.dstWidth, dim.dstHeight, fileNameForMime(fileOrBlob.name, mime));\r\n  };\r\n  img.src = URL.createObjectURL(fileOrBlob);\r\n}\r\n\r\n// Convert File to base64 string.\r\nexport function fileToBase64(file, onSuccess) {\r\n  const reader = new FileReader();\r\n  reader.addEventListener('load', function() {\r\n    onSuccess(file.type, reader.result.split(',')[1], file.name);\r\n  });\r\n  reader.readAsDataURL(file);\r\n}\r\n\r\n// Convert Blob to base64 string.\r\nexport function blobToBase64(blob, onSuccess) {\r\n  const reader = new FileReader();\r\n  reader.addEventListener('load', function() {\r\n    onSuccess(blob.type, reader.result.split(',')[1]);\r\n  });\r\n  reader.readAsDataURL(blob);\r\n}\r\n\r\n// File pasted from the clipboard. It's either an inline image or a file attachment.\r\n// FIXME: handle large files out of band.\r\nexport function filePasted(event, onImageSuccess, onAttachmentSuccess, onError) {\r\n  var items = (event.clipboardData || event.originalEvent.clipboardData || {}).items;\r\n  for (var i in items) {\r\n    var item = items[i];\r\n    if (item.kind === 'file') {\r\n      var file = item.getAsFile();\r\n      if (!file) {\r\n        console.log(\"Failed to get file object from pasted file item\", item.kind, item.type);\r\n        continue;\r\n      }\r\n      if (file.type && file.type.split('/')[0] == 'image') {\r\n        // Handle inline image\r\n        if (file.size > MAX_INBAND_ATTACHMENT_SIZE || SUPPORTED_IMAGE_FORMATS.indexOf(file.type) < 0) {\r\n          imageFileScaledToBase64(file, MAX_IMAGE_DIM, MAX_IMAGE_DIM, false, onImageSuccess, onError);\r\n        } else {\r\n          imageFileToBase64(file, onImageSuccess, onError);\r\n        }\r\n      } else {\r\n        // Handle file attachment\r\n        fileToBase64(file, onAttachmentSuccess, onError)\r\n      }\r\n      // Indicate that the pasted data contains a file.\r\n      return true;\r\n    }\r\n  }\r\n  // No file found.\r\n  return false;\r\n}\r\n\r\n// Get mime type from data URL header.\r\nexport function getMimeType(header) {\r\n  var mime = /^data:(image\\/[-+a-z0-9.]+);base64/.exec(header);\r\n  return (mime && mime.length > 1) ? mime[1] : null;\r\n}\r\n\r\n// Given length of a binary object in bytes, calculate the length after\r\n// base64 encoding.\r\nexport function base64EncodedLen(n) {\r\n  return Math.floor((n + 2) / 3) * 4;\r\n}\r\n\r\n// Given length of a base64-encoded object, calculate decoded size of the\r\n// pbject in bytes.\r\nexport function base64DecodedLen(n) {\r\n  return Math.floor(n / 4) * 3;\r\n}\r\n\r\n// Re-encode string to standard base64 encoding with padding.\r\n// The string may be base64-URL encoded without the padding.\r\nexport function base64ReEncode(str) {\r\n  if (str) {\r\n    str = str.replace(/-/g, '+').replace(/_/g, '/');\r\n    try {\r\n      str = btoa(atob(str));\r\n    } catch(err) {\r\n      console.log(\"Failed to base64 re-encode string.\", err);\r\n      str = null;\r\n    }\r\n  }\r\n  return str;\r\n}\r\n",
    "import { KNOWN_HOSTS, DEFAULT_HOST } from '../config.js';\r\n\r\n// Detect server address from the URL\r\nexport function detectServerAddress() {\r\n  let host = DEFAULT_HOST;\r\n  if (typeof window.location == 'object') {\r\n    if (window.location.protocol == 'file:' || window.location.hostname == 'localhost') {\r\n      host = KNOWN_HOSTS.local;\r\n    } else if (window.location.hostname) {\r\n      host = window.location.hostname + (window.location.port ? ':' + window.location.port : '');\r\n    }\r\n  }\r\n  return host;\r\n}\r\n\r\n// Detect if the page is served over HTTPS.\r\nexport function isSecureConnection() {\r\n  if (typeof window.location == 'object') {\r\n    return window.location.protocol == 'https:';\r\n  }\r\n  return false;\r\n}\r\n\r\nexport function isLocalHost() {\r\n  if (typeof window.location == 'object') {\r\n    return window.location.hostname == 'localhost';\r\n  }\r\n  return false;\r\n}\r\n",
    "// Helper functions for storing values in localStorage.\r\n// By default localStorage can store only strings, not objects or other types.\r\n\r\nexport default class LocalStorageUtil {\r\n  // Replace old object with the new one.\r\n  static setObject(key, value) {\r\n    localStorage.setItem(key, JSON.stringify(value));\r\n  }\r\n\r\n  // Get stored object.\r\n  static getObject(key) {\r\n    const value = localStorage.getItem(key);\r\n    return value && JSON.parse(value);\r\n  }\r\n\r\n  // Partially or wholly update stored object.\r\n  static updateObject(key, value) {\r\n    const oldVal = this.getObject(key);\r\n    this.setObject(key, Object.assign(oldVal || {}, value));\r\n  }\r\n\r\n  // Just a wrapper.\r\n  static removeItem(key) {\r\n    localStorage.removeItem(key);\r\n  }\r\n}\r\n",
    "// Utility class for hash navigation.\r\n\r\n// Parse hash as in http://www.example.com/path#hash as if it were\r\n// path and arguments.\r\nexport default class HashNavigation {\r\n  static parseUrlHash(hash) {\r\n    // Split path from args, path -> parts[0], args->path[1]\r\n    const parts = hash.split('?', 2);\r\n    const params = {};\r\n    let path = [];\r\n    if (parts[0]) {\r\n      path = parts[0].substr(1).split('/');\r\n    }\r\n    if (parts[1]) {\r\n      parts[1].split('&').forEach(function(part) {\r\n        let item = part.split('=');\r\n        if (item[0]) {\r\n          params[decodeURIComponent(item[0])] = decodeURIComponent(item[1]);\r\n        }\r\n      });\r\n    }\r\n    return {path: path, params: params};\r\n  }\r\n\r\n  static navigateTo(url) {\r\n    window.location.hash = url;\r\n  }\r\n\r\n  static composeUrlHash(path, params) {\r\n    let url = path.join('/');\r\n    const args = [];\r\n    for (const key in params) {\r\n      if (params.hasOwnProperty(key)) {\r\n        args.push(key + '=' + params[key]);\r\n      }\r\n    }\r\n    if (args.length > 0) {\r\n      url += '?' + args.join('&');\r\n    }\r\n    return url;\r\n  }\r\n\r\n  static addUrlParam(hash, key, value) {\r\n    const parsed = this.parseUrlHash(hash);\r\n    parsed.params[key] = value;\r\n    return this.composeUrlHash(parsed.path, parsed.params);\r\n  }\r\n\r\n  static removeUrlParam(hash, key) {\r\n    const parsed = this.parseUrlHash(hash);\r\n    delete parsed.params[key];\r\n    return this.composeUrlHash(parsed.path, parsed.params);\r\n  }\r\n\r\n  static setUrlSidePanel(hash, sidepanel) {\r\n    const parsed = this.parseUrlHash(hash);\r\n    parsed.path[0] = sidepanel;\r\n    return this.composeUrlHash(parsed.path, parsed.params);\r\n  }\r\n\r\n  static setUrlTopic(hash, topic) {\r\n    const parsed = this.parseUrlHash(hash);\r\n    parsed.path[1] = topic;\r\n    // Close InfoView on topic change.\r\n    delete parsed.params.info;\r\n    return this.composeUrlHash(parsed.path, parsed.params);\r\n  }\r\n}\r\n",
    "// Short representation of time in the past.\r\nexport function shortDateFormat(then, locale) {\r\n  locale = locale || window.navigator.userLanguage || window.navigator.language;\r\n  const now = new Date();\r\n  if (then.getFullYear() == now.getFullYear()) {\r\n    // Same year.\r\n    if (then.getMonth() == now.getMonth() && then.getDate() == now.getDate()) {\r\n      // Same month and day, show time only.\r\n      return then.toLocaleTimeString(locale, {hour12: false, hour: '2-digit', minute: '2-digit'});\r\n    }\r\n    // Different month and/or day, show month day, time.\r\n    return then.toLocaleDateString(locale,\r\n      {hour12: false, month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit'});\r\n  }\r\n  // Different year: just show the date.\r\n  return then.toLocaleDateString(locale, {year: 'numeric', month: 'short', day: 'numeric'});\r\n}\r\n\r\n// Convert seconds to minutes:seconds, i.e. 156 sec -> 2:36.\r\nexport function secondsToTime(seconds) {\r\n  const min = Math.floor(seconds / 60);\r\n  let sec = seconds % 60;\r\n  sec = sec < 10 ? `0${sec}` : sec;\r\n  return `${min}:${sec}`;\r\n}\r\n\r\n// Convert a number of bytes to human-readable format.\r\nexport function bytesToHumanSize(bytes) {\r\n  if (!bytes || bytes == 0) {\r\n    return '0 Bytes';\r\n  }\r\n\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB'];\r\n  const bucket = Math.min(Math.floor(Math.log2(bytes) / 10) | 0, sizes.length-1);\r\n  const count = bytes / Math.pow(1024, bucket);\r\n  const round = bucket > 0 ? (count < 3 ? 2 : (count < 30 ? 1 : 0)) : 0;\r\n  return count.toFixed(round) + ' ' + sizes[bucket];\r\n}\r\n\r\n// Get 32 bit integer hash value for a string. Ideally it should produce the same value\r\n// as Java's String#hash().\r\nexport function stringHash(value) {\r\n  let hash = 0;\r\n  value = '' + value;\r\n  for (let i = 0; i < value.length; i++) {\r\n    hash = ((hash << 5) - hash) + value.charCodeAt(i);\r\n    hash = hash & hash; // Convert to 32bit integer\r\n  }\r\n  return hash;\r\n}\r\n",
    "// Odds and ends\r\n\r\nimport Tinode from 'tinode-sdk';\r\n\r\n// Make shortcut icon appear with a green dot + show unread count in title.\r\nexport function updateFavicon(count) {\r\n  const oldIcon = document.getElementById('shortcut-icon');\r\n  const head = document.head || document.getElementsByTagName('head')[0];\r\n  const newIcon = document.createElement('link');\r\n  newIcon.type = 'image/png';\r\n  newIcon.id = 'shortcut-icon';\r\n  newIcon.rel = 'shortcut icon';\r\n  newIcon.href = 'img/logo32x32' + (count > 0 ? 'a' : '') + '.png';\r\n  if (oldIcon) {\r\n    head.removeChild(oldIcon);\r\n  }\r\n  head.appendChild(newIcon);\r\n\r\n  document.title = (count > 0 ? '('+count+') ' : '') + 'Tinode';\r\n}\r\n\r\n// Create theCard which represents user's or topic's \"public\" info.\r\nexport function theCard(fn, imageUrl, imageMimeType) {\r\n  let card = null;\r\n  fn = fn && fn.trim();\r\n\r\n  if (fn) {\r\n    card = {\r\n      fn: fn\r\n    };\r\n  }\r\n\r\n  if (imageUrl) {\r\n    card = card || {};\r\n    let mimeType = imageMimeType;\r\n    // Is this a data URL \"data:[<mediatype>][;base64],<data>\"?\r\n    const matches = /^data:(image\\/[-a-z0-9+.]+)?(;base64)?,/i.exec(imageUrl);\r\n    if (matches) {\r\n      mimeType = matches[1];\r\n      card.photo = {\r\n        data: imageUrl.substring(imageUrl.indexOf(',') + 1)\r\n      };\r\n    } else {\r\n      card.photo = {\r\n        ref: imageUrl\r\n      };\r\n    }\r\n    card.photo.type = (mimeType || 'image/jpeg').substring('image/'.length);\r\n  }\r\n\r\n  return card;\r\n}\r\n\r\n// Deep-shallow compare two arrays: shallow compare each element.\r\nexport function arrayEqual(a, b) {\r\n  if (a === b) {\r\n    return true;\r\n  }\r\n\r\n  if (!Array.isArray(a) || !Array.isArray(b)) {\r\n    return false;\r\n  }\r\n\r\n  // Compare lengths first.\r\n  if (a.length != b.length) {\r\n    return false;\r\n  }\r\n  // Order of elements is ignored.\r\n  a.sort();\r\n  b.sort();\r\n  for (let i = 0, l = a.length; i < l; i++) {\r\n    if (a[i] !== b[i]) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\n// Checks (loosely) if the given string is a phone. If so, returns the phone number in a format\r\n// as close to E.164 as possible.\r\nexport function asPhone(val) {\r\n  val = val.trim();\r\n  if (/^(?:\\+?(\\d{1,3}))?[- (.]*(\\d{3})[- ).]*(\\d{3})[- .]*(\\d{2})[- .]*(\\d{2})?$/.test(val)) {\r\n    return val.replace(/[- ().]*/, '');\r\n  }\r\n  return null;\r\n}\r\n\r\n// Checks (loosely) if the given string is an email. If so returns the email.\r\nexport function asEmail(val) {\r\n  val = val.trim();\r\n  if (/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/.test(val)) {\r\n    return val;\r\n  }\r\n  return null;\r\n}\r\n\r\n// Checks if URL is a relative url, i.e. has no 'scheme://', including the case of missing scheme '//'.\r\n// The scheme is expected to be RFC-compliant, e.g. [a-z][a-z0-9+.-]*\r\n// example.html - ok\r\n// https:example.com - not ok.\r\n// http:/example.com - not ok.\r\n// '  https://example.com' - not ok. ( means carriage return)\r\nexport function isUrlRelative(url) {\r\n  return url && !/^\\s*([a-z][a-z0-9+.-]*:|\\/\\/)/im.test(url);\r\n}\r\n\r\n// Ensure URL does not present an XSS risk. Optional allowedSchemes may contain an array of\r\n// strings with permitted URL schemes, such as ['ftp', 'ftps']; otherwise accept http and https only.\r\n// If apikey and/or token is defined, it's appended to relative URL.\r\nexport function sanitizeUrl(url, allowedSchemes) {\r\n  if (!url) {\r\n    return null;\r\n  }\r\n\r\n  // Strip control characters and whitespace. They are not valid URL characters anyway.\r\n  url = url.replace(/[^\\x20-\\x7E]/gmi, '').trim();\r\n\r\n  // Relative URLs are safe.\r\n  // Relative URL does not start with ':', abcd123: or '//'.\r\n  if (!/^([a-z][a-z0-9+.-]*:|\\/\\/)/i.test(url)) {\r\n    return url;\r\n  }\r\n\r\n  // Blob URLs are safe.\r\n  if (/^blob:http/.test(url)) {\r\n    return url;\r\n  }\r\n\r\n  // Absolute URL. Accept only safe schemes, or no scheme.\r\n  const schemes = Array.isArray(allowedSchemes) ? allowedSchemes.join('|') : 'http|https';\r\n  const re = new RegExp('^((' + schemes + '):|//)', 'i');\r\n  if (!re.test(url)) {\r\n    return null;\r\n  }\r\n\r\n  return url;\r\n}\r\n\r\n// Ensure URL is suitable for <img src=\"url\"> field: the URL must be a relative URL or\r\n// have http:, https:, blob: or data: scheme.\r\n// The relative URL is appended with the API key and/or auth token.\r\n// In case of data: scheme, the URL must start with a 'data:image/XXXX;base64,'.\r\nexport function sanitizeImageUrl(url) {\r\n  if (!url) {\r\n    return null;\r\n  }\r\n\r\n  const sanitizedUrl = sanitizeUrl(url);\r\n  if (sanitizedUrl) {\r\n    return sanitizedUrl;\r\n  }\r\n\r\n  // Is this a data: URL of an image?\r\n  if (/data:image\\/[a-z0-9.-]+;base64,/i.test(url.trim())) {\r\n    return url;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n// Given message's received status, return name and color of a delivery indicator icon.\r\nexport function deliveryMarker(received) {\r\n  switch (received) {\r\n    case Tinode.MESSAGE_STATUS_SENDING:\r\n      return { name: 'access_time' }; // watch face\r\n    case Tinode.MESSAGE_STATUS_FAILED:\r\n      return { name: 'warning', color: 'amber' }; // yellow icon /!\\\r\n    case Tinode.MESSAGE_STATUS_SENT:\r\n      return { name: 'done' }; // checkmark\r\n    case Tinode.MESSAGE_STATUS_RECEIVED:\r\n      return { name: 'done_all' }; // double checkmark\r\n    case Tinode.MESSAGE_STATUS_READ:\r\n      return { name: 'done_all', color: 'blue' }; // blue double checkmark\r\n  }\r\n  return null;\r\n}\r\n",
    "// This is a generated file. Don't edit.\r\n\r\nexport const PACKAGE_VERSION = \"0.17.10\";\r\n",
    "// Edit account parameters.\r\nimport React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport Tinode from 'tinode-sdk';\r\n\r\nimport AvatarUpload from '../widgets/avatar-upload.jsx';\r\nimport InPlaceEdit from '../widgets/in-place-edit.jsx';\r\nimport TagManager from '../widgets/tag-manager.jsx';\r\n\r\nimport { MAX_TITLE_LENGTH } from '../config.js';\r\nimport { makeImageDataUrl } from '../lib/blob-helpers.js';\r\nimport { arrayEqual, asEmail, asPhone, theCard } from '../lib/utils.js';\r\n\r\nexport default class AccGeneralView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const me = this.props.tinode.getMeTopic();\r\n    this.state = {\r\n      fullName: me.public ? me.public.fn : undefined,\r\n      avatar: makeImageDataUrl(me.public ? me.public.photo : null),\r\n      tags: me.tags(),\r\n      credentials: me.getCredentials() || [],\r\n      addCredActive: false,\r\n      addCredInvalid: false,\r\n      newCred: '',\r\n      previousOnTags: me.onTagsUpdated\r\n    };\r\n\r\n    this.tnNewTags = this.tnNewTags.bind(this);\r\n    this.tnCredsUpdated = this.tnCredsUpdated.bind(this);\r\n    this.handleFullNameUpdate = this.handleFullNameUpdate.bind(this);\r\n    this.handleImageChanged = this.handleImageChanged.bind(this);\r\n    this.handleCredChange = this.handleCredChange.bind(this);\r\n    this.handleCredKeyDown = this.handleCredKeyDown.bind(this);\r\n    this.handleCredEntered = this.handleCredEntered.bind(this);\r\n    this.handleTagsUpdated = this.handleTagsUpdated.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const me = this.props.tinode.getMeTopic();\r\n    me.onCredsUpdated = this.tnCredsUpdated;\r\n    me.onTagsUpdated = this.tnNewTags;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const me = this.props.tinode.getMeTopic();\r\n    me.onTagsUpdated = this.state.previousOnTags;\r\n    me.onCredsUpdated = undefined;\r\n  }\r\n\r\n  tnNewTags(tags) {\r\n    this.setState({tags: tags});\r\n  }\r\n\r\n  tnCredsUpdated(creds) {\r\n    this.setState({credentials: creds || []});\r\n  }\r\n\r\n  handleFullNameUpdate(fn) {\r\n    fn = fn.trim().substring(0, MAX_TITLE_LENGTH);\r\n    if (fn) {\r\n      this.setState({fullName: fn});\r\n      this.props.onUpdateAccount(undefined, theCard(fn, null));\r\n    }\r\n  }\r\n\r\n  handleImageChanged(img) {\r\n    this.setState({avatar: img});\r\n    this.props.onUpdateAccount(undefined, theCard(null, img || Tinode.DEL_CHAR));\r\n  }\r\n\r\n  handleCredChange(e) {\r\n    this.setState({newCred: e.target.value, addCredInvalid: false});\r\n  }\r\n\r\n  handleCredKeyDown(e) {\r\n    if (e.keyCode === 27) {\r\n      // Escape pressed\r\n      this.setState({newCred: '', addCredActive: false});\r\n    } else if (e.keyCode === 13) {\r\n      // Enter pressed\r\n      this.handleCredEntered(e);\r\n    }\r\n  }\r\n\r\n  handleCredEntered(e) {\r\n    let value = this.state.newCred.trim();\r\n    if (!value) {\r\n      this.setState({addCredActive: false, addCredInvalid: false});\r\n      return;\r\n    }\r\n\r\n    let val = asPhone(value);\r\n    let method;\r\n    if (val) {\r\n      method = 'tel';\r\n    } else {\r\n      val = asEmail(value);\r\n      if (val) {\r\n        method = 'email';\r\n      }\r\n    }\r\n    if (method) {\r\n      this.props.onCredAdd(method, val);\r\n      this.setState({addCredActive: false, newCred: ''});\r\n    } else {\r\n      this.setState({addCredInvalid: true});\r\n    }\r\n  }\r\n\r\n  handleTagsUpdated(tags) {\r\n    // Check if tags have actually changed.\r\n    if (arrayEqual(this.state.tags.slice(0), tags.slice(0))) {\r\n      return;\r\n    }\r\n    this.props.onUpdateTags(tags);\r\n  }\r\n\r\n  render() {\r\n    const credentials = [];\r\n    this.state.credentials.map((cred) => {\r\n      credentials.push(<div key={cred.meth + \":\" + cred.val + \":\" + cred.done}>{cred.meth}: <tt>{cred.val}</tt>\r\n        <span > {!cred.done ?\r\n          <a href=\"#\" onClick={(e) => {e.preventDefault(); this.props.onCredConfirm(cred.meth, cred.val);}}>\r\n              <FormattedMessage id=\"validate_credential_action\" defaultMessage=\"confirm\"\r\n                description=\"Validate credentail call to action\" />\r\n            </a>\r\n          : null} <a href=\"#\" onClick={(e) => {e.preventDefault(); this.props.onCredDelete(cred.meth, cred.val);}}><i\r\n            className=\"material-icons gray\">delete_outline</i></a></span></div>);\r\n    });\r\n\r\n    return (\r\n      <div className=\"scrollable-panel\">\r\n        <div className=\"panel-form-row\">\r\n          <div className=\"panel-form-column\">\r\n            <label className=\"small\"><FormattedMessage id=\"label_your_name\" defaultMessage=\"Your name\"\r\n              description=\"Label for full name editing\" /></label>\r\n            <div><FormattedMessage id=\"full_name_prompt\" defaultMessage=\"Full name, e.g. John Doe\"\r\n              description=\"Input placeholder for person's full name\">{\r\n              (full_name_placeholder) => <InPlaceEdit\r\n                placeholder={full_name_placeholder}\r\n                value={this.state.fullName}\r\n                onFinished={this.handleFullNameUpdate} />\r\n            }</FormattedMessage></div>\r\n          </div>\r\n          <AvatarUpload\r\n            avatar={this.state.avatar}\r\n            uid={this.props.myUserId}\r\n            title={this.state.fullName}\r\n            onImageChanged={this.handleImageChanged}\r\n            onError={this.props.onError} />\r\n        </div>\r\n        <div className=\"hr\" />\r\n        <FormattedMessage id=\"title_tag_manager\" defaultMessage=\"Tags (user discovery)\"\r\n          description=\"Section title for TagManager\">{\r\n          (title_tag_manager) => <TagManager\r\n            title={title_tag_manager}\r\n            activated={false}\r\n            tags={this.state.tags}\r\n            tinode={this.props.tinode}\r\n            onSubmit={this.handleTagsUpdated} />\r\n        }</FormattedMessage>\r\n        <div className=\"hr\" />\r\n        <div className=\"panel-form-column\">\r\n          <label className=\"small\">\r\n            <FormattedMessage id=\"label_user_contacts\" defaultMessage=\"Contacts:\"\r\n            description=\"Label for user contacts\" />\r\n          </label>\r\n          <div className=\"quoted\">\r\n            {credentials}\r\n            {this.state.addCredActive ?\r\n              <input type=\"text\" value={this.state.value}\r\n                className={this.state.addCredInvalid ? 'invalid' : null}\r\n                placeholder=\"Phone number or email\" required=\"required\" autoFocus\r\n                onChange={this.handleCredChange} onKeyDown={this.handleCredKeyDown} onBlur={this.handleCredEntered} />\r\n              : null}\r\n            <div>\r\n              <a href=\"#\" onClick={(e) => {e.preventDefault(); this.setState({addCredActive: true});}}>\r\n                <i className=\"material-icons\">add</i>\r\n                <FormattedMessage id=\"button_add_another\" defaultMessage=\"Add another\" description=\"Call to action [+ add another]\" />\r\n              </a></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n",
    "// Edit account parameters.\r\nimport React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport CheckBox from '../widgets/checkbox.jsx';\r\n\r\nexport default class EditAccountView extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleCheckboxClick = this.handleCheckboxClick.bind(this);\r\n  }\r\n\r\n  handleCheckboxClick(what, checked) {\r\n    if (what == 'sound') {\r\n      this.props.onToggleMessageSounds(checked);\r\n    } else if (what == 'alert') {\r\n      this.props.onTogglePushNotifications(checked);\r\n    } else if (what == 'incognito') {\r\n      this.props.onToggleIncognitoMode(checked);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <div className=\"scrollable-panel\">\r\n          <div className=\"panel-form-row\">\r\n            <label htmlFor=\"message-sound\">\r\n              <FormattedMessage id=\"label_message_sound\" defaultMessage=\"Message sound:\"\r\n                description=\"Label for message sounds toggle\" />\r\n            </label>\r\n            <CheckBox name=\"sound\" id=\"message-sound\"\r\n              checked={this.props.messageSounds} onChange={this.handleCheckboxClick} />\r\n          </div>\r\n          <div className=\"panel-form-row\">\r\n            <label htmlFor=\"desktop-alerts\">\r\n            {this.props.desktopAlertsEnabled ?\r\n              <FormattedMessage id=\"label_push_notifications\" defaultMessage=\"Notification alerts:\"\r\n                description=\"Label for push notifications switch\" />\r\n              :\r\n              <FormattedMessage id=\"label_push_notifications_disabled\"\r\n                defaultMessage=\"Notification alerts (requires HTTPS):\"\r\n                description=\"Label for push notifications switch\" />\r\n            }\r\n            </label>\r\n            <CheckBox name=\"alert\" id=\"desktop-alerts\"\r\n              checked={this.props.desktopAlerts}\r\n              onChange={this.props.desktopAlertsEnabled ? this.handleCheckboxClick : null} />\r\n          </div>\r\n          <div className=\"panel-form-row\">\r\n            <label htmlFor=\"incognito-mode\">\r\n              <FormattedMessage id=\"label_incognito_mode\" defaultMessage=\"Incognito mode:\"\r\n                description=\"Label for incognito mode toggle\" />\r\n            </label>\r\n            <CheckBox name=\"incognito\" id=\"incognito-mode\"\r\n              checked={this.props.incognitoMode} onChange={this.handleCheckboxClick} />\r\n          </div>\r\n        </div>\r\n    );\r\n  }\r\n};\r\n",
    "// Edit account parameters.\r\nimport React from 'react';\r\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\r\n\r\nimport InPlaceEdit from '../widgets/in-place-edit.jsx';\r\nimport PermissionsEditor from '../widgets/permissions-editor.jsx';\r\n\r\nconst messages = defineMessages({\r\n  delete_account: {\r\n    id: 'delete_account',\r\n    defaultMessage: 'Delete account',\r\n    description: 'Title for delete account warning'\r\n  },\r\n  delete_account_warning: {\r\n    id: 'delete_account_arning',\r\n    defaultMessage: 'Are you sure you want to delete your account? It cannot be undone.',\r\n    description: 'Warning message when deleting an account'\r\n  }\r\n});\r\n\r\nclass AccSecurityView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const me = this.props.tinode.getMeTopic();\r\n    let blockedCount = 0;\r\n    me.contacts((c) => {\r\n      if (c.acs && !c.acs.isJoiner()) {\r\n        blockedCount ++;\r\n      }\r\n    });\r\n    const defacs = me.getDefaultAccess();\r\n    this.state = {\r\n      auth: defacs ? defacs.auth : null,\r\n      anon: defacs ? defacs.anon : null,\r\n      showPermissionEditorFor: undefined,\r\n      blockedCount: blockedCount,\r\n    };\r\n\r\n    this.handlePasswordUpdate = this.handlePasswordUpdate.bind(this);\r\n    this.handleLaunchPermissionsEditor = this.handleLaunchPermissionsEditor.bind(this);\r\n    this.handleHidePermissionsEditor = this.handleHidePermissionsEditor.bind(this);\r\n    this.handlePermissionsChanged = this.handlePermissionsChanged.bind(this);\r\n    this.handleDeleteAccount = this.handleDeleteAccount.bind(this);\r\n  }\r\n\r\n  handlePasswordUpdate(pwd) {\r\n    this.setState({password: pwd});\r\n    this.props.onUpdateAccount(pwd);\r\n  }\r\n\r\n  handleLaunchPermissionsEditor(which) {\r\n    this.setState({\r\n      showPermissionEditorFor: which,\r\n      editedPermissions: this.state[which]\r\n    });\r\n  }\r\n\r\n  handleHidePermissionsEditor() {\r\n    this.setState({showPermissionEditorFor: undefined});\r\n  }\r\n\r\n  handlePermissionsChanged(perm) {\r\n    let defacs = {};\r\n    defacs[this.state.showPermissionEditorFor] = perm;\r\n    this.props.onUpdateAccount(undefined, undefined, defacs);\r\n\r\n    let newState = {showPermissionEditorFor: undefined};\r\n    newState[this.state.showPermissionEditorFor] = perm;\r\n    this.setState(newState);\r\n  }\r\n\r\n  handleDeleteAccount(e) {\r\n    e.preventDefault();\r\n    const {formatMessage} = this.props.intl;\r\n    this.props.onShowAlert(\r\n      formatMessage(messages.delete_account), // title\r\n      formatMessage(messages.delete_account_warning), // content\r\n      (() => { this.props.onDeleteAccount(); }), // onConfirm\r\n      null, // use default text \"OK\"\r\n      true, // Show Reject button\r\n      null  // use default text \"Cancel\"\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>{this.state.showPermissionEditorFor ?\r\n        <PermissionsEditor\r\n          mode={this.state.editedPermissions}\r\n          skip=\"O\"\r\n          onSubmit={this.handlePermissionsChanged}\r\n          onCancel={this.handleHidePermissionsEditor} />\r\n        :\r\n        <div className=\"scrollable-panel\">\r\n          <div className=\"panel-form-column\">\r\n            <label className=\"small\">\r\n              <FormattedMessage id=\"label_password\" defaultMessage=\"Password\"\r\n                  description=\"Label for password editing\" />\r\n            </label>\r\n            <div>\r\n              <FormattedMessage id=\"password_unchanged_prompt\" defaultMessage=\"Unchanged\"\r\n                description=\"Message in editor while password is unchanged\">{\r\n                (password_unchanged) => <InPlaceEdit\r\n                  placeholder={password_unchanged}\r\n                  type=\"password\"\r\n                  onFinished={this.handlePasswordUpdate} />\r\n              }</FormattedMessage>\r\n            </div>\r\n          </div>\r\n          <div className=\"hr\" />\r\n          <div className=\"panel-form-column\">\r\n            <a href=\"#\" className=\"danger flat-button\" onClick={(e) => {e.preventDefault(); this.props.onLogout();}}>\r\n              <i className=\"material-icons\">exit_to_app</i> &nbsp;<FormattedMessage id=\"button_logout\"\r\n                defaultMessage=\"Logout\" description=\"Button [Logout]\" />\r\n            </a>\r\n            <a href=\"#\" className=\"danger flat-button\" onClick={(e) => {this.handleDeleteAccount(e);}}>\r\n              <i className=\"material-icons\">delete</i> &nbsp;<FormattedMessage id=\"button_delete_account\"\r\n                defaultMessage=\"Delete account\" description=\"Button [Delete account]\" />\r\n            </a>\r\n          </div>\r\n          <div className=\"hr\" />\r\n          <div className=\"panel-form-column\">\r\n            <div>\r\n              <label className=\"small\">\r\n                <FormattedMessage id=\"label_default_access_mode\" defaultMessage=\"Default access mode:\"\r\n                description=\"Label for default access mode\" />\r\n              </label>\r\n            </div>\r\n            <div className=\"quoted\">\r\n              <div>Auth: <tt className=\"clickable\"\r\n                onClick={this.handleLaunchPermissionsEditor.bind(this, 'auth')}>{this.state.auth}</tt></div>\r\n              <div>Anon: <tt className=\"clickable\"\r\n                onClick={this.handleLaunchPermissionsEditor.bind(this, 'anon')}>{this.state.anon}</tt></div>\r\n            </div>\r\n          </div>\r\n          {this.state.blockedCount > 0 ?\r\n            <>\r\n              <div className=\"hr\" />\r\n              <div className=\"panel-form-row\">\r\n                <i className=\"material-icons\">block</i>&nbsp;\r\n                <a href=\"#\" className=\"gray\" onClick={(e) => {e.preventDefault(); this.props.onShowBlocked();}}>\r\n                  <FormattedMessage id=\"blocked_contacts_link\" defaultMessage=\"Blocked contacts ({count})\"\r\n                    values={{ count: this.state.blockedCount }} description=\"Blocked contacts link\" />\r\n                </a>\r\n              </div>\r\n            </>\r\n            : null }\r\n        </div>\r\n      }</React.Fragment>\r\n    );\r\n  }\r\n};\r\n\r\nexport default injectIntl(AccSecurityView);\r\n",
    "// Edit account parameters.\r\nimport React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport Tinode from 'tinode-sdk';\r\n\r\nimport { APP_NAME, LINK_CONTACT_US, LINK_PRIVACY_POLICY, LINK_TERMS_OF_SERVICE } from '../config.js';\r\n\r\nexport default class AccSupportView extends React.PureComponent {\r\n  render() {\r\n    return (\r\n      <div className=\"scrollable-panel\">\r\n        <div className=\"panel-form-column\">\r\n          <a href={LINK_CONTACT_US} className=\"flat-button\" target=\"_blank\">\r\n            <i className=\"material-icons\">email</i> &nbsp;<FormattedMessage id=\"link_contact_us\"\r\n              defaultMessage=\"Contact Us\" description=\"Ancor text for contacting us by email\" />\r\n          </a>\r\n          <a href={LINK_TERMS_OF_SERVICE} className=\"flat-button\" target=\"_blank\">\r\n            <i className=\"material-icons\">description</i> &nbsp;<FormattedMessage id=\"link_terms_of_service\"\r\n              defaultMessage=\"Terms of Service\" description=\"Ancor text for terms of service link\" />\r\n          </a>\r\n          <a href={LINK_PRIVACY_POLICY} className=\"flat-button\" target=\"_blank\">\r\n            <i className=\"material-icons\">policy</i> &nbsp;<FormattedMessage id=\"link_privacy_policy\"\r\n              defaultMessage=\"Privacy Policy\" description=\"Ancor text for privacy policy link\" />\r\n          </a>\r\n        </div>\r\n        <div className=\"hr\" />\r\n        <div className=\"panel-form-column\">\r\n          <div className=\"panel-form-row\">\r\n            <label className=\"small\"><FormattedMessage id=\"label_client\" defaultMessage=\"Client:\"\r\n              description=\"Label for a client version\" /></label>\r\n            {APP_NAME}\r\n          </div>\r\n          <div className=\"panel-form-row\">\r\n            <label className=\"small\"><FormattedMessage id=\"label_sdk\" defaultMessage=\"SDK:\" /></label>\r\n            {Tinode.getLibrary()}\r\n          </div>\r\n          <div className=\"panel-form-row\">\r\n            <label className=\"small\"><FormattedMessage id=\"label_server\" defaultMessage=\"Server:\"\r\n              description=\"Label for a server version\" /></label>\r\n            {this.props.serverVersion}\r\n          </div>\r\n          <div className=\"panel-form-row\">\r\n            <label className=\"small\"><FormattedMessage id=\"label_server_address\" defaultMessage=\"Server address:\" /></label>\r\n            {this.props.serverAddress}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n",
    "/* ContactsView holds all contacts-related stuff */\r\nimport React from 'react';\r\nimport { FormattedMessage, defineMessages } from 'react-intl';\r\n\r\nimport ContactList from '../widgets/contact-list.jsx';\r\n\r\nimport { updateFavicon } from '../lib/utils.js';\r\n\r\nconst messages = defineMessages({\r\n  archived_contacts_title: {\r\n    id: \"archived_contacts\",\r\n    defaultMessage: \"Archived contacts ({count})\",\r\n    description: \"Label for archived chats\"\r\n  }\r\n});\r\n\r\nexport default class ContactsView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleAction = this.handleAction.bind(this);\r\n\r\n    this.state = ContactsView.deriveStateFromProps(props);\r\n  }\r\n\r\n  static deriveStateFromProps(props) {\r\n    const contacts = [];\r\n    let unreadThreads = 0;\r\n    let archivedCount = 0;\r\n    props.chatList.map((c) => {\r\n      const blocked = c.acs && !c.acs.isJoiner();\r\n      // Show only blocked contacts only when props.blocked == true.\r\n      if (blocked && props.blocked) {\r\n        contacts.push(c);\r\n      }\r\n      if (blocked || props.blocked) {\r\n        return;\r\n      }\r\n\r\n      if (c.private && c.private.arch) {\r\n        if (props.archive) {\r\n          contacts.push(c);\r\n        } else {\r\n          archivedCount ++;\r\n        }\r\n      } else if (!props.archive) {\r\n        contacts.push(c);\r\n        unreadThreads += c.unread > 0 ? 1 : 0;\r\n      }\r\n    });\r\n\r\n    contacts.sort((a, b) => {\r\n      return (b.touched || 0) - (a.touched || 0);\r\n    });\r\n\r\n    if (archivedCount > 0) {\r\n      contacts.push({\r\n        action: 'archive',\r\n        title: messages.archived_contacts_title,\r\n        values: {count: archivedCount}\r\n      });\r\n    }\r\n\r\n    return {\r\n      contactList: contacts,\r\n      unreadThreads: unreadThreads\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevProps.chatList != this.props.chatList ||\r\n        prevProps.archive != this.props.archive ||\r\n        prevProps.blocked != this.props.blocked) {\r\n      const newState = ContactsView.deriveStateFromProps(this.props);\r\n      this.setState(newState);\r\n      if (newState.unreadThreads != prevState.unreadThreads) {\r\n        updateFavicon(newState.unreadThreads);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleAction(action_ignored) {\r\n    this.props.onShowArchive();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <FormattedMessage id=\"contacts_not_found\"\r\n        defaultMessage=\"You have no chats<br />_()_/\"\r\n        description=\"HTML message shown in ContactList when no contacts are found\">{\r\n        (no_contacts) => <ContactList\r\n          connected={this.props.connected}\r\n          contacts={this.state.contactList}\r\n          emptyListMessage={no_contacts}\r\n          topicSelected={this.props.topicSelected}\r\n          myUserId={this.props.myUserId}\r\n          showOnline={true}\r\n          showUnread={true}\r\n          onTopicSelected={this.props.onTopicSelected}\r\n          showContextMenu={this.props.showContextMenu}\r\n          onAction={this.handleAction} />\r\n      }</FormattedMessage>\r\n    );\r\n  }\r\n};\r\n",
    "// Account registration.\r\nimport React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport AvatarUpload from '../widgets/avatar-upload.jsx';\r\nimport CheckBox from '../widgets/checkbox.jsx';\r\nimport VisiblePassword from '../widgets/visible-password.jsx';\r\n\r\nimport LocalStorageUtil from '../lib/local-storage.js';\r\nimport { theCard } from '../lib/utils.js';\r\n\r\nimport { MAX_TITLE_LENGTH } from '../config.js';\r\n\r\nexport default class CreateAccountView extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      login: '',\r\n      password: '',\r\n      email: '',\r\n      fn: '', // full/formatted name\r\n      imageDataUrl: null,\r\n      errorCleared: false,\r\n      saveToken: LocalStorageUtil.getObject('keep-logged-in')\r\n    };\r\n\r\n    this.handleLoginChange = this.handleLoginChange.bind(this);\r\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\r\n    this.handleEmailChange = this.handleEmailChange.bind(this);\r\n    this.handleFnChange = this.handleFnChange.bind(this);\r\n    this.handleImageChanged = this.handleImageChanged.bind(this);\r\n    this.handleToggleSaveToken = this.handleToggleSaveToken.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleLoginChange(e) {\r\n    this.setState({login: e.target.value});\r\n  }\r\n\r\n  handlePasswordChange(password) {\r\n    this.setState({password: password});\r\n  }\r\n\r\n  handleEmailChange(e) {\r\n    this.setState({email: e.target.value})\r\n  }\r\n\r\n  handleFnChange(e) {\r\n    this.setState({fn: e.target.value});\r\n  }\r\n\r\n  handleImageChanged(img) {\r\n    this.setState({imageDataUrl: img});\r\n  }\r\n\r\n  handleToggleSaveToken() {\r\n    LocalStorageUtil.setObject('keep-logged-in', !this.state.saveToken);\r\n    this.setState({saveToken: !this.state.saveToken});\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    e.preventDefault();\r\n    this.setState({errorCleared: false});\r\n    this.props.onCreateAccount(\r\n      this.state.login.trim(),\r\n      this.state.password.trim(),\r\n      theCard(this.state.fn.trim().substring(0, MAX_TITLE_LENGTH), this.state.imageDataUrl),\r\n      {'meth': 'email', 'val': this.state.email});\r\n  }\r\n\r\n  render() {\r\n    let submitClasses = 'primary';\r\n    if (this.props.disabled) {\r\n      submitClasses += ' disabled';\r\n    }\r\n\r\n    return (\r\n      <form className=\"panel-form-column\" onSubmit={this.handleSubmit}>\r\n        <div className=\"panel-form-row\">\r\n          <div className=\"panel-form-column\">\r\n            <FormattedMessage id=\"login_prompt\" defaultMessage=\"Login\"\r\n              description=\"Placeholer for username/login\">{\r\n              (login_prompt) => <input type=\"text\" placeholder={login_prompt} autoComplete=\"user-name\"\r\n                value={this.state.login} onChange={this.handleLoginChange} required autoFocus />\r\n            }</FormattedMessage>\r\n            <FormattedMessage id=\"password_prompt\" defaultMessage=\"Password\"\r\n              description=\"Placeholder/prompt for entering password\">{\r\n              (password_prompt) => <VisiblePassword placeholder={password_prompt} autoComplete=\"new-password\"\r\n                value={this.state.password} onFinished={this.handlePasswordChange}\r\n                required={true} />\r\n            }</FormattedMessage>\r\n          </div>\r\n          <AvatarUpload\r\n            onImageChanged={this.handleImageChanged}\r\n            onError={this.props.onError} />\r\n        </div>\r\n        <div  className=\"panel-form-row\">\r\n          <FormattedMessage id=\"full_name_prompt\" defaultMessage=\"Full name, e.g. John Doe\"\r\n            description=\"Input placeholder for person's full name\">{\r\n            (full_name_prompt) => <input type=\"text\" placeholder={full_name_prompt} autoComplete=\"name\"\r\n              value={this.state.fn} onChange={this.handleFnChange} required/>\r\n          }</FormattedMessage>\r\n        </div>\r\n        <div className=\"panel-form-row\">\r\n          <FormattedMessage id=\"email_prompt\" defaultMessage=\"Email, e.g. jdoe@example.com\"\r\n            description=\"Input placeholder for email entry\">{\r\n            (email_prompt) => <input type=\"email\" placeholder={email_prompt} autoComplete=\"email\"\r\n              value={this.state.email} onChange={this.handleEmailChange} required/>\r\n          }</FormattedMessage>\r\n        </div>\r\n        <div className=\"panel-form-row\">\r\n          <CheckBox id=\"save-token\" name=\"save-token\" checked={this.state.saveToken}\r\n            onChange={this.handleToggleSaveToken} />\r\n          <FormattedMessage id=\"stay_logged_in\" defaultMessage=\"Stay logged in\"\r\n            description=\"Label for a checkbox\">{\r\n            (stay_logged_in) => <label htmlFor=\"save-token\">&nbsp;{stay_logged_in}</label>\r\n          }</FormattedMessage>\r\n        </div>\r\n        <div className=\"dialog-buttons\">\r\n          <button className={submitClasses} type=\"submit\">\r\n            <FormattedMessage id=\"button_sign_up\" defaultMessage=\"Sign up\"\r\n              description=\"Create account button [Sign Up]\" />\r\n          </button>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n};\r\n",
    "// Edit account parameters.\r\nimport React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport AvatarUpload from '../widgets/avatar-upload.jsx';\r\n\r\nimport { makeImageDataUrl } from '../lib/blob-helpers.js';\r\n\r\nexport default class EditAccountView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const me = this.props.tinode.getMeTopic();\r\n    this.state = {\r\n      fullName: me.public ? me.public.fn : undefined,\r\n      avatar: makeImageDataUrl(me.public ? me.public.photo : null)\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"scrollable-panel\">\r\n        <div className=\"panel-form-row\">\r\n          <div className=\"panel-form-column\">\r\n            <label className=\"small\">\r\n              <FormattedMessage id=\"label_your_name\" defaultMessage=\"Your name\"\r\n                description=\"Label for full name editing\" />\r\n            </label>\r\n            <div className=\"large\">{this.state.fullName}</div>\r\n            <div>\r\n              <label className=\"small\"><FormattedMessage id=\"label_user_id\" defaultMessage=\"ID:\"\r\n                description=\"Label for user address (ID)\" /></label>&nbsp;\r\n              <tt>{this.props.myUserId}</tt>\r\n            </div>\r\n          </div>\r\n          <AvatarUpload\r\n            avatar={this.state.avatar}\r\n            readOnly={!this.state.owner}\r\n            uid={this.props.myUserId}\r\n            title={this.state.fullName} />\r\n        </div>\r\n        <div className=\"panel-form-row\">\r\n          <a href=\"#\" className=\"flat-button\" onClick={(e) => {e.preventDefault(); this.props.onBasicNavigate('general');}}>\r\n            <i className=\"material-icons\">edit</i>&nbsp;\r\n            <FormattedMessage id=\"button_edit\" defaultMessage=\"Edit\" description=\"Call to action [Edit]\" />\r\n          </a>\r\n        </div>\r\n        <div className=\"hr\" />\r\n        <div className=\"panel-form-column\">\r\n          <a href=\"#\" className=\"flat-button\" onClick={(e) => {e.preventDefault(); this.props.onBasicNavigate('notif');}}>\r\n            <i className=\"material-icons\">notifications</i>&nbsp;<FormattedMessage id=\"sidepanel_title_acc_notifications\"\r\n              defaultMessage=\"Notifications\" description=\"Sidepanel title for AccNotificationsView.\" />\r\n          </a>\r\n          <a href=\"#\" className=\"flat-button\" onClick={(e) => {e.preventDefault(); this.props.onBasicNavigate('security');}}>\r\n            <i className=\"material-icons\">security</i>&nbsp;<FormattedMessage id=\"sidepanel_title_acc_security\"\r\n              defaultMessage=\"Security\" description=\"Sidepanel title for AccSecurityView.\" />\r\n          </a>\r\n          <a href=\"#\" className=\"flat-button\" onClick={(e) => {e.preventDefault(); this.props.onBasicNavigate('support');}}>\r\n            <i className=\"material-icons\">contact_support</i>&nbsp;<FormattedMessage id=\"sidepanel_title_acc_support\"\r\n              defaultMessage=\"Support\" description=\"Sidepanel title for AccSupportView.\" />\r\n          </a>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n",
    "// InfoView: panel with topic/user info.\r\nimport React from 'react';\r\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\r\n\r\nimport Tinode from 'tinode-sdk';\r\n\r\nimport AvatarUpload from '../widgets/avatar-upload.jsx';\r\nimport CheckBox from '../widgets/checkbox.jsx';\r\nimport ContactList from '../widgets/contact-list.jsx';\r\nimport ErrorPanel from '../widgets/error-panel.jsx';\r\nimport GroupManager from '../widgets/group-manager.jsx';\r\nimport InPlaceEdit from '../widgets/in-place-edit.jsx';\r\nimport MenuCancel from '../widgets/menu-cancel.jsx';\r\nimport MoreButton from '../widgets/more-button.jsx';\r\nimport PermissionsEditor from '../widgets/permissions-editor.jsx';\r\nimport TagManager from '../widgets/tag-manager.jsx';\r\n\r\nimport { MAX_TITLE_LENGTH, NO_ACCESS_MODE } from '../config.js';\r\n\r\nimport { makeImageDataUrl } from '../lib/blob-helpers.js';\r\nimport { arrayEqual, theCard } from '../lib/utils.js';\r\n\r\nconst messages = defineMessages({\r\n  requested: {\r\n    id: 'requested_permissions',\r\n    defaultMessage: 'Requested',\r\n    description: 'Title for permissions'\r\n  },\r\n  granted: {\r\n    id: 'granted_permissions',\r\n    defaultMessage: 'Granted',\r\n    description: 'Title for permissions'\r\n  },\r\n  edit_permissions: {\r\n    id: 'menu_item_edit_permissions',\r\n    defaultMessage: 'Edit permissions',\r\n    description: 'Menu item [Edit permissions]'\r\n  },\r\n  other_user: {\r\n    id: 'label_other_user',\r\n    defaultMessage: 'Other',\r\n    description: 'Label for the other user when the user is unnamed'\r\n  },\r\n  clear_messages: {\r\n    id: 'action_clear_messages',\r\n    defaultMessage: 'Clear Messages',\r\n    description: 'Flat button [Clear Messages] (soft-delete messages)'\r\n  },\r\n  clear_messages_warning: {\r\n    id: 'clear_messages_warning',\r\n    defaultMessage: 'Are you sure you want to clear all messages? It cannot be undone.',\r\n    description: 'Alert dialog warning when deleting all messages.'\r\n  },\r\n  delete_messages: {\r\n    id: 'action_delete_messages',\r\n    defaultMessage: 'Clear Messages for All',\r\n    description: 'Flat button [Clear for All] (hard-delete all messages)'\r\n  },\r\n  delete_messages_warning: {\r\n    id: 'delete_messages_warning',\r\n    defaultMessage: 'Are you sure you want to delete all messages for everyone? It cannot be undone.',\r\n    description: 'Alert dialog warning when hard-deleting all messages.'\r\n  },\r\n  topic_delete: {\r\n    id: 'topic_delete',\r\n    defaultMessage: 'Delete Conversation',\r\n    description: 'Alert title when deleting the topic.'\r\n  },\r\n  topic_delete_warning: {\r\n    id: 'topic_delete_warning',\r\n    defaultMessage: 'Are you sure you want to delete this conversation? It cannot be undone.',\r\n    description: 'Alert warning when deleting entire topic'\r\n  },\r\n  leave_chat: {\r\n    id: 'action_leave_chat',\r\n    defaultMessage: 'Leave Conversation',\r\n    description: 'Flat button [Leave Conversation]'\r\n  },\r\n  leave_chat_warning: {\r\n    id: 'leave_chat_warning',\r\n    defaultMessage: 'Are you sure you want to leave this conversation?',\r\n    description: 'Alert dialog warning when unsubscribing from a chat.'\r\n  },\r\n  block_contact: {\r\n    id: 'action_block_contact',\r\n    defaultMessage: \"Block Contact\",\r\n    description: \"Flat button [Block Contact]\"\r\n  },\r\n  block_contact_warning: {\r\n    id: 'block_contact_warning',\r\n    defaultMessage: 'Are you sure you want to block this contact?',\r\n    description: 'Alert dialog warning when blocking a contact.'\r\n  },\r\n  report_chat: {\r\n    id: 'action_report_chat',\r\n    defaultMessage: 'Report Conversation',\r\n    description: 'Flat button [Report Group]'\r\n  },\r\n  report_chat_warning: {\r\n    id: 'report_chat_warning',\r\n    defaultMessage: 'Are you sure you want to block and report this conversation?',\r\n    description: 'Alert dialog warning when reporting a conversation for abuse'\r\n  },\r\n});\r\n\r\nclass InfoView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      topic: null,\r\n      owner: false,\r\n      admin: false,\r\n      sharer: false,\r\n      deleter: false,\r\n      muted: false,\r\n      address: null,\r\n      groupTopic: undefined,\r\n      channel: undefined,\r\n      fullName: undefined,\r\n      avatar: null,\r\n      private: null,\r\n      selectedContact: null,\r\n      access: null,\r\n      modeGiven: null,\r\n      modeWant: null,\r\n      modeGiven2: null, // P2P topic, the other user mode given\r\n      modeWant2: null,  // P2P topic, the other user mode want\r\n      auth: null,\r\n      anon: null,\r\n      contactList: [],\r\n      tags: [],\r\n      showMemberPanel: false,\r\n      showPermissionEditorFor: undefined,\r\n      moreInfoExpanded: false,\r\n      previousMetaDesc: undefined,\r\n      previousSubsUpdated: undefined,\r\n      previousTagsUpdated: undefined\r\n    };\r\n\r\n    this.resetSubs = this.resetSubs.bind(this);\r\n    this.resetDesc = this.resetDesc.bind(this);\r\n    this.onMetaDesc = this.onMetaDesc.bind(this);\r\n    this.onSubsUpdated = this.onSubsUpdated.bind(this);\r\n    this.onTagsUpdated = this.onTagsUpdated.bind(this);\r\n    this.handleFullNameUpdate = this.handleFullNameUpdate.bind(this);\r\n    this.handlePrivateUpdate = this.handlePrivateUpdate.bind(this);\r\n    this.handleImageChanged = this.handleImageChanged.bind(this);\r\n    this.handleMuted = this.handleMuted.bind(this);\r\n    this.handlePermissionsChanged = this.handlePermissionsChanged.bind(this);\r\n    this.handleLaunchPermissionsEditor = this.handleLaunchPermissionsEditor.bind(this);\r\n    this.handleHidePermissionsEditor = this.handleHidePermissionsEditor.bind(this);\r\n    this.handleShowAddMembers = this.handleShowAddMembers.bind(this);\r\n    this.handleHideAddMembers = this.handleHideAddMembers.bind(this);\r\n    this.handleMemberUpdateRequest = this.handleMemberUpdateRequest.bind(this);\r\n    this.handleDeleteTopic = this.handleDeleteTopic.bind(this);\r\n    this.handleDeleteMessages = this.handleDeleteMessages.bind(this);\r\n    this.handleLeave = this.handleLeave.bind(this);\r\n    this.handleBlock = this.handleBlock.bind(this);\r\n    this.handleReport = this.handleReport.bind(this);\r\n    this.handleMemberSelected = this.handleMemberSelected.bind(this);\r\n    this.handleMoreInfo = this.handleMoreInfo.bind(this);\r\n    this.handleTagsUpdated = this.handleTagsUpdated.bind(this);\r\n    this.handleContextMenu = this.handleContextMenu.bind(this);\r\n  }\r\n\r\n  // No need to separately handle component mount.\r\n  componentDidUpdate(props) {\r\n    const topic = this.props.tinode.getTopic(props.topic);\r\n    if (!topic) {\r\n      return;\r\n    }\r\n\r\n    if (this.onMetaDesc != topic.onMetaDesc) {\r\n      this.previousMetaDesc = topic.onMetaDesc;\r\n      topic.onMetaDesc = this.onMetaDesc;\r\n\r\n      this.previousSubsUpdated = topic.onSubsUpdated;\r\n      topic.onSubsUpdated = this.onSubsUpdated;\r\n\r\n      if (topic.getType() == 'grp') {\r\n        this.previousTagsUpdated = topic.onTagsUpdated;\r\n        topic.onTagsUpdated = this.onTagsUpdated;\r\n      } else {\r\n        this.previousTagsUpdated = undefined;\r\n      }\r\n    }\r\n\r\n    if (this.state.topic != props.topic) {\r\n      this.setState({topic: props.topic});\r\n      this.resetDesc(topic, props);\r\n      this.resetSubs(topic, props);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const topic = this.props.tinode.getTopic(this.props.topic);\r\n    if (!topic) {\r\n      return;\r\n    }\r\n    this.setState({topic: null});\r\n    topic.onMetaDesc = this.previousMetaDesc;\r\n    topic.onSubsUpdated = this.previousSubsUpdated;\r\n    topic.onTagsUpdated = this.previousTagsUpdated;\r\n  }\r\n\r\n  resetSubs(topic, props) {\r\n    const newState = {contactList: []};\r\n    if (topic.getType() == 'p2p') {\r\n      // Fetch the other party in the p2p conversation.\r\n      // Topic may not be ready yet, so check if user is found.\r\n      const user2 = topic.subscriber(props.topic);\r\n      if (user2) {\r\n        newState.modeGiven2 = user2.acs.getGiven();\r\n        newState.modeWant2 = user2.acs.getWant();\r\n      } else {\r\n        newState.modeGiven2 = NO_ACCESS_MODE;\r\n        newState.modeWant2 = NO_ACCESS_MODE;\r\n      }\r\n    } else {\r\n      topic.subscribers((sub) => {\r\n        newState.contactList.push(sub);\r\n      }, this);\r\n    }\r\n\r\n    this.setState(newState);\r\n  }\r\n\r\n  resetDesc(topic, props) {\r\n    const defacs = topic.getDefaultAccess() || {};\r\n    const acs = topic.getAccessMode();\r\n\r\n    this.setState({\r\n      owner: acs && acs.isOwner(),\r\n      admin: acs && acs.isAdmin(),\r\n      sharer: acs && acs.isSharer(),\r\n      deleter: acs && acs.isDeleter(),\r\n      muted: acs && acs.isMuted(),\r\n\r\n      fullName: topic.public ? topic.public.fn : undefined,\r\n      avatar: makeImageDataUrl(topic.public ? topic.public.photo : null),\r\n      private: topic.private ? topic.private.comment : null,\r\n      address: topic.name,\r\n      groupTopic: topic.isGroupType(),\r\n      channel: topic.isChannelType(),\r\n      showMemberPanel: false,\r\n      access: acs ? acs.getMode() : undefined,\r\n      modeGiven: acs ? acs.getGiven() : undefined,\r\n      modeWant: acs ? acs.getWant() : undefined,\r\n      auth: defacs.auth,\r\n      anon: defacs.anon\r\n    });\r\n\r\n    if (topic.getType() == 'grp' && acs && acs.isOwner()) {\r\n      // Requesting tags: owner is editing the topic.\r\n      topic.getMeta(topic.startMetaQuery().withTags().build());\r\n    }\r\n  }\r\n\r\n  onMetaDesc(desc) {\r\n    const topic = this.props.tinode.getTopic(this.props.topic);\r\n    if (!topic) {\r\n      return;\r\n    }\r\n    this.resetDesc(topic, this.props);\r\n\r\n    if (this.previousMetaDesc && this.previousMetaDesc != this.onMetaDesc) {\r\n      this.previousMetaDesc(desc);\r\n    }\r\n  }\r\n\r\n  onSubsUpdated(subs) {\r\n    const topic = this.props.tinode.getTopic(this.props.topic);\r\n    if (!topic) {\r\n      return;\r\n    }\r\n    this.resetSubs(topic, this.props);\r\n\r\n    if (this.previousSubsUpdated && this.previousSubsUpdated != this.onSubsUpdated) {\r\n      this.previousSubsUpdated(subs);\r\n    }\r\n  }\r\n\r\n  onTagsUpdated(tags) {\r\n    this.setState({tags: tags});\r\n\r\n    if (this.previousTagsUpdated && this.previousTagsUpdated != this.onTagsUpdated) {\r\n      this.previousTagsUpdated();\r\n    }\r\n  }\r\n\r\n  handleFullNameUpdate(fn) {\r\n    fn = fn.trim().substring(0, MAX_TITLE_LENGTH);\r\n    if (this.state.fullName !== fn) {\r\n      this.setState({fullName: fn});\r\n      this.props.onTopicDescUpdate(this.props.topic, theCard(fn, null), null);\r\n    }\r\n  }\r\n\r\n  handlePrivateUpdate(comment) {\r\n    comment = comment.trim().substring(0, MAX_TITLE_LENGTH);\r\n    if (this.state.private !== comment) {\r\n      this.setState({private: comment});\r\n      this.props.onTopicDescUpdate(this.props.topic, null, comment || Tinode.DEL_CHAR);\r\n    }\r\n  }\r\n\r\n  handleImageChanged(img) {\r\n    this.setState({avatar: img});\r\n    this.props.onTopicDescUpdate(this.props.topic, theCard(null, img || Tinode.DEL_CHAR), null);\r\n  }\r\n\r\n  handleMuted(ignored, checked) {\r\n    this.setState({muted: checked});\r\n    this.props.onChangePermissions(this.props.topic, checked ? '-P' : '+P');\r\n  }\r\n\r\n  handlePermissionsChanged(perm) {\r\n    switch (this.state.showPermissionEditorFor) {\r\n      case 'auth':\r\n        this.props.onTopicDescUpdate(this.props.topic, null, null, {auth: perm});\r\n        break;\r\n      case 'anon':\r\n        this.props.onTopicDescUpdate(this.props.topic, null, null, {anon: perm});\r\n        break;\r\n      case 'mode':\r\n      case 'want':\r\n        this.props.onChangePermissions(this.props.topic, perm);\r\n        break;\r\n      case 'given':\r\n        this.props.onChangePermissions(this.props.topic, perm, this.props.topic);\r\n        break;\r\n      case 'user':\r\n        this.props.onChangePermissions(this.props.topic, perm, this.state.userPermissionsEdited);\r\n        break;\r\n    }\r\n\r\n    this.setState({showPermissionEditorFor: undefined});\r\n  }\r\n\r\n  handleLaunchPermissionsEditor(which, uid) {\r\n    const {formatMessage} = this.props.intl;\r\n    let toEdit, toCompare, toSkip, titleEdit, titleCompare, userTitle, userAvatar;\r\n    switch (which) {\r\n      case 'mode':\r\n        toEdit = this.state.access;\r\n        break;\r\n      case 'want':\r\n        toEdit = this.state.modeWant;\r\n        toCompare = this.state.modeGiven;\r\n        if (this.state.owner) {\r\n          // Don't allow owner to unset 'O' permission. All other permissions are OK.\r\n          toSkip = 'O';\r\n        } else {\r\n          // Allow accepting any of 'ASDO' permissions but don't allow asking for them.\r\n          toSkip = Tinode.AccessMode.encode(Tinode.AccessMode.diff('ASDO', this.state.modeGiven));\r\n          if (this.state.channel) {\r\n            // Channels are read-only.\r\n            toSkip += 'W';\r\n          }\r\n        }\r\n        titleEdit = formatMessage(messages.requested);\r\n        titleCompare = formatMessage(messages.granted);\r\n        break;\r\n      case 'given':\r\n        toEdit = this.state.modeGiven2;\r\n        toCompare = this.state.modeWant2;\r\n        toSkip = this.state.groupTopic ? (this.state.owner ? '' : 'O') : 'ASDO';\r\n        titleEdit = formatMessage(messages.granted);\r\n        titleCompare = formatMessage(messages.requested);\r\n        break;\r\n      case 'auth':\r\n        toEdit = this.state.auth;\r\n        toSkip = 'O';\r\n        break;\r\n      case 'anon':\r\n        toEdit = this.state.anon;\r\n        toSkip = 'O';\r\n        break;\r\n      case 'user': {\r\n        const topic = this.props.tinode.getTopic(this.props.topic);\r\n        if (!topic) {\r\n          return;\r\n        }\r\n        const user = topic.subscriber(uid);\r\n        if (!user || !user.acs) {\r\n          return;\r\n        }\r\n        toEdit = user.acs.getGiven();\r\n        toCompare = user.acs.getWant();\r\n        toSkip = this.state.owner ? '' : 'O';\r\n        titleEdit = formatMessage(messages.granted);\r\n        titleCompare = formatMessage(messages.requested);\r\n        if (user.public) {\r\n          userTitle = user.public.fn;\r\n          userAvatar = user.public.photo;\r\n        }\r\n        break;\r\n      }\r\n      default:\r\n        console.log(\"Unknown permission editing mode '\" + which + \"'\");\r\n        break;\r\n    }\r\n    this.setState({\r\n      showPermissionEditorFor: which,\r\n      userPermissionsEdited: uid,\r\n      userPermissionsTitle: userTitle,\r\n      userPermissionsAvatar: userAvatar,\r\n      editedPermissions: toEdit,\r\n      immutablePermissions: toCompare,\r\n      editedPermissionsTitle: titleEdit,\r\n      immutablePermissionsTitle: titleCompare,\r\n      editedPermissionsSkipped: toSkip,\r\n    });\r\n  }\r\n\r\n  handleHidePermissionsEditor() {\r\n    this.setState({showPermissionEditorFor: undefined});\r\n  }\r\n\r\n  handleShowAddMembers(e) {\r\n    e.preventDefault();\r\n    this.props.onInitFind();\r\n    this.setState({showMemberPanel: true});\r\n  }\r\n\r\n  handleHideAddMembers() {\r\n    this.setState({showMemberPanel: false});\r\n  }\r\n\r\n  handleMemberUpdateRequest(members, added, removed) {\r\n    this.props.onMemberUpdateRequest(this.props.topic, added, removed);\r\n    this.setState({showMemberPanel: false});\r\n  }\r\n\r\n  handleDeleteTopic(e) {\r\n    e.preventDefault();\r\n    const {formatMessage} = this.props.intl;\r\n    this.props.onShowAlert(\r\n      formatMessage(messages.topic_delete), // title\r\n      formatMessage(messages.topic_delete_warning), // content\r\n      (() => { this.props.onDeleteTopic(this.props.topic); }), // onConfirm\r\n      null, // \"OK\"\r\n      true, // Show Reject button\r\n      null  // \"Cancel\"\r\n    );\r\n  }\r\n\r\n  handleDeleteMessages(e) {\r\n    e.preventDefault();\r\n    const {formatMessage} = this.props.intl;\r\n    this.props.onShowAlert(\r\n      formatMessage(this.state.deleter ? messages.delete_messages : messages.clear_messages), // title\r\n      formatMessage(this.state.deleter ? messages.delete_messages_warning : messages.clear_messages_warning), // content\r\n      (() => { this.props.onDeleteMessages(this.props.topic); }), // onConfirm\r\n      null, // \"OK\"\r\n      true, // Show Reject button\r\n      null  // \"Cancel\"\r\n    );\r\n  }\r\n\r\n  handleLeave(e) {\r\n    e.preventDefault();\r\n    const {formatMessage} = this.props.intl;\r\n    this.props.onShowAlert(\r\n      formatMessage(messages.leave_chat), // title\r\n      formatMessage(messages.leave_chat_warning), // content\r\n      (() => { this.props.onLeaveTopic(this.props.topic); }), // onConfirm\r\n      null, // \"OK\"\r\n      true, // Show Reject button\r\n      null  // \"Cancel\"\r\n    );\r\n  }\r\n\r\n  handleBlock(e) {\r\n    e.preventDefault();\r\n    const {formatMessage} = this.props.intl;\r\n    this.props.onShowAlert(\r\n      formatMessage(messages.block_contact), // title\r\n      formatMessage(messages.block_contact_warning), // content\r\n      (() => { this.props.onBlockTopic(this.props.topic); }), // onConfirm\r\n      null, // \"OK\"\r\n      true, // Show Reject button\r\n      null  // \"Cancel\"\r\n    );\r\n  }\r\n\r\n  handleReport(e) {\r\n    e.preventDefault();\r\n    const {formatMessage} = this.props.intl;\r\n    this.props.onShowAlert(\r\n      formatMessage(messages.report_chat), // title\r\n      formatMessage(messages.report_chat_warning), // content\r\n      (() => { this.props.onReportTopic(this.props.topic); }), // onConfirm\r\n      null, // \"OK\"\r\n      true, // Show Reject button\r\n      null  // \"Cancel\"\r\n    );\r\n  }\r\n\r\n  handleMemberSelected(uid) {\r\n    this.setState({selectedContact: uid});\r\n  }\r\n\r\n  handleMoreInfo(open) {\r\n    this.setState({moreInfoExpanded: open});\r\n  }\r\n\r\n  handleTagsUpdated(tags) {\r\n    if (!arrayEqual(this.state.tags.slice(0), tags.slice(0))) {\r\n      this.props.onTopicTagsUpdate(this.props.topic, tags);\r\n    }\r\n  }\r\n\r\n  handleContextMenu(params) {\r\n    const {formatMessage} = this.props.intl;\r\n    const instance = this;\r\n    const topic = this.props.tinode.getTopic(this.props.topic);\r\n    if (!topic) {\r\n      return;\r\n    }\r\n    const user = topic.subscriber(params.topicName);\r\n    if (!user || !user.acs) {\r\n      return;\r\n    }\r\n\r\n    const menuItems = [\r\n      {title: formatMessage(messages.edit_permissions), handler: function() {\r\n        instance.handleLaunchPermissionsEditor('user', params.topicName);\r\n      }},\r\n      'member_delete',\r\n      user.acs.isMuted() ? 'member_unmute' : 'member_mute',\r\n      user.acs.isJoiner() ? 'member_block' : 'member_unblock'\r\n    ];\r\n    this.props.showContextMenu({\r\n      topicName: this.props.topic,\r\n      x: params.x,\r\n      y: params.y,\r\n      user: params.topicName}, menuItems);\r\n  }\r\n\r\n  render() {\r\n    const {formatMessage} = this.props.intl;\r\n\r\n    return (\r\n      <div id=\"info-view\">\r\n        <div className=\"caption-panel\" id=\"info-caption-panel\">\r\n          <div className=\"panel-title\" id=\"info-title\">\r\n            <FormattedMessage id=\"title_info\" defaultMessage=\"Info\" description=\"Title for InfoView\" />\r\n          </div>\r\n          <div>\r\n            <MenuCancel onCancel={this.props.onCancel} />\r\n          </div>\r\n        </div>\r\n        {this.props.displayMobile ?\r\n          <ErrorPanel\r\n            level={this.props.errorLevel}\r\n            text={this.props.errorText}\r\n            onClearError={this.props.onError} /> : null}\r\n        {this.state.showMemberPanel ?\r\n          <GroupManager\r\n            members={this.state.contactList}\r\n            requiredMember={this.props.myUserId}\r\n            keepInitialMembers={!this.state.admin && !this.state.owner}\r\n            myUserId={this.props.myUserId}\r\n            contacts={this.props.searchableContacts}\r\n            onCancel={this.handleHideAddMembers}\r\n            onSubmit={this.handleMemberUpdateRequest} />\r\n          :\r\n        this.state.showPermissionEditorFor ?\r\n          <PermissionsEditor\r\n            mode={this.state.editedPermissions}\r\n            compare={this.state.immutablePermissions}\r\n            skip={this.state.editedPermissionsSkipped}\r\n            modeTitle={this.state.editedPermissionsTitle}\r\n            compareTitle={this.state.immutablePermissionsTitle}\r\n            userTitle={this.state.userPermissionsTitle}\r\n            item={this.state.userPermissionsEdited}\r\n            userAvatar={this.state.userPermissionsAvatar}\r\n            onSubmit={this.handlePermissionsChanged}\r\n            onCancel={this.handleHidePermissionsEditor}\r\n            />\r\n          :\r\n          <div id=\"info-view-content\" className=\"scrollable-panel\">\r\n            <div className=\"panel-form-row\">\r\n              <div className=\"panel-form-column\">\r\n                <div><label className=\"small\">\r\n                  <FormattedMessage id=\"label_topic_name\" defaultMessage=\"Name\"\r\n                    description=\"Label for editing topic name\" />\r\n                </label></div>\r\n                <div><InPlaceEdit\r\n                    placeholder={this.state.groupTopic ? \"Group name\" : <i>Unknown</i>}\r\n                    readOnly={!this.state.owner}\r\n                    value={this.state.fullName}\r\n                    required={true}\r\n                    onFinished={this.handleFullNameUpdate} /></div>\r\n                <div>\r\n                  <label className=\"small\">\r\n                    <FormattedMessage id=\"label_private\" defaultMessage=\"Private comment\"\r\n                      description=\"Label for editing 'private'\" />\r\n                  </label>\r\n                </div>\r\n                <div>\r\n                  <FormattedMessage id=\"private_editing_placeholder\"\r\n                    defaultMessage=\"Visible to you only\"\r\n                    description=\"Placeholder for editing 'private'\">{\r\n                    (private_placeholder) => <InPlaceEdit\r\n                      placeholder={private_placeholder}\r\n                      value={this.state.private}\r\n                      onFinished={this.handlePrivateUpdate} />\r\n                  }</FormattedMessage>\r\n                </div>\r\n              </div>\r\n              <AvatarUpload\r\n                avatar={this.state.avatar}\r\n                readOnly={!this.state.owner}\r\n                uid={this.props.topic}\r\n                title={this.state.fullName}\r\n                onImageChanged={this.handleImageChanged}\r\n                onError={this.props.onError} />\r\n            </div>\r\n            <div className=\"hr\" />\r\n            <div className=\"panel-form-column\">\r\n              <div className=\"panel-form-row\">\r\n                <label>\r\n                  <FormattedMessage id=\"label_muting_topic\" defaultMessage=\"Muted:\"\r\n                    description=\"Label for Muting/unmuting the topic\" />\r\n                </label>\r\n                <CheckBox name=\"P\" checked={this.state.muted}\r\n                  onChange={this.handleMuted} />\r\n              </div>\r\n              <FormattedMessage id=\"action_more\" defaultMessage=\"More\"\r\n                description=\"Action for showing more content\">{\r\n                (more) => <MoreButton\r\n                  title={more}\r\n                  open={this.state.moreInfoExpanded}\r\n                  onToggle={this.handleMoreInfo} />\r\n              }</FormattedMessage>\r\n              {this.state.moreInfoExpanded ?\r\n                <div className=\"panel-form-column\">\r\n                  <div className=\"panel-form-row\">\r\n                    <label><FormattedMessage id=\"label_user_id\" defaultMessage=\"ID:\"\r\n                      description=\"Label for user address (ID)\" /></label>\r\n                    <tt>{this.state.address}</tt>\r\n                  </div>\r\n                  {this.state.groupTopic ?\r\n                    <div className=\"panel-form-row\">\r\n                      <label>\r\n                        <FormattedMessage id=\"label_your_permissions\" defaultMessage=\"Your permissions:\"\r\n                          description=\"Label for current user permissions\" />\r\n                      </label>\r\n                      <tt className=\"clickable\"\r\n                        onClick={this.handleLaunchPermissionsEditor.bind(this, 'want')}>\r\n                        {this.state.access}\r\n                      </tt>\r\n                    </div>\r\n                    :\r\n                    <div>\r\n                      <div>\r\n                        <label className=\"small\">\r\n                          <FormattedMessage id=\"label_permissions\" defaultMessage=\"Permissions:\"\r\n                            description=\"Section title\" />\r\n                        </label>\r\n                      </div>\r\n                      <div className=\"quoted\">\r\n                        <div>\r\n                          <FormattedMessage id=\"label_you\" defaultMessage=\"You:\"\r\n                            description=\"Label for the current user\" /> &nbsp;<tt className=\"clickable\"\r\n                          onClick={this.handleLaunchPermissionsEditor.bind(this, 'want')}>\r\n                          {this.state.access}\r\n                        </tt></div>\r\n                        <div>{this.state.fullName ? this.state.fullName : formatMessage(messages.other_user)}:\r\n                          &nbsp;<tt className=\"clickable\" onClick={this.handleLaunchPermissionsEditor.bind(this, 'given')}>\r\n                          {this.state.modeGiven2}\r\n                          </tt>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  }\r\n                  {this.state.sharer && (this.state.auth || this.state.anon) ?\r\n                  <div>\r\n                    <div>\r\n                      <label className=\"small\">\r\n                        <FormattedMessage id=\"label_default_access\" defaultMessage=\"Default access mode:\"\r\n                          description=\"Section title\" />\r\n                      </label>\r\n                    </div>\r\n                    <div className=\"quoted\">\r\n                      <div>Auth: {this.state.admin ?\r\n                        <tt className=\"clickable\"\r\n                          onClick={this.handleLaunchPermissionsEditor.bind(this, 'auth')}>\r\n                          {this.state.auth}\r\n                        </tt>\r\n                        :\r\n                        <tt>{this.state.auth}</tt>\r\n                      }\r\n                      </div>\r\n                      <div>Anon: {this.state.admin ?\r\n                        <tt className=\"clickable\"\r\n                          onClick={this.handleLaunchPermissionsEditor.bind(this, 'anon')}>\r\n                          {this.state.anon}\r\n                        </tt>\r\n                        :\r\n                        <tt>{this.state.anon}</tt>\r\n                      }\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  :\r\n                  null\r\n                }\r\n                </div>\r\n              :\r\n              null\r\n              }\r\n            </div>\r\n            <div className=\"hr\" />\r\n            {this.state.owner ?\r\n              <>\r\n                <FormattedMessage id=\"title_tag_manager\" defaultMessage=\"Tags (user discovery)\"\r\n                  description=\"Section title for TagManager\">{\r\n                  (tags) => <TagManager\r\n                    title={tags}\r\n                    tags={this.state.tags}\r\n                    activated={false}\r\n                    tinode={this.props.tinode}\r\n                    onSubmit={this.handleTagsUpdated} />\r\n                }</FormattedMessage>\r\n                <div className=\"hr\" />\r\n              </>\r\n              :\r\n              null\r\n            }\r\n            <div className=\"panel-form-column\">\r\n              {!this.state.channel ?\r\n                <a href=\"#\" className=\"flat-button\" onClick={this.handleDeleteMessages}>\r\n                  <i className=\"material-icons\">delete_outline</i> &nbsp;{\r\n                    formatMessage(this.state.deleter ? messages.delete_messages : messages.clear_messages)\r\n                  }\r\n                </a>\r\n                :\r\n                null\r\n              }\r\n              {this.state.owner ?\r\n                <a href=\"#\" className=\"danger flat-button\" onClick={this.handleDeleteTopic}>\r\n                  <i className=\"material-icons\">delete</i> &nbsp;{formatMessage(messages.topic_delete)}\r\n                </a>\r\n                :\r\n                <a href=\"#\" className=\"danger flat-button\" onClick={this.handleLeave}>\r\n                  <i className=\"material-icons\">exit_to_app</i> &nbsp;{formatMessage(messages.leave_chat)}\r\n                </a>\r\n              }\r\n              {!this.state.groupTopic ?\r\n                <a href=\"#\" className=\"danger flat-button\" onClick={this.handleBlock}>\r\n                  <i className=\"material-icons\">block</i> &nbsp;{formatMessage(messages.block_contact)}\r\n                </a>\r\n                :\r\n                null\r\n              }\r\n              {!this.state.owner ?\r\n                <a href=\"#\" className=\"danger flat-button\" onClick={this.handleReport}>\r\n                  <i className=\"material-icons\">report</i> &nbsp;{formatMessage(messages.report_chat)}\r\n                </a>\r\n                :\r\n                null\r\n              }\r\n            </div>\r\n            {this.state.groupTopic && this.state.sharer ?\r\n              <>\r\n                <div className=\"hr\" />\r\n                <div className=\"panel-form-column\">\r\n                  <div className=\"panel-form-row\">\r\n                    <label className=\"small\">\r\n                      <FormattedMessage id=\"label_group_members\" defaultMessage=\"Group members:\"\r\n                        description=\"Section title or label\" />\r\n                    </label>\r\n                  </div>\r\n                  <div className=\"panel-form-row\">\r\n                    <a href=\"#\" className=\"flat-button\" onClick={this.handleShowAddMembers}>\r\n                      <i className=\"material-icons\">person_add</i> &nbsp;<FormattedMessage id=\"button_add_members\"\r\n                        defaultMessage=\"Add members\" description=\"Flat button [Add members] (to topic)\" />\r\n                    </a>\r\n                  </div>\r\n                  <FormattedMessage id=\"group_has_no_members\" defaultMessage=\"No members\"\r\n                    description=\"Shown in place of group members\">{\r\n                    (no_members) => <ContactList\r\n                      contacts={this.state.contactList}\r\n                      myUserId={this.props.myUserId}\r\n                      emptyListMessage={no_members}\r\n                      topicSelected={this.state.selectedContact}\r\n                      showOnline={false}\r\n                      showUnread={false}\r\n                      showMode={true}\r\n                      noScroll={true}\r\n                      onTopicSelected={this.handleMemberSelected}\r\n                      showContextMenu={this.state.admin ? this.handleContextMenu : false}\r\n                    />\r\n                  }</FormattedMessage>\r\n                </div>\r\n              </>\r\n              :\r\n              null\r\n            }\r\n          </div>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default injectIntl(InfoView);\r\n",
    "// Login form.\r\nimport React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport CheckBox from '../widgets/checkbox.jsx';\r\nimport VisiblePassword from '../widgets/visible-password.jsx';\r\n\r\nimport LocalStorageUtil from '../lib/local-storage.js';\r\n\r\nexport default class LoginView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      login: props.login,\r\n      password: '',\r\n      token: null,\r\n      id_device: null,\r\n      hostName: props.serverAddress,\r\n      saveToken: props.persist\r\n    };\r\n    this.handleLoginChange = this.handleLoginChange.bind(this);\r\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\r\n    this.handleTokenChange = this.handleTokenChange.bind(this);\r\n    this.handleIdDeviceChange = this.handleIdDeviceChange.bind(this);\r\n    this.handleToggleSaveToken = this.handleToggleSaveToken.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleLoginChange(e) {\r\n    console.log('user on change: ', e.target.value)\r\n    this.setState({login: e.target.value});\r\n  }\r\n\r\n  handlePasswordChange(e) {\r\n    this.setState({password: e.target.value});\r\n  }\r\n\r\n  handleTokenChange(e) {\r\n    console.log('token on change: ', e.target.value)\r\n    this.setState({token: e.target.value});\r\n    localStorage.setItem(\"access_token\", e.target.value);\r\n  }\r\n\r\n  handleIdDeviceChange(e) {\r\n    console.log('id_device on change: ', e.target.value)\r\n    this.setState({id_device: e.target.value});\r\n    localStorage.setItem(\"id_device\", e.target.value);\r\n  }\r\n\r\n  handleToggleSaveToken() {\r\n    this.props.onPersistenceChange(!this.state.saveToken);\r\n    this.setState({saveToken: !this.state.saveToken});\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    e.preventDefault();\r\n    this.props.onLogin(this.state.login.trim(), this.state.password.trim(), this.state.token.trim(), this.state.id_device.trim());\r\n  }\r\n\r\n  render() {\r\n    let submitClasses = 'primary';\r\n    if (this.props.disabled) {\r\n      submitClasses += ' disabled';\r\n    }\r\n\r\n    return (\r\n      <form id=\"login-form\" onSubmit={this.handleSubmit}>\r\n        <FormattedMessage id=\"login_prompt\" defaultMessage=\"Login\"\r\n          description=\"Placeholer for username/login\">\r\n        {\r\n          (login_prompt) => <input type=\"text\" id=\"inputLogin\"\r\n            placeholder={login_prompt}\r\n            autoComplete=\"username\"\r\n            autoCorrect=\"off\"\r\n            autoCapitalize=\"none\"\r\n            value={this.state.login}\r\n            onChange={this.handleLoginChange}\r\n            required autoFocus />\r\n        }\r\n        </FormattedMessage>\r\n        <FormattedMessage id=\"password_prompt\" defaultMessage=\"Password\"\r\n          description=\"Placeholder/prompt for entering password\">\r\n        {\r\n          (password_prompt) => <VisiblePassword type=\"password\" id=\"inputPassword\"\r\n            placeholder={password_prompt}\r\n            autoComplete=\"current-password\"\r\n            value={this.state.password}\r\n            onChange={this.handlePasswordChange}\r\n            required={true} />\r\n        }\r\n        </FormattedMessage>\r\n\r\n\r\n        <FormattedMessage id=\"token_prompt\" defaultMessage=\"Token\"\r\n          description=\"Placeholer for token\">\r\n        {\r\n          (token_prompt) => <input type=\"text\" id=\"inputToken\"\r\n            placeholder={token_prompt}\r\n            autoComplete=\"token\"\r\n            autoCorrect=\"off\"\r\n            autoCapitalize=\"none\"\r\n            value={this.state.token}\r\n            onChange={this.handleTokenChange}\r\n            required autoFocus />\r\n        }\r\n        </FormattedMessage>\r\n        <FormattedMessage id=\"id_device_prompt\" defaultMessage=\"ID Device\"\r\n          description=\"Placeholer for id_device\">\r\n        {\r\n          (id_device_prompt) => <input type=\"text\" id=\"inputIdDevice\"\r\n            placeholder={id_device_prompt}\r\n            autoComplete=\"id_device\"\r\n            autoCorrect=\"off\"\r\n            autoCapitalize=\"none\"\r\n            value={this.state.id_device}\r\n            onChange={this.handleIdDeviceChange}\r\n            required autoFocus />\r\n        }\r\n        </FormattedMessage>\r\n\r\n\r\n        <div className=\"panel-form-row\">\r\n          <CheckBox id=\"save-token\" name=\"save-token\" checked={this.state.saveToken}\r\n            onChange={this.handleToggleSaveToken} />\r\n          <label htmlFor=\"save-token\">&nbsp;\r\n            <FormattedMessage id=\"stay_logged_in\" defaultMessage=\"Stay logged in\"\r\n              description=\"Label for a checkbox\" />\r\n          </label>\r\n          <a href=\"#reset\">\r\n            <FormattedMessage id=\"forgot_password_link\" defaultMessage=\"Forgot password?\"\r\n              description=\"Link to Reset password form\" />\r\n          </a>\r\n        </div>\r\n        <div className=\"dialog-buttons\">\r\n          <button className={submitClasses} type=\"submit\">\r\n            <FormattedMessage id=\"button_sign_in\" defaultMessage=\"Sign in\"\r\n              description=\"Button [Sign In]\" />\r\n          </button>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n};\r\n/* END Login */\r\n",
    "/* This is just a static page to display when no conversation is selected. */\r\nimport React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport Tinode from 'tinode-sdk';\r\n\r\nimport { APP_NAME } from '../config.js';\r\n\r\nexport default class LogoView extends React.PureComponent {\r\n  render() {\r\n    const version = APP_NAME + ' (' + Tinode.getLibrary() + ')';\r\n    return (\r\n      <div id=\"dummy-view\">\r\n        <div>\r\n          <a href=\"https://github.com/tinode/chat/\">\r\n            <img id=\"logo\" alt=\"logo\" src=\"img/logo.svg\" />\r\n            <h2>Tinode Web</h2>\r\n          </a>\r\n          <p><FormattedMessage id=\"label_client\" defaultMessage=\"Client:\" \r\n            description=\"Label for a client version\" /> {version}</p>\r\n          <p><FormattedMessage id=\"label_server\" defaultMessage=\"Server:\"\r\n            description=\"Label for a server version\" /> {this.props.serverVersion} ({this.props.serverAddress})</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n",
    "import React from 'react';\r\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\r\n\r\nimport Tinode from 'tinode-sdk';\r\nconst Drafty = Tinode.Drafty;\r\n\r\nimport ChatMessage from '../widgets/chat-message.jsx';\r\nimport DocPreview from '../widgets/doc-preview.jsx';\r\nimport ErrorPanel from '../widgets/error-panel.jsx';\r\nimport GroupSubs from '../widgets/group-subs.jsx';\r\nimport ImagePreview from '../widgets/image-preview.jsx';\r\nimport Invitation from '../widgets/invitation.jsx';\r\nimport LetterTile from '../widgets/letter-tile.jsx';\r\nimport LoadSpinner from '../widgets/load-spinner.jsx';\r\nimport LogoView from './logo-view.jsx';\r\nimport SendMessage from '../widgets/send-message.jsx';\r\n\r\nimport { DEFAULT_P2P_ACCESS_MODE, IMAGE_PREVIEW_DIM, KEYPRESS_DELAY, MESSAGES_PAGE,\r\n  MAX_EXTERN_ATTACHMENT_SIZE, MAX_IMAGE_DIM, MAX_INBAND_ATTACHMENT_SIZE, READ_DELAY } from '../config.js';\r\nimport { SUPPORTED_IMAGE_FORMATS, blobToBase64, filePasted, fileToBase64,\r\n  imageScaled, makeImageDataUrl } from '../lib/blob-helpers.js';\r\nimport HashNavigation from '../lib/navigation.js';\r\nimport { bytesToHumanSize, shortDateFormat } from '../lib/strformat.js';\r\n\r\n// Run timer with this frequency (ms) for checking notification queue.\r\nconst NOTIFICATION_EXEC_INTERVAL = 300;\r\n\r\nconst messages = defineMessages({\r\n  online_now: {\r\n    id: 'online_now',\r\n    defaultMessage: 'online now',\r\n    description: 'Indicator that the user or topic is currently online',\r\n  },\r\n  last_seen: {\r\n    id: 'last_seen_timestamp',\r\n    defaultMessage: 'Last seen',\r\n    description: 'Label for the timestamp of when the user or topic was last online'\r\n  },\r\n  not_found: {\r\n    id: 'title_not_found',\r\n    defaultMessage: 'Not found',\r\n    description: 'Title shown when topic is not found'\r\n  },\r\n  channel: {\r\n    id: 'channel',\r\n    defaultMessage: 'channel',\r\n    description: 'Subtitle shown for channels in MessagesView instead of last seen'\r\n  },\r\n  file_attachment_too_large: {\r\n    id: 'file_attachment_too_large',\r\n    defaultMessage: 'The file size {size} exceeds the {limit} limit.',\r\n    description: 'Error message when attachment is too large'\r\n  }\r\n});\r\n\r\n// Checks if the access permissions are granted but not yet accepted.\r\nfunction isUnconfirmed(acs) {\r\n  if (acs) {\r\n    const ex = acs.getExcessive() || '';\r\n    return acs.isJoiner('given') && (ex.includes('R') || ex.includes('W'));\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction isPeerRestricted(acs) {\r\n  if (acs) {\r\n    const ms = acs.getMissing() || '';\r\n    return acs.isJoiner('want') && (ms.includes('R') || ms.includes('W'));\r\n  }\r\n  return false;\r\n}\r\n\r\nclass MessagesView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = MessagesView.getDerivedStateFromProps(props, {});\r\n\r\n    this.leave = this.leave.bind(this);\r\n    this.sendImageAttachment = this.sendImageAttachment.bind(this);\r\n    this.sendFileAttachment = this.sendFileAttachment.bind(this);\r\n    this.sendKeyPress = this.sendKeyPress.bind(this);\r\n    this.handleScrollReference = this.handleScrollReference.bind(this);\r\n    this.handleScrollEvent = this.handleScrollEvent.bind(this);\r\n    this.handleDescChange = this.handleDescChange.bind(this);\r\n    this.handleSubsUpdated = this.handleSubsUpdated.bind(this);\r\n    this.handleMessageUpdate = this.handleMessageUpdate.bind(this);\r\n    this.handleAllMessagesReceived = this.handleAllMessagesReceived.bind(this);\r\n    this.handleInfoReceipt = this.handleInfoReceipt.bind(this);\r\n    this.handleImagePostview = this.handleImagePostview.bind(this);\r\n    this.handleClosePreview = this.handleClosePreview.bind(this);\r\n    this.handleFormResponse = this.handleFormResponse.bind(this);\r\n    this.handleContextClick = this.handleContextClick.bind(this);\r\n    this.handleShowContextMenuMessage = this.handleShowContextMenuMessage.bind(this);\r\n    this.handleNewChatAcceptance = this.handleNewChatAcceptance.bind(this);\r\n    this.handleEnablePeer = this.handleEnablePeer.bind(this);\r\n    this.handleAttachFile = this.handleAttachFile.bind(this);\r\n    this.handleAttachImage = this.handleAttachImage.bind(this);\r\n    this.handleCancelUpload = this.handleCancelUpload.bind(this);\r\n    this.postReadNotification = this.postReadNotification.bind(this);\r\n    this.clearNotificationQueue = this.clearNotificationQueue.bind(this);\r\n\r\n    this.readNotificationQueue = [];\r\n    this.readNotificationTimer = null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    // this.propsChange(this.props, this.state);\r\n    if (this.messagesScroller) {\r\n      this.messagesScroller.addEventListener('scroll', this.handleScrollEvent);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.messagesScroller) {\r\n      this.messagesScroller.removeEventListener('scroll', this.handleScrollEvent);\r\n    }\r\n\r\n    // Flush all notifications.\r\n    this.clearNotificationQueue();\r\n  }\r\n\r\n  // Scroll last message into view on component update e.g. on message received\r\n  // or vertical shrinking.\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.messagesScroller) {\r\n      if (prevState.topic != this.state.topic || prevState.messageCount != this.state.messageCount) {\r\n        // New message\r\n        this.messagesScroller.scrollTop = this.messagesScroller.scrollHeight - this.state.scrollPosition;\r\n      } else if (prevProps.viewportHeight > this.props.viewportHeight) {\r\n        // Componet changed height.\r\n        this.messagesScroller.scrollTop += prevProps.viewportHeight - this.props.viewportHeight;\r\n      }\r\n    }\r\n\r\n    const topic = this.props.tinode ? this.props.tinode.getTopic(this.state.topic) : undefined;\r\n    if (this.state.topic != prevState.topic) {\r\n      if (prevState.topic && !Tinode.isNewGroupTopicName(prevState.topic)) {\r\n        this.leave(prevState.topic);\r\n      }\r\n\r\n      if (topic) {\r\n        topic.onData = this.handleMessageUpdate;\r\n        topic.onAllMessagesReceived = this.handleAllMessagesReceived;\r\n        topic.onInfo = this.handleInfoReceipt;\r\n        topic.onMetaDesc = this.handleDescChange;\r\n        topic.onSubsUpdated = this.handleSubsUpdated;\r\n        topic.onPres = this.handleSubsUpdated;\r\n      }\r\n    }\r\n\r\n    if (!this.props.applicationVisible) {\r\n      // If application is not visible, flush all unsent 'read' notifications.\r\n      this.clearNotificationQueue();\r\n    } else {\r\n      // Otherwise assume there are unread messages.\r\n      this.postReadNotification(0);\r\n    }\r\n\r\n    if (topic && !topic.isSubscribed() && this.props.ready &&\r\n        ((this.state.topic != prevState.topic) || !prevProps.ready)) {\r\n      // Is this a new topic?\r\n      const newTopic = (this.props.newTopicParams && this.props.newTopicParams._topicName == this.props.topic);\r\n\r\n      // Don't request the tags. They are useless unless the user\r\n      // is the owner and is editing the topic.\r\n      let getQuery = topic.startMetaQuery().withLaterDesc().withLaterSub();\r\n      if (this.state.isReader || newTopic) {\r\n        // Reading is either permitted or we don't know because it's a new topic. Ask for messages.\r\n        getQuery = getQuery.withLaterData(MESSAGES_PAGE);\r\n        if (this.state.isReader) {\r\n          getQuery = getQuery.withLaterDel();\r\n        }\r\n        // And show \"loading\" spinner.\r\n        this.setState({ fetchingMessages: true });\r\n      }\r\n      const setQuery = newTopic ? this.props.newTopicParams : undefined;\r\n      topic.subscribe(getQuery.build(), setQuery)\r\n        .then((ctrl) => {\r\n          if (ctrl.code == 303) {\r\n            // Redirect to another topic requested.\r\n            HashNavigation.navigateTo(HashNavigation.setUrlTopic('', ctrl.params.topic));\r\n            return;\r\n          }\r\n          if (this.state.topic != ctrl.topic) {\r\n            this.setState({topic: ctrl.topic});\r\n          }\r\n          this.props.onNewTopicCreated(this.props.topic, ctrl.topic);\r\n          // If there are unsent messages, try sending them now.\r\n          topic.queuedMessages((pub) => {\r\n            if (!pub._sending && topic.isSubscribed()) {\r\n              topic.publishMessage(pub);\r\n            }\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"Failed subscription to\", this.state.topic);\r\n          this.props.onError(err.message, 'err');\r\n          const blankState = MessagesView.getDerivedStateFromProps({}, {});\r\n          blankState.title = this.props.intl.formatMessage(messages.not_found);\r\n          this.setState(blankState);\r\n        });\r\n    }\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    let nextState = {};\r\n    if (!nextProps.topic) {\r\n      // Default state: no topic.\r\n      nextState = {\r\n        messageCount: 0,\r\n        latestClearId: -1,\r\n        onlineSubs: [],\r\n        topic: null,\r\n        title: '',\r\n        avatar: null,\r\n        docPreview: null,\r\n        imagePreview: null,\r\n        imagePostview: null,\r\n        typingIndicator: false,\r\n        scrollPosition: 0,\r\n        fetchingMessages: false,\r\n        peerMessagingDisabled: false,\r\n        channel: false\r\n      };\r\n    } else if (nextProps.topic != prevState.topic) {\r\n      const topic = nextProps.tinode.getTopic(nextProps.topic);\r\n      nextState = {\r\n        topic: nextProps.topic,\r\n        docPreview: null,\r\n        imagePreview: null,\r\n        imagePostview: null,\r\n        typingIndicator: false,\r\n        scrollPosition: 0,\r\n        fetchingMessages: false\r\n      };\r\n\r\n      if (topic) {\r\n        // Topic exists.\r\n        const subs = [];\r\n\r\n        if (nextProps.connected) {\r\n          topic.subscribers((sub) => {\r\n            if (sub.online && sub.user != nextProps.myUserId) {\r\n              subs.push(sub);\r\n            }\r\n          });\r\n        }\r\n\r\n        Object.assign(nextState, {\r\n          onlineSubs: subs\r\n        });\r\n\r\n        if (topic.public) {\r\n          Object.assign(nextState, {\r\n            title: topic.public.fn,\r\n            avatar: makeImageDataUrl(topic.public.photo)\r\n          });\r\n        } else {\r\n          Object.assign(nextState, {\r\n            title: '',\r\n            avatar: null\r\n          });\r\n        }\r\n\r\n        const peer = topic.p2pPeerDesc();\r\n        if (peer) {\r\n          Object.assign(nextState, {\r\n            peerMessagingDisabled: isPeerRestricted(peer.acs)\r\n          });\r\n        } else if (prevState.peerMessagingDisabled) {\r\n          Object.assign(nextState, {\r\n            peerMessagingDisabled: false\r\n          });\r\n        }\r\n        Object.assign(nextState, {\r\n          messageCount: topic.messageCount(),\r\n          latestClearId: topic.maxClearId(),\r\n          channel: topic.isChannelType()\r\n        });\r\n      } else {\r\n        // Invalid topic.\r\n        Object.assign(nextState, {\r\n          messageCount: 0,\r\n          latestClearId: -1,\r\n          onlineSubs: [],\r\n          title: '',\r\n          avatar: null,\r\n          peerMessagingDisabled: false,\r\n          channel: false\r\n        });\r\n      }\r\n    }\r\n\r\n    if (nextProps.acs) {\r\n      if (nextProps.acs.isWriter() != prevState.isWriter) {\r\n        nextState.isWriter = !prevState.isWriter;\r\n      }\r\n      if (nextProps.acs.isReader() != prevState.isReader) {\r\n        nextState.isReader = !prevState.isReader;\r\n      }\r\n      if (!nextProps.acs.isReader('given') != prevState.readingBlocked) {\r\n        nextState.readingBlocked = !prevState.readingBlocked;\r\n      }\r\n      if (nextProps.acs.isSharer() != prevState.isSharer) {\r\n        nextState.isSharer = !prevState.isSharer;\r\n      }\r\n    } else {\r\n      if (prevState.isWriter) {\r\n        nextState.isWriter = false;\r\n      }\r\n      if (prevState.isReader) {\r\n        nextState.isReader = false;\r\n      }\r\n      if (!prevState.readingBlocked) {\r\n        prevState.readingBlocked = true;\r\n      }\r\n      if (prevState.isSharer) {\r\n        nextState.isSharer = false;\r\n      }\r\n    }\r\n\r\n    if (isUnconfirmed(nextProps.acs) == !prevState.unconformed) {\r\n      nextState.unconfirmed = !prevState.unconformed;\r\n    }\r\n\r\n    // Clear subscribers online when there is no connection.\r\n    if (!nextProps.connected && prevState.onlineSubs && prevState.onlineSubs.length > 0) {\r\n      nextState.onlineSubs = [];\r\n    }\r\n\r\n    return nextState;\r\n  }\r\n\r\n  leave(oldTopicName) {\r\n    if (!oldTopicName || !this.props.tinode.isTopicCached(oldTopicName)) {\r\n      return;\r\n    }\r\n    const oldTopic = this.props.tinode.getTopic(oldTopicName);\r\n    if (oldTopic && oldTopic.isSubscribed()) {\r\n      oldTopic.leave(false)\r\n        .catch(() => { /* do nothing here */ })\r\n        .finally(() => {\r\n          // We don't care if the request succeeded or failed.\r\n          // The topic is dead regardless.\r\n          this.setState({fetchingMessages: false});\r\n          oldTopic.onData = undefined;\r\n          oldTopic.onAllMessagesReceived = undefined;\r\n          oldTopic.onInfo = undefined;\r\n          oldTopic.onMetaDesc = undefined;\r\n          oldTopic.onSubsUpdated = undefined;\r\n          oldTopic.onPres = undefined;\r\n        });\r\n    }\r\n  }\r\n\r\n  handleScrollReference(node) {\r\n    if (node) {\r\n      node.addEventListener('scroll', this.handleScrollEvent);\r\n      this.messagesScroller = node;\r\n      this.messagesScroller.scrollTop = this.messagesScroller.scrollHeight - this.state.scrollPosition;\r\n    }\r\n  }\r\n\r\n  // Get older messages\r\n  handleScrollEvent(event) {\r\n    this.setState({scrollPosition: event.target.scrollHeight - event.target.scrollTop});\r\n    if (this.state.fetchingMessages) {\r\n      return;\r\n    }\r\n\r\n    if (event.target.scrollTop <= 0) {\r\n      const topic = this.props.tinode.getTopic(this.state.topic);\r\n      if (topic && topic.isSubscribed() && topic.msgHasMoreMessages()) {\r\n        this.setState({fetchingMessages: true}, () => {\r\n          topic.getMessagesPage(MESSAGES_PAGE)\r\n            .catch((err) => this.props.onError(err.message, 'err'))\r\n            .finally(() => this.setState({fetchingMessages: false}));\r\n          });\r\n      }\r\n    }\r\n  }\r\n\r\n  handleDescChange(desc) {\r\n    if (desc.public) {\r\n      this.setState({\r\n        title: desc.public.fn,\r\n        avatar: makeImageDataUrl(desc.public.photo)\r\n      });\r\n    } else {\r\n      this.setState({\r\n        title: '',\r\n        avatar: null\r\n      });\r\n    }\r\n\r\n    if (desc.acs) {\r\n      this.setState({\r\n        isWriter: desc.acs.isWriter(),\r\n        isReader: desc.acs.isReader(),\r\n        readingBlocked: !desc.acs.isReader('given'),\r\n        unconfirmed: isUnconfirmed(desc.acs),\r\n      });\r\n    }\r\n  }\r\n\r\n  postReadNotification(seq) {\r\n    // Ignore notifications if the app is invisible.\r\n    if (!this.props.applicationVisible) {\r\n      return;\r\n    }\r\n\r\n    // Set up the timer if it's not running already.\r\n    if (!this.readNotificationTimer) {\r\n      this.readNotificationTimer = setInterval(() => {\r\n        if (this.readNotificationQueue.length == 0) {\r\n          // Shut down the timer if the queue is empty.\r\n          clearInterval(this.readNotificationTimer);\r\n          this.readNotificationTimer = null;\r\n          return;\r\n        }\r\n\r\n        let seq = -1;\r\n        while (this.readNotificationQueue.length > 0) {\r\n          const n = this.readNotificationQueue[0];\r\n          if (n.topicName != this.state.topic) {\r\n            // Topic has changed. Drop the notification.\r\n            this.readNotificationQueue.shift();\r\n            continue;\r\n          }\r\n\r\n          const now = new Date();\r\n          if (n.sendAt <= now) {\r\n            // Remove expired notification from queue.\r\n            this.readNotificationQueue.shift();\r\n            seq = Math.max(seq, n.seq);\r\n          } else {\r\n            break;\r\n          }\r\n        }\r\n\r\n        // Send only one notification for the whole batch of messages.\r\n        if (seq >= 0) {\r\n          const topic = this.props.tinode.getTopic(this.state.topic);\r\n          if (topic) {\r\n            topic.noteRead(seq);\r\n          }\r\n        }\r\n      }, NOTIFICATION_EXEC_INTERVAL);\r\n    }\r\n\r\n    const now = new Date();\r\n    this.readNotificationQueue.push({\r\n      topicName: this.state.topic,\r\n      seq: seq,\r\n      sendAt: now.setMilliseconds(now.getMilliseconds() + READ_DELAY)\r\n    });\r\n  }\r\n\r\n  // Clear notification queue and timer.\r\n  clearNotificationQueue() {\r\n    this.readNotificationQueue = [];\r\n    if (this.readNotificationTimer) {\r\n      clearInterval(this.readNotificationTimer);\r\n      this.readNotificationTimer = null;\r\n    }\r\n  }\r\n\r\n  handleSubsUpdated() {\r\n    if (this.state.topic) {\r\n      const subs = [];\r\n      const topic = this.props.tinode.getTopic(this.state.topic);\r\n      topic.subscribers((sub) => {\r\n        if (sub.online && sub.user != this.props.myUserId) {\r\n          subs.push(sub);\r\n        }\r\n      });\r\n      const newState = {onlineSubs: subs};\r\n      const peer = topic.p2pPeerDesc();\r\n      if (peer) {\r\n        Object.assign(newState, {\r\n          peerMessagingDisabled: isPeerRestricted(peer.acs)\r\n        });\r\n      } else if (this.state.peerMessagingDisabled) {\r\n        Object.assign(newState, {\r\n          peerMessagingDisabled: false\r\n        });\r\n      }\r\n      this.setState(newState);\r\n    }\r\n  }\r\n\r\n  // The 'msg' could be false-ish if some message ranges were deleted.\r\n  handleMessageUpdate(msg) {\r\n    const topic = this.props.tinode.getTopic(this.state.topic);\r\n    if (!msg) {\r\n      // msg could be null if one or more messages were deleted.\r\n      // Updating state to force redraw.\r\n      this.setState({latestClearId: topic.maxClearId()});\r\n      return;\r\n    }\r\n\r\n    this.setState({messageCount: topic.messageCount()});\r\n\r\n    // Scroll to the bottom if the message is added to the end of the message list.\r\n    // TODO: This should be replaced by showing a \"scroll to bottom\" button.\r\n    if (topic.isNewMessage(msg.seq)) {\r\n      this.setState({scrollPosition: 0});\r\n    }\r\n\r\n    // Aknowledge messages except own messages. They are\r\n    // automatically assumed to be read and recived.\r\n    const status = topic.msgStatus(msg, true);\r\n    if (status >= Tinode.MESSAGE_STATUS_SENT && msg.from != this.props.myUserId) {\r\n      this.postReadNotification(msg.seq);\r\n    }\r\n    // This will send \"received\" notifications right away.\r\n    this.props.onData(msg);\r\n  }\r\n\r\n  handleAllMessagesReceived(count) {\r\n    this.setState({fetchingMessages: false});\r\n    if (count > 0) {\r\n      // 0 means \"latest\".\r\n      this.postReadNotification(0);\r\n    }\r\n  }\r\n\r\n  handleInfoReceipt(info) {\r\n    switch (info.what) {\r\n      case 'kp': {\r\n        clearTimeout(this.keyPressTimer);\r\n        var instance = this;\r\n        this.keyPressTimer = setTimeout(function() {\r\n          instance.setState({typingIndicator: false});\r\n        }, KEYPRESS_DELAY + 1000);\r\n        if (!this.state.typingIndicator) {\r\n          this.setState({typingIndicator: true});\r\n        }\r\n        break;\r\n      }\r\n      case 'read':\r\n      case 'recv':\r\n        // Redraw due to changed recv/read status.\r\n        this.forceUpdate();\r\n        break;\r\n      default:\r\n        console.log(\"Other change in topic: \", info.what);\r\n    }\r\n  }\r\n\r\n  handleImagePostview(content) {\r\n    this.setState({ imagePostview: content });\r\n  }\r\n\r\n  handleClosePreview() {\r\n    if (this.state.imagePreview && this.state.imagePreview.url) {\r\n      URL.revokeObjectURL(this.state.imagePreview.url);\r\n    }\r\n    this.setState({ imagePostview: null, imagePreview: null, docPreview: null });\r\n  }\r\n\r\n  handleFormResponse(action, text, data) {\r\n    if (action == 'pub') {\r\n      this.props.sendMessage(Drafty.attachJSON(Drafty.parse(text), data));\r\n    } else if (action == 'url') {\r\n      const url = new URL(data.ref);\r\n      const params = url.searchParams;\r\n      for (let key in data.resp) {\r\n        if (data.resp.hasOwnProperty(key)) {\r\n          params.set(key, data.resp[key]);\r\n        }\r\n      }\r\n      ['name', 'seq'].map((key) => {\r\n        if (data[key]) {\r\n          params.set(key, data[key]);\r\n        }\r\n      });\r\n      params.set('uid', this.props.myUserId);\r\n      params.set('topic', this.state.topic);\r\n      url.search = params;\r\n      window.open(url, '_blank');\r\n    } else {\r\n      console.log(\"Unknown action in form\", action);\r\n    }\r\n  }\r\n\r\n  handleContextClick(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    this.props.showContextMenu({ topicName: this.state.topic, y: e.pageY, x: e.pageX });\r\n  }\r\n\r\n  handleShowContextMenuMessage(params, messageSpecificMenuItems) {\r\n    params.topicName = this.state.topic;\r\n    const menuItems = messageSpecificMenuItems || [];\r\n    const topic = this.props.tinode.getTopic(params.topicName);\r\n    if (topic) {\r\n      if (!topic.isChannelType()) {\r\n        menuItems.push('message_delete');\r\n      }\r\n      const acs = topic.getAccessMode();\r\n      if (acs && acs.isDeleter()) {\r\n        menuItems.push('message_delete_hard');\r\n      }\r\n    }\r\n    this.props.showContextMenu(params, menuItems);\r\n  }\r\n\r\n  handleNewChatAcceptance(action) {\r\n    this.props.onNewChat(this.state.topic, action);\r\n  }\r\n\r\n  handleEnablePeer(e) {\r\n    e.preventDefault();\r\n    this.props.onChangePermissions(this.state.topic, DEFAULT_P2P_ACCESS_MODE, this.state.topic);\r\n  }\r\n\r\n  sendKeyPress() {\r\n    const topic = this.props.tinode.getTopic(this.state.topic);\r\n    if (topic.isSubscribed()) {\r\n      topic.noteKeyPress();\r\n    }\r\n  }\r\n\r\n  // Send attachment as Drafty message:\r\n  // - if file is too large, upload it and send a s link.\r\n  // - if file is small enough, just send it in-band.\r\n  sendFileAttachment(file) {\r\n    // Server-provided limit reduced for base64 encoding and overhead.\r\n    const maxInbandAttachmentSize = (this.props.tinode.getServerLimit('maxMessageSize',\r\n      MAX_INBAND_ATTACHMENT_SIZE) * 0.75 - 1024) | 0;\r\n\r\n    if (file.size > maxInbandAttachmentSize) {\r\n      // Too large to send inband - uploading out of band and sending as a link.\r\n      const uploader = this.props.tinode.getLargeFileHelper();\r\n      if (!uploader) {\r\n        this.props.onError(this.props.intl.formatMessage(messages.cannot_initiate_upload));\r\n        return;\r\n      }\r\n      const uploadCompletionPromise = uploader.upload(file);\r\n      const msg = Drafty.attachFile(null, {\r\n        mime: file.type,\r\n        filename: file.name,\r\n        size: file.size,\r\n        urlPromise: uploadCompletionPromise\r\n      });\r\n      // Pass data and the uploader to the TinodeWeb.\r\n      this.props.sendMessage(msg, uploadCompletionPromise, uploader);\r\n    } else {\r\n      // Small enough to send inband.\r\n      fileToBase64(file,\r\n        (mime, bits, fname) => {\r\n          this.props.sendMessage(Drafty.attachFile(null, {mime: mime, data: bits, filename: fname}));\r\n        },\r\n        this.props.onError\r\n      );\r\n    }\r\n  }\r\n\r\n  // handleAttachFile method is called when [Attach file] button is clicked.\r\n  handleAttachFile(file) {\r\n    const maxExternAttachmentSize = this.props.tinode.getServerLimit('maxFileUploadSize', MAX_EXTERN_ATTACHMENT_SIZE);\r\n\r\n    if (file.size > maxExternAttachmentSize) {\r\n      // Too large.\r\n      this.props.onError(this.props.intl.formatMessage(messages.file_attachment_too_large,\r\n        {size: bytesToHumanSize(file.size), limit: bytesToHumanSize(maxExternAttachmentSize)}), 'err');\r\n    } else {\r\n      this.setState({ docPreview: {\r\n        file: file,\r\n        filename: file.name,\r\n        size: file.size,\r\n        type: file.type\r\n      }});\r\n    }\r\n  }\r\n\r\n  // sendImageAttachment sends the image bits inband as Drafty message.\r\n  sendImageAttachment(caption, blob) {\r\n    const mime = this.state.imagePreview.type;\r\n    const width = this.state.imagePreview.width;\r\n    const height = this.state.imagePreview.height;\r\n    const fname = this.state.imagePreview.filename;\r\n\r\n    // Server-provided limit reduced for base64 encoding and overhead.\r\n    const maxInbandAttachmentSize = (this.props.tinode.getServerLimit('maxMessageSize',\r\n      MAX_INBAND_ATTACHMENT_SIZE) * 0.75 - 1024) | 0;\r\n\r\n    if (blob.size > maxInbandAttachmentSize) {\r\n      // Too large to send inband - uploading out of band and sending as a link.\r\n      const uploader = this.props.tinode.getLargeFileHelper();\r\n      if (!uploader) {\r\n        this.props.onError(this.props.intl.formatMessage(messages.cannot_initiate_upload));\r\n        return;\r\n      }\r\n      const uploadCompletionPromise = uploader.upload(blob);\r\n\r\n      // Make small preview to show while uploading.\r\n      imageScaled(blob, IMAGE_PREVIEW_DIM, IMAGE_PREVIEW_DIM, -1, false,\r\n        (tinyMine, tinyBlob) => {\r\n          // Convert tiny image into base64 for serialization and previewing.\r\n          blobToBase64(tinyBlob, (blobMime, tinyBits64) => {\r\n            let msg = Drafty.insertImage(null, 0, {\r\n              mime: mime,\r\n              _tempPreview: tinyBits64, // This preview will not be serialized.\r\n              width: width,\r\n              height: height,\r\n              filename: fname,\r\n              size: blob.size,\r\n              urlPromise: uploadCompletionPromise\r\n            });\r\n            if (caption) {\r\n              msg = Drafty.appendLineBreak(msg);\r\n              msg = Drafty.append(msg, Drafty.init(caption));\r\n            }\r\n            // Pass data and the uploader to the TinodeWeb.\r\n            this.props.sendMessage(msg, uploadCompletionPromise, uploader);\r\n          }\r\n        )},\r\n        // Failure\r\n        (err) => {\r\n          this.props.onError(err, 'err');\r\n        }\r\n      );\r\n      return;\r\n    }\r\n\r\n    // Upload the image if it's too big to be send inband.\r\n    blobToBase64(blob, (blobMime, bits64) => {\r\n      let msg = Drafty.insertImage(null, 0, {\r\n        mime: blobMime,\r\n        preview: bits64, // Serializable preview\r\n        width: width,\r\n        height: height,\r\n        filename: fname,\r\n        size: blob.size\r\n      });\r\n      if (caption) {\r\n        msg = Drafty.appendLineBreak(msg);\r\n        msg = Drafty.append(msg, Drafty.init(caption));\r\n      }\r\n      this.props.sendMessage(msg);\r\n    });\r\n  }\r\n\r\n  // handleAttachImage method is called when [Attach image] button is clicked.\r\n  handleAttachImage(file) {\r\n    const maxExternAttachmentSize = this.props.tinode.getServerLimit('maxFileUploadSize', MAX_EXTERN_ATTACHMENT_SIZE);\r\n\r\n    // Get image dimensions and size, optionally scale it down.\r\n    imageScaled(file, MAX_IMAGE_DIM, MAX_IMAGE_DIM, maxExternAttachmentSize, false,\r\n      // Success\r\n      (mime, blob, width, height, fname) => {\r\n        this.setState({imagePreview: {\r\n          url: URL.createObjectURL(blob),\r\n          blob: blob,\r\n          filename: fname,\r\n          width: width,\r\n          height: height,\r\n          size: blob.size,\r\n          type: mime\r\n        }});\r\n      },\r\n      // Failure\r\n      (err) => {\r\n        this.props.onError(err, 'err');\r\n      }\r\n    );\r\n  }\r\n\r\n  handleCancelUpload(seq, uploader) {\r\n    const topic = this.props.tinode.getTopic(this.state.topic);\r\n    const found = topic.findMessage(seq);\r\n    if (found) {\r\n      found._cancelled = true;\r\n    }\r\n    uploader.cancel();\r\n  }\r\n\r\n  render() {\r\n    const {formatMessage} = this.props.intl;\r\n\r\n    let component;\r\n    if (this.props.hideSelf) {\r\n      component = null;\r\n    } else if (!this.state.topic) {\r\n      component = (\r\n        <LogoView\r\n          serverVersion={this.props.serverVersion}\r\n          serverAddress={this.props.serverAddress} />\r\n      );\r\n    } else {\r\n      let component2;\r\n      if (this.state.imagePreview) {\r\n        // Preview image before sending.\r\n        component2 = (\r\n          <ImagePreview\r\n            content={this.state.imagePreview}\r\n            onClose={this.handleClosePreview}\r\n            onSendMessage={this.sendImageAttachment} />\r\n        );\r\n      } else if (this.state.imagePostview) {\r\n        // Expand received image.\r\n        component2 = (\r\n          <ImagePreview\r\n            content={this.state.imagePostview}\r\n            onClose={this.handleClosePreview} />\r\n        );\r\n      } else if (this.state.docPreview) {\r\n        // Preview attachment before sending.\r\n        component2 = (\r\n          <DocPreview\r\n            content={this.state.docPreview}\r\n            onClose={this.handleClosePreview}\r\n            onSendMessage={this.sendFileAttachment} />\r\n        );\r\n      } else {\r\n        const topic = this.props.tinode.getTopic(this.state.topic);\r\n        const isChannel = topic.isChannelType();\r\n        const groupTopic = topic.isGroupType() && !isChannel;\r\n        let messageNodes = [];\r\n        let previousFrom = null;\r\n        let chatBoxClass = null;\r\n        topic.messages((msg, prev, next, i) => {\r\n          let nextFrom = next ? (next.from || null) : 'chan';\r\n\r\n          let sequence = 'single';\r\n          let thisFrom = msg.from || 'chan';\r\n          if (thisFrom == previousFrom) {\r\n            if (thisFrom == nextFrom) {\r\n              sequence = 'middle';\r\n            } else {\r\n              sequence = 'last';\r\n            }\r\n          } else if (thisFrom == nextFrom) {\r\n            sequence = 'first';\r\n          }\r\n          previousFrom = thisFrom;\r\n\r\n          const isReply = !(thisFrom == this.props.myUserId);\r\n          const deliveryStatus = topic.msgStatus(msg, true);\r\n\r\n          let userName, userAvatar, userFrom;\r\n          if (groupTopic) {\r\n            const user = topic.userDesc(thisFrom);\r\n            if (user && user.public) {\r\n              userName = user.public.fn;\r\n              userAvatar = makeImageDataUrl(user.public.photo);\r\n            }\r\n            userFrom = thisFrom;\r\n            chatBoxClass='chat-box group';\r\n          } else {\r\n            chatBoxClass='chat-box';\r\n          }\r\n\r\n          messageNodes.push(\r\n            <ChatMessage\r\n              tinode={this.props.tinode}\r\n              content={msg.content}\r\n              deleted={msg.hi}\r\n              mimeType={msg.head ? msg.head.mime : null}\r\n              timestamp={msg.ts}\r\n              response={isReply}\r\n              seq={msg.seq}\r\n              userFrom={userFrom}\r\n              userName={userName}\r\n              userAvatar={userAvatar}\r\n              sequence={sequence}\r\n              received={deliveryStatus}\r\n              uploader={msg._uploader}\r\n              viewportWidth={this.props.viewportWidth}\r\n              showContextMenu={this.state.channel? false : this.handleShowContextMenuMessage}\r\n              onImagePreview={this.handleImagePostview}\r\n              onFormResponse={this.handleFormResponse}\r\n              onError={this.props.onError}\r\n              onCancelUpload={this.handleCancelUpload}\r\n              key={msg.seq} />\r\n          );\r\n        });\r\n\r\n        let lastSeen = null;\r\n        if (isChannel) {\r\n          lastSeen = formatMessage(messages.channel);\r\n        } else {\r\n          const cont = this.props.tinode.getMeTopic().getContact(this.state.topic);\r\n          if (cont && Tinode.isP2PTopicName(cont.topic)) {\r\n            if (cont.online) {\r\n              lastSeen = formatMessage(messages.online_now);\r\n            } else if (cont.seen) {\r\n              lastSeen = formatMessage(messages.last_seen) + \": \" +\r\n                shortDateFormat(cont.seen.when, this.props.intl.locale);\r\n              // TODO: also handle user agent in c.seen.ua\r\n            }\r\n          }\r\n        }\r\n        const avatar = this.state.avatar || true;\r\n        const online = this.props.online ? 'online' + (this.state.typingIndicator ? ' typing' : '') : 'offline';\r\n\r\n        component2 = (\r\n          <>\r\n            <div id=\"topic-caption-panel\" className=\"caption-panel\">\r\n              {this.props.displayMobile ?\r\n                <a href=\"#\" id=\"hide-message-view\" onClick={(e) => {e.preventDefault(); this.props.onHideMessagesView();}}>\r\n                  <i className=\"material-icons\">arrow_back</i>\r\n                </a>\r\n                :\r\n                null}\r\n              <div className=\"avatar-box\">\r\n                <LetterTile\r\n                  avatar={avatar}\r\n                  topic={this.state.topic}\r\n                  title={this.state.title} />\r\n                {!isChannel ? <span className={online} /> : null}\r\n              </div>\r\n              <div id=\"topic-title-group\">\r\n                <div id=\"topic-title\" className=\"panel-title\">{\r\n                  this.state.title ||\r\n                  <i><FormattedMessage id=\"unnamed_topic\" defaultMessage=\"Unnamed\"\r\n                    description=\"Title shown when the topic has no name\" /></i>\r\n                }</div>\r\n                <div id=\"topic-last-seen\">{lastSeen}</div>\r\n              </div>\r\n              {groupTopic ?\r\n                <GroupSubs\r\n                  subscribers={this.state.onlineSubs} /> :\r\n                <div id=\"topic-users\" />\r\n              }\r\n              <div>\r\n                <a href=\"#\" onClick={this.handleContextClick}>\r\n                  <i className=\"material-icons\">more_vert</i>\r\n                </a>\r\n              </div>\r\n            </div>\r\n            {this.props.displayMobile ?\r\n              <ErrorPanel\r\n                level={this.props.errorLevel}\r\n                text={this.props.errorText}\r\n                onClearError={this.props.onError} />\r\n              : null}\r\n            <LoadSpinner show={this.state.fetchingMessages} />\r\n            <div id=\"messages-container\">\r\n              <div id=\"messages-panel\" ref={this.handleScrollReference}>\r\n                <ul id=\"scroller\" className={chatBoxClass}>\r\n                  {messageNodes}\r\n                </ul>\r\n              </div>\r\n              {!this.state.isReader ?\r\n              <div id=\"write-only-background\">\r\n                {this.state.readingBlocked ?\r\n                <div id=\"write-only-note\">\r\n                  <FormattedMessage id=\"messages_not_readable\" defaultMessage=\"no access to messages\"\r\n                    description=\"Message shown in topic without the read access\" />\r\n                </div>\r\n                : null }\r\n              </div>\r\n              : null }\r\n            </div>\r\n            {this.state.peerMessagingDisabled && !this.state.unconfirmed ?\r\n              <div id=\"peer-messaging-disabled-note\">\r\n                <i className=\"material-icons secondary\">block</i> <FormattedMessage\r\n                  id=\"peers_messaging_disabled\" defaultMessage=\"Peer's messaging is disabled.\"\r\n                  description=\"Shown when the p2p peer's messaging is disabled\" /> <a href=\"#\"\r\n                    onClick={this.handleEnablePeer}><FormattedMessage id=\"enable_peers_messaging\"\r\n                    defaultMessage=\"Enable\" description=\"Call to action to enable peer's messaging\" /></a>.\r\n              </div> : null}\r\n            {this.state.unconfirmed ?\r\n              <Invitation onAction={this.handleNewChatAcceptance} />\r\n              :\r\n              <SendMessage\r\n                disabled={!this.state.isWriter}\r\n                onSendMessage={this.props.sendMessage}\r\n                onKeyPress={this.sendKeyPress}\r\n                onAttachFile={this.handleAttachFile}\r\n                onAttachImage={this.handleAttachImage}\r\n                onError={this.props.onError} />}\r\n          </>\r\n        );\r\n      }\r\n\r\n      component = <div id=\"topic-view\">{component2}</div>\r\n    }\r\n    return component;\r\n  }\r\n};\r\n\r\nexport default injectIntl(MessagesView);\r\n",
    "// Create new topic and invite users or send an invite.\r\nimport React from 'react';\r\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\r\n\r\nimport Tinode from 'tinode-sdk';\r\n\r\nimport ContactList from '../widgets/contact-list.jsx';\r\nimport NewTopicById from '../widgets/new-topic-by-id.jsx';\r\nimport NewTopicGroup from '../widgets/new-topic-group.jsx';\r\nimport SearchContacts from '../widgets/search-contacts.jsx';\r\n\r\nimport HashNavigation from '../lib/navigation.js';\r\nimport { theCard } from '../lib/utils.js';\r\n\r\nconst messages = defineMessages({\r\n  search_for_contacts: {\r\n    id: \"search_for_contacts\",\r\n    defaultMessage: \"Use search to find contacts\",\r\n    description: \"Text shown in contacts view when user entered no search query.\"\r\n  },\r\n  search_no_results: {\r\n    id: \"search_no_results\",\r\n    defaultMessage: \"Search returned no results\",\r\n    description: \"Text shown in contacts view when query returned no results.\"\r\n  }\r\n});\r\n\r\nclass NewTopicView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      tabSelected: 'p2p',\r\n      searchQuery: null\r\n    };\r\n\r\n    this.handleTabClick = this.handleTabClick.bind(this);\r\n    this.handleSearchContacts = this.handleSearchContacts.bind(this);\r\n    this.handleContactSelected = this.handleContactSelected.bind(this);\r\n    this.handleNewGroupSubmit = this.handleNewGroupSubmit.bind(this);\r\n    this.handleGroupByID = this.handleGroupByID.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.onInitFind();\r\n  }\r\n\r\n  handleTabClick(e) {\r\n    e.preventDefault();\r\n    HashNavigation.navigateTo(HashNavigation.addUrlParam(window.location.hash, 'tab', e.currentTarget.dataset.id));\r\n    this.setState({tabSelected: e.currentTarget.dataset.id});\r\n  }\r\n\r\n  handleSearchContacts(query) {\r\n    this.props.onSearchContacts(query);\r\n    this.setState({searchQuery: Tinode.isNullValue(query) ? null : query});\r\n  }\r\n\r\n  handleContactSelected(sel) {\r\n    if (this.state.tabSelected === 'p2p') {\r\n      HashNavigation.navigateTo(HashNavigation.removeUrlParam(window.location.hash, 'tab'));\r\n      this.props.onCreateTopic(sel);\r\n    }\r\n  }\r\n\r\n  handleNewGroupSubmit(name, dataUrl, priv, tags, isChannel) {\r\n    HashNavigation.navigateTo(HashNavigation.removeUrlParam(window.location.hash, 'tab'));\r\n    this.props.onCreateTopic(undefined, theCard(name, dataUrl), priv, tags, isChannel);\r\n  }\r\n\r\n  handleGroupByID(topicName) {\r\n    HashNavigation.navigateTo(HashNavigation.removeUrlParam(window.location.hash, 'tab'));\r\n    this.props.onCreateTopic(topicName);\r\n  }\r\n\r\n  render() {\r\n    const {formatMessage} = this.props.intl;\r\n    const no_contacts_placeholder = formatMessage(this.state.searchQuery ?\r\n      messages.search_no_results : messages.search_for_contacts);\r\n    return (\r\n      <div className=\"flex-column\">\r\n        <ul className=\"tabbar\">\r\n          <li className={this.state.tabSelected === \"p2p\" ? \"active\" : null}>\r\n            <a href=\"#\" data-id=\"p2p\" onClick={this.handleTabClick}>\r\n              <FormattedMessage id=\"tabtitle_find_user\" defaultMessage=\"find\"\r\n                description=\"Tab title Find\" />\r\n            </a>\r\n          </li>\r\n          <li className={this.state.tabSelected === \"grp\" ? \"active\" : null}>\r\n            <a href=\"#\" data-id=\"grp\" onClick={this.handleTabClick}>\r\n              <FormattedMessage id=\"tabtitle_new_group\" defaultMessage=\"new group\"\r\n                description=\"Tab title New Group\" />\r\n            </a>\r\n          </li>\r\n          <li className={this.state.tabSelected === \"byid\" ? \"active\" : null}>\r\n            <a href=\"#\" data-id=\"byid\" onClick={this.handleTabClick}>\r\n              <FormattedMessage id=\"tabtitle_group_by_id\" defaultMessage=\"by id\"\r\n                description=\"Tab title Find topic by ID\" />\r\n            </a>\r\n          </li>\r\n        </ul>\r\n        {this.state.tabSelected === 'grp' ?\r\n          <NewTopicGroup\r\n            tinode={this.props.tinode}\r\n            onSubmit={this.handleNewGroupSubmit} /> :\r\n          this.state.tabSelected === 'byid' ?\r\n            <NewTopicById\r\n              onSubmit={this.handleGroupByID}\r\n              onError={this.props.onError} /> :\r\n            <div className=\"flex-column\">\r\n              <SearchContacts\r\n                type=\"p2p\"\r\n                onSearchContacts={this.handleSearchContacts} />\r\n              <ContactList\r\n                contacts={this.props.searchResults}\r\n                myUserId={this.props.myUserId}\r\n                emptyListMessage={no_contacts_placeholder}\r\n                showOnline={false}\r\n                showUnread={false}\r\n                showContextMenu={false}\r\n                onTopicSelected={this.handleContactSelected} />\r\n            </div>}\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default injectIntl(NewTopicView);\r\n",
    "// A password reset form.\r\nimport React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport VisiblePassword from '../widgets/visible-password.jsx';\r\n\r\nimport HashNavigation from '../lib/navigation.js';\r\n\r\nexport default class PasswordResetView extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      email: '',\r\n      password: '',\r\n      sent: false\r\n    };\r\n\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleEmailChange = this.handleEmailChange.bind(this);\r\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const parsed = HashNavigation.parseUrlHash(window.location.hash);\r\n    this.setState({token: parsed.params.token, scheme: parsed.params.scheme});\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    e.preventDefault();\r\n    if (this.state.token) {\r\n      this.props.onReset(this.state.scheme, this.state.password.trim(), this.state.token);\r\n    } else if (this.state.sent) {\r\n      this.props.onCancel();\r\n    } else {\r\n      const email = this.state.email.trim();\r\n      this.setState({email: email});\r\n      this.props.onRequest('email', email).then(() => {\r\n        this.setState({sent: true});\r\n      });\r\n    }\r\n  }\r\n\r\n  handleEmailChange(e) {\r\n    this.setState({email: e.target.value});\r\n  }\r\n\r\n  handlePasswordChange(e) {\r\n    this.setState({password: e.target.value});\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form id=\"password-reset-form\" onSubmit={this.handleSubmit}>\r\n        {(this.state.token && this.state.scheme) ?\r\n          <FormattedMessage id=\"new_password_placeholder\" defaultMessage=\"Enter new password\"\r\n            description=\"Placeholder for entering new password\">{\r\n            (placeholder) => <VisiblePassword\r\n              placeholder={placeholder}\r\n              autoComplete=\"new-password\"\r\n              value={this.state.password}\r\n              required={true} autoFocus={true}\r\n              onChange={this.handlePasswordChange} />\r\n          }</FormattedMessage>\r\n        : this.state.sent ?\r\n          <>\r\n            <br/>\r\n            <center><i className=\"material-icons huge green\">task_alt</i></center>\r\n            <br/>\r\n            <center><FormattedMessage id=\"password_reset_email_sent\"\r\n              defaultMessage=\"An email has been sent to {email}. Follow the directions in the email to reset your password.\"\r\n              values={{ email: <tt>{this.state.email}</tt> }}\r\n              description=\"Notification that the email with password reset instructions has been sent\" /></center>\r\n          </>\r\n        :\r\n          <>\r\n            <label htmlFor=\"inputEmail\">\r\n              <FormattedMessage id=\"label_reset_password\"\r\n                defaultMessage=\"Send a password reset email:\"\r\n                description=\"Label for password reset field\" />\r\n            </label>\r\n            <FormattedMessage id=\"credential_email_prompt\" defaultMessage=\"Your registration email\"\r\n              description=\"Placeholder for entering email\">{\r\n              (placeholder) => <input type=\"email\" id=\"inputEmail\"\r\n                placeholder={placeholder}\r\n                autoComplete=\"email\"\r\n                value={this.state.email}\r\n                onChange={this.handleEmailChange}\r\n                required autoFocus />\r\n            }</FormattedMessage>\r\n          </>\r\n        }\r\n        <div className=\"dialog-buttons\">\r\n          <button className=\"primary\" type=\"submit\">{\r\n            (this.state.token && this.state.scheme) ?\r\n            <FormattedMessage id=\"button_reset\" defaultMessage=\"Reset\" description=\"Button [Reset]\" />\r\n            : this.state.sent ?\r\n            <FormattedMessage id=\"button_ok\" defaultMessage=\"OK\"\r\n              description=\"Button [OK]\" />\r\n            :\r\n            <FormattedMessage id=\"button_send_request\" defaultMessage=\"Send request\"\r\n              description=\"Button [Send request]\" />\r\n          }</button>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n",
    "// Tinode config panel.\r\nimport React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport HostSelector from '../widgets/host-selector.jsx';\r\n\r\nexport default class SettingsView extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      transport: props.transport || 'lp',\r\n      serverAddress: props.serverAddress,\r\n    };\r\n\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleTransportSelected = this.handleTransportSelected.bind(this);\r\n    this.handleServerAddressChange = this.handleServerAddressChange.bind(this);\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    e.preventDefault();\r\n    this.props.onUpdate({\r\n      transport: this.state.transport,\r\n      serverAddress: this.state.serverAddress\r\n    });\r\n  }\r\n\r\n  handleTransportSelected(e) {\r\n    this.setState({transport: e.currentTarget.value});\r\n  }\r\n\r\n  handleServerAddressChange(name) {\r\n    this.setState({serverAddress: name});\r\n  }\r\n\r\n  render() {\r\n    const names = {def: \"default\", ws: \"websocket\", lp: \"long polling\"};\r\n    const transportOptions = [];\r\n    ['lp'].map((item) => {\r\n      const id = 'transport-' + item;\r\n      const name = names[item];\r\n      transportOptions.push(\r\n        <li key={item}>\r\n          <input type=\"radio\" id={id} name=\"transport-select\" value={item}\r\n            checked={this.state.transport === item}\r\n            onChange={this.handleTransportSelected} />\r\n          <label htmlFor={id}>{name}</label>\r\n        </li>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <form id=\"settings-form\" className=\"panel-form\" onSubmit={this.handleSubmit}>\r\n        <div className=\"panel-form-row\">\r\n          <label className=\"small\">\r\n            <FormattedMessage id=\"label_server_to_use\" defaultMessage=\"Server to use:\"\r\n              description=\"Label for server selector in SettingsView\" />\r\n          </label>\r\n        </div>\r\n        <HostSelector serverAddress={this.state.serverAddress}\r\n          onServerAddressChange={this.handleServerAddressChange} />\r\n        <div className=\"panel-form-row\">\r\n          <label className=\"small\">\r\n            <FormattedMessage id=\"label_wire_transport\" defaultMessage=\"Wire transport:\"\r\n              description=\"Label for wire transport selection in SettingsView\" />\r\n          </label>\r\n        </div>\r\n        <div className=\"panel-form-row\">\r\n          <ul className=\"quoted\">\r\n            {transportOptions}\r\n          </ul>\r\n        </div>\r\n        <div className=\"dialog-buttons\">\r\n          <button type=\"submit\" className=\"primary\">\r\n            <FormattedMessage id=\"button_update\" defaultMessage=\"Update\"\r\n              description=\"Button [Update]\" />\r\n          </button>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n};\r\n",
    "import React from 'react';\r\nimport { defineMessages, injectIntl } from 'react-intl';\r\n\r\nimport ErrorPanel from '../widgets/error-panel.jsx';\r\nimport LoadSpinner from '../widgets/load-spinner.jsx';\r\nimport SideNavbar from '../widgets/side-navbar.jsx';\r\n\r\nimport ContactsView from './contacts-view.jsx';\r\nimport CreateAccountView from './create-account-view.jsx';\r\nimport EditAccountView from './edit-account-view.jsx';\r\nimport AccGeneralView from './acc-general-view.jsx';\r\nimport AccNotificationsView from './acc-notifications-view.jsx';\r\nimport AccSecurityView from './acc-security-view.jsx';\r\nimport AccSupportView from './acc-support-view.jsx';\r\nimport LoginView from './login-view.jsx';\r\nimport NewTopicView from './new-topic-view.jsx';\r\nimport PasswordResetView from './password-reset-view.jsx';\r\nimport SettingsView from './settings-view.jsx';\r\nimport ValidationView from './validation-view.jsx';\r\n\r\n// Panel titles for translation.\r\nconst messages = defineMessages({\r\n  login: {\r\n    id: 'sidepanel_title_login',\r\n    description: 'Sidepanel title for LoginView.',\r\n    defaultMessage: 'Sign In'\r\n  },\r\n  register: {\r\n    id: 'sidepanel_title_register',\r\n    description: 'Sidepanel title for CreateAccountView.',\r\n    defaultMessage: 'Create Account'\r\n  },\r\n  settings: {\r\n    id: 'sidepanel_title_settings',\r\n    description: 'Sidepanel title for SettingsView.',\r\n    defaultMessage: 'Settings'\r\n  },\r\n  edit: {\r\n    id: 'sidepanel_title_account_settings',\r\n    description: 'Sidepanel title for EditAccountView.',\r\n    defaultMessage: 'Account Settings'\r\n  },\r\n  general: {\r\n    id: 'sidepanel_title_acc_general',\r\n    description: 'Sidepanel title for AccGeneralView.',\r\n    defaultMessage: 'General'\r\n  },\r\n  security: {\r\n    id: 'sidepanel_title_acc_security',\r\n    description: 'Sidepanel title for AccSecurityView.',\r\n    defaultMessage: 'Security'\r\n  },\r\n  notif: {\r\n    id: 'sidepanel_title_acc_notifications',\r\n    description: 'Sidepanel title for AccNotificationsView.',\r\n    defaultMessage: 'Notifications'\r\n  },\r\n  support: {\r\n    id: 'sidepanel_title_acc_support',\r\n    description: 'Sidepanel title for AccSupportView.',\r\n    defaultMessage: 'Support'\r\n  },\r\n  newtpk: {\r\n    id: 'sidepanel_title_newtpk',\r\n    description: 'Sidepanel title for NewTopicView.',\r\n    defaultMessage: 'Start New Chat'\r\n  },\r\n  cred: {\r\n    id: 'sidepanel_title_cred',\r\n    description: 'Sidepanel title for ValidationView.',\r\n    defaultMessage: 'Confirm Credentials'\r\n  },\r\n  reset: {\r\n    id: 'sidepanel_title_reset',\r\n    description: 'Sidepanel title for PasswordResetView.',\r\n    defaultMessage: 'Reset Password'\r\n  },\r\n  archive: {\r\n    id: 'sidepanel_title_archive',\r\n    description: 'Sidepanel title for ContactsView-Archive.',\r\n    defaultMessage: 'Archived Chats'\r\n  },\r\n  blocked: {\r\n    id: 'sidepanel_title_blocked',\r\n    description: 'Sidepanel title for ContactsView-Blocked.',\r\n    defaultMessage: 'Blocked Chats'\r\n  }\r\n});\r\n\r\nclass SidepanelView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleNewTopic = this.handleNewTopic.bind(this);\r\n  }\r\n\r\n  handleNewTopic() {\r\n    this.props.onBasicNavigate('newtpk');\r\n  }\r\n\r\n  render() {\r\n    const {formatMessage} = this.props.intl;\r\n    const view = this.props.state || (this.props.myUserId ? 'contacts' : 'login');\r\n\r\n    let title, avatar;\r\n    if (view == 'contacts') {\r\n      title = this.props.title;\r\n      avatar = this.props.avatar ? this.props.avatar : true;\r\n    } else {\r\n      title = formatMessage(messages[view]);\r\n      avatar = false;\r\n    }\r\n\r\n    let onCancel;\r\n    if (['login', 'contacts'].indexOf(view) == -1) {\r\n      onCancel = this.props.onCancel;\r\n    }\r\n\r\n    return (\r\n      <div id=\"sidepanel\" className={this.props.hideSelf ? 'nodisplay' : null}>\r\n        <SideNavbar\r\n          state={view}\r\n          title={title}\r\n          avatar={avatar}\r\n          myUserId={this.props.myUserId}\r\n          onSignUp={this.props.onSignUp}\r\n          onSettings={this.props.onSettings}\r\n          onNewTopic={this.handleNewTopic}\r\n          onCancel={onCancel} />\r\n\r\n        <ErrorPanel\r\n          level={this.props.errorLevel}\r\n          text={this.props.errorText}\r\n          action={this.props.errorAction}\r\n          actionText={this.props.errorActionText}\r\n          onClearError={this.props.onError} />\r\n\r\n        <LoadSpinner show={this.props.loadSpinnerVisible} />\r\n\r\n        {view === 'login' ?\r\n          <LoginView\r\n            login={this.props.login}\r\n            disabled={this.props.loginDisabled}\r\n            persist={this.props.persist}\r\n            onLogin={this.props.onLoginRequest}\r\n            onPersistenceChange={this.props.onPersistenceChange} /> :\r\n\r\n          view === 'register' ?\r\n          <CreateAccountView\r\n            onCreateAccount={this.props.onCreateAccount}\r\n            onCancel={this.props.onCancel}\r\n            onError={this.props.onError} /> :\r\n\r\n          view === 'settings' ?\r\n          <SettingsView\r\n            transport={this.props.transport}\r\n            serverAddress={this.props.serverAddress}\r\n            onCancel={this.props.onCancel}\r\n            onUpdate={this.props.onGlobalSettings} /> :\r\n\r\n          view === 'edit' ?\r\n          <EditAccountView\r\n            tinode={this.props.tinode}\r\n            myUserId={this.props.myUserId}\r\n            onBasicNavigate={this.props.onBasicNavigate} /> :\r\n\r\n          view === 'general' ?\r\n          <AccGeneralView\r\n            tinode={this.props.tinode}\r\n            myUserId={this.props.myUserId}\r\n            onUpdateAccount={this.props.onUpdateAccount}\r\n            onUpdateTags={this.props.onUpdateAccountTags}\r\n            onCredAdd={this.props.onCredAdd}\r\n            onCredDelete={this.props.onCredDelete}\r\n            onCredConfirm={this.props.onCredConfirm}\r\n            onBasicNavigate={this.props.onBasicNavigate}\r\n            onError={this.props.onError} /> :\r\n\r\n          view === 'notif' ?\r\n          <AccNotificationsView\r\n            messageSounds={this.props.messageSounds}\r\n            desktopAlerts={this.props.desktopAlerts}\r\n            desktopAlertsEnabled={this.props.desktopAlertsEnabled}\r\n            incognitoMode={this.props.incognitoMode}\r\n            onTogglePushNotifications={this.props.onTogglePushNotifications}\r\n            onToggleMessageSounds={this.props.onToggleMessageSounds}\r\n            onToggleIncognitoMode={this.props.onToggleIncognitoMode} /> :\r\n\r\n          view === 'security' ?\r\n          <AccSecurityView\r\n            tinode={this.props.tinode}\r\n            onUpdateAccount={this.props.onUpdateAccount}\r\n            onLogout={this.props.onLogout}\r\n            onDeleteAccount={this.props.onDeleteAccount}\r\n            onShowAlert={this.props.onShowAlert}\r\n            onShowBlocked={this.props.onShowBlocked} /> :\r\n\r\n          view === 'support' ?\r\n          <AccSupportView\r\n            serverAddress={this.props.serverAddress}\r\n            serverVersion={this.props.serverVersion} /> :\r\n\r\n          (view === 'contacts' || view == 'archive' || view == 'blocked') ?\r\n          <ContactsView\r\n            tinode={this.props.tinode}\r\n            myUserId={this.props.myUserId}\r\n            connected={this.props.connected}\r\n            topicSelected={this.props.topicSelected}\r\n            archive={view == 'archive'}\r\n            blocked={view == 'blocked'}\r\n            chatList={this.props.chatList}\r\n            showContextMenu={this.props.showContextMenu}\r\n            onTopicSelected={this.props.onTopicSelected}\r\n            onShowArchive={this.props.onShowArchive} /> :\r\n\r\n          view === 'newtpk' ?\r\n          <NewTopicView\r\n            tinode={this.props.tinode}\r\n            searchResults={this.props.searchResults}\r\n            onInitFind={this.props.onInitFind}\r\n            onSearchContacts={this.props.onSearchContacts}\r\n            onCreateTopic={this.props.onCreateTopic}\r\n            onError={this.props.onError} /> :\r\n\r\n          view === 'cred' ?\r\n          <ValidationView\r\n            credCode={this.props.credCode}\r\n            credMethod={this.props.credMethod}\r\n            onSubmit={this.props.onValidateCredentials}\r\n            onCancel={this.props.onCancel}\r\n            onError={this.props.onError} /> :\r\n\r\n          view === 'reset' ?\r\n          <PasswordResetView\r\n            onRequest={this.props.onPasswordResetRequest}\r\n            onReset={this.props.onResetPassword} /> :\r\n          null}\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default injectIntl(SidepanelView);\r\n",
    "// The top-level class to hold all functionality together.\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\r\n\r\nimport * as firebase from 'firebase/app';\r\nimport 'firebase/messaging';\r\n\r\nimport Tinode from 'tinode-sdk';\r\n\r\nimport Alert from '../widgets/alert.jsx';\r\nimport ContextMenu from '../widgets/context-menu.jsx';\r\n\r\nimport InfoView from './info-view.jsx';\r\nimport MessagesView from './messages-view.jsx';\r\nimport SidepanelView from './sidepanel-view.jsx';\r\n\r\nimport { API_KEY, APP_NAME, DEFAULT_P2P_ACCESS_MODE, LOGGING_ENABLED,\r\n  MEDIA_BREAKPOINT, RECEIVED_DELAY } from '../config.js';\r\nimport { PACKAGE_VERSION } from '../version.js';\r\nimport { base64ReEncode, makeImageDataUrl } from '../lib/blob-helpers.js';\r\nimport { detectServerAddress, isLocalHost, isSecureConnection } from '../lib/host-name.js';\r\nimport LocalStorageUtil from '../lib/local-storage.js';\r\nimport HashNavigation from '../lib/navigation.js';\r\nimport { secondsToTime } from '../lib/strformat.js'\r\nimport { updateFavicon } from '../lib/utils.js';\r\n\r\n// Sound to play on message received.\r\nconst POP_SOUND = new Audio('audio/msg.mp3');\r\n\r\nconst messages = defineMessages({\r\n  reconnect_countdown: {\r\n    id: 'reconnect_countdown',\r\n    defaultMessage: 'Disconnected. Reconnecting in {seconds}',\r\n    description: 'Message shown when an app update is available.'\r\n  },\r\n  reconnect_now: {\r\n    id: 'reconnect_now',\r\n    defaultMessage: 'Try now',\r\n    description: 'Prompt for reconnecting now'\r\n  },\r\n  push_init_failed: {\r\n    id: 'push_init_failed',\r\n    defaultMessage: 'Failed to initialize push notifications',\r\n    description: 'Error message when push notifications have failed to initialize.'\r\n  },\r\n  invalid_security_token: {\r\n    id: 'invalid_security_token',\r\n    defaultMessage: 'Invalid security token',\r\n    description: 'Error message when resetting password.'\r\n  },\r\n  no_connection: {\r\n    id: 'no_connection',\r\n    defaultMessage: 'No connection',\r\n    description: 'Warning that the user is offline.'\r\n  },\r\n  code_doesnot_match: {\r\n    id: 'code_doesnot_match',\r\n    defaultMessage: 'Code does not match',\r\n    description: 'Error message when the credential validation code is incorrect.'\r\n  },\r\n  menu_item_info: {\r\n    id: 'menu_item_info',\r\n    defaultMessage: 'Info',\r\n    description: 'Show extended topic information'\r\n  }\r\n});\r\n\r\nclass TinodeWeb extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = this.getBlankState();\r\n\r\n    this.handleResize = this.handleResize.bind(this);\r\n    this.handleHashRoute = this.handleHashRoute.bind(this);\r\n    this.handleOnline = this.handleOnline.bind(this);\r\n    this.checkForAppUpdate = this.checkForAppUpdate.bind(this);\r\n    this.handleVisibilityEvent = this.handleVisibilityEvent.bind(this);\r\n    this.handleError = this.handleError.bind(this);\r\n    this.handleLoginRequest = this.handleLoginRequest.bind(this);\r\n    this.handlePersistenceChange = this.handlePersistenceChange.bind(this);\r\n    this.handleConnected = this.handleConnected.bind(this);\r\n    this.handleAutoreconnectIteration = this.handleAutoreconnectIteration.bind(this);\r\n    this.doLogin = this.doLogin.bind(this);\r\n    this.handleCredentialsRequest = this.handleCredentialsRequest.bind(this);\r\n    this.handleLoginSuccessful = this.handleLoginSuccessful.bind(this);\r\n    this.handleDisconnect = this.handleDisconnect.bind(this);\r\n    this.tnMeMetaDesc = this.tnMeMetaDesc.bind(this);\r\n    this.tnMeContactUpdate = this.tnMeContactUpdate.bind(this);\r\n    this.tnMeSubsUpdated = this.tnMeSubsUpdated.bind(this);\r\n    this.resetContactList = this.resetContactList.bind(this);\r\n    this.tnData = this.tnData.bind(this);\r\n    this.tnInitFind = this.tnInitFind.bind(this);\r\n    this.tnFndSubsUpdated = this.tnFndSubsUpdated.bind(this);\r\n    this.handleSearchContacts = this.handleSearchContacts.bind(this);\r\n    this.handleTopicSelected = this.handleTopicSelected.bind(this);\r\n    this.handleHideMessagesView = this.handleHideMessagesView.bind(this);\r\n    this.handleSendMessage = this.handleSendMessage.bind(this);\r\n    this.handleNewChatInvitation = this.handleNewChatInvitation.bind(this);\r\n    this.handleNewAccount = this.handleNewAccount.bind(this);\r\n    this.handleNewAccountRequest = this.handleNewAccountRequest.bind(this);\r\n    this.handleUpdateAccountRequest = this.handleUpdateAccountRequest.bind(this);\r\n    this.handleUpdateAccountTagsRequest = this.handleUpdateAccountTagsRequest.bind(this);\r\n    this.handleToggleIncognitoMode = this.handleToggleIncognitoMode.bind(this);\r\n    this.handleSettings = this.handleSettings.bind(this);\r\n    this.handleGlobalSettings = this.handleGlobalSettings.bind(this);\r\n    this.handleShowArchive = this.handleShowArchive.bind(this);\r\n    this.handleShowBlocked = this.handleShowBlocked.bind(this);\r\n    this.handleToggleMessageSounds = this.handleToggleMessageSounds.bind(this);\r\n    this.handleCredAdd = this.handleCredAdd.bind(this);\r\n    this.handleCredDelete = this.handleCredDelete.bind(this);\r\n    this.handleCredConfirm = this.handleCredConfirm.bind(this);\r\n    this.initFCMessaging = this.initFCMessaging.bind(this);\r\n    this.togglePushToken = this.togglePushToken.bind(this);\r\n    this.requestPushToken = this.requestPushToken.bind(this);\r\n    this.handlePushMessage = this.handlePushMessage.bind(this);\r\n    this.handleSidepanelCancel = this.handleSidepanelCancel.bind(this);\r\n    this.handleStartTopicRequest = this.handleStartTopicRequest.bind(this);\r\n    this.handleNewTopicCreated = this.handleNewTopicCreated.bind(this);\r\n    this.handleTopicUpdateRequest = this.handleTopicUpdateRequest.bind(this);\r\n    this.handleChangePermissions = this.handleChangePermissions.bind(this);\r\n    this.handleTagsUpdated = this.handleTagsUpdated.bind(this);\r\n    this.handleLogout = this.handleLogout.bind(this);\r\n    this.handleDeleteAccount = this.handleDeleteAccount.bind(this);\r\n    this.handleDeleteTopicRequest = this.handleDeleteTopicRequest.bind(this);\r\n    this.handleDeleteMessagesRequest = this.handleDeleteMessagesRequest.bind(this);\r\n    this.handleLeaveUnsubRequest = this.handleLeaveUnsubRequest.bind(this);\r\n    this.handleBlockTopicRequest = this.handleBlockTopicRequest.bind(this);\r\n    this.handleReportTopic = this.handleReportTopic.bind(this);\r\n    this.handleShowContextMenu = this.handleShowContextMenu.bind(this);\r\n    this.defaultTopicContextMenu = this.defaultTopicContextMenu.bind(this);\r\n    this.handleHideContextMenu = this.handleHideContextMenu.bind(this);\r\n    this.handleShowAlert = this.handleShowAlert.bind(this);\r\n    this.handleShowInfoView = this.handleShowInfoView.bind(this);\r\n    this.handleHideInfoView = this.handleHideInfoView.bind(this);\r\n    this.handleMemberUpdateRequest = this.handleMemberUpdateRequest.bind(this);\r\n    this.handleValidateCredentialsRequest = this.handleValidateCredentialsRequest.bind(this);\r\n    this.handlePasswordResetRequest = this.handlePasswordResetRequest.bind(this);\r\n    this.handleResetPassword = this.handleResetPassword.bind(this);\r\n    this.handleContextMenuAction = this.handleContextMenuAction.bind(this);\r\n  }\r\n\r\n  getBlankState() {\r\n    const settings = LocalStorageUtil.getObject('settings') || {};\r\n    const persist = !!LocalStorageUtil.getObject('keep-logged-in');\r\n\r\n    return {\r\n      connected: false,\r\n      // Connected and subscribed to 'me'\r\n      ready: false,\r\n      // Try to re-login on new connection.\r\n      autoLogin: false,\r\n      transport: settings.transport || null,\r\n      serverAddress: settings.serverAddress || detectServerAddress(),\r\n      serverVersion: \"no connection\",\r\n      // \"On\" is the default, so saving the \"off\" state.\r\n      messageSounds: !settings.messageSoundsOff,\r\n      incognitoMode: false,\r\n      desktopAlerts: persist && settings.desktopAlerts,\r\n      desktopAlertsEnabled: (isSecureConnection() || isLocalHost()) &&\r\n        (typeof firebase != 'undefined') && (typeof navigator != 'undefined') &&\r\n        (typeof FIREBASE_INIT != 'undefined'),\r\n      firebaseToken: persist ? LocalStorageUtil.getObject('firebase-token') : null,\r\n\r\n      applicationVisible: !document.hidden,\r\n\r\n      errorText: '',\r\n      errorLevel: null,\r\n      errorAction: undefined,\r\n      errorActionText: null,\r\n\r\n      sidePanelSelected: 'login',\r\n      sidePanelTitle: null,\r\n      sidePanelAvatar: null,\r\n      loadSpinnerVisible: false,\r\n\r\n      login: '',\r\n      password: '',\r\n      persist: persist,\r\n      myUserId: null,\r\n      liveConnection: navigator.onLine,\r\n      topicSelected: '',\r\n      topicSelectedOnline: false,\r\n      topicSelectedAcs: null,\r\n      newTopicParams: null,\r\n      loginDisabled: false,\r\n      displayMobile: (window.innerWidth <= MEDIA_BREAKPOINT),\r\n      showInfoPanel: false,\r\n      mobilePanel: 'sidepanel',\r\n\r\n      contextMenuVisible: false,\r\n      contextMenuBounds: null,\r\n      contextMenuClickAt: null,\r\n      contextMenuParams: null,\r\n      contextMenuItems: [],\r\n\r\n      // Modal alert dialog.\r\n      alertVisible: false,\r\n      alertParams: {},\r\n\r\n      // Chats as shown in the ContactsView\r\n      chatList: [],\r\n      // Contacts returned by a search query.\r\n      searchResults: [],\r\n      // Merged results of a search query and p2p chats.\r\n      searchableContacts: [],\r\n      credMethod: undefined,\r\n      credCode: undefined,\r\n      // Topic to go to after login.\r\n      requestedTopic: undefined\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('resize', this.handleResize);\r\n    window.addEventListener('online', (e) => { this.handleOnline(true); });\r\n    window.addEventListener('offline', (e) => { this.handleOnline(false); });\r\n    window.addEventListener('hashchange', this.handleHashRoute);\r\n\r\n    // Process background notifications from the service worker.\r\n    if (typeof BroadcastChannel == 'function') {\r\n      const serviceWorkerChannel = new BroadcastChannel('tinode-sw');\r\n      serviceWorkerChannel.addEventListener('message', this.handlePushMessage);\r\n    } else {\r\n      // Safari is broken by design.\r\n      console.warn('Your browser does not support BroadcastChannel. Some features will not be available');\r\n    }\r\n\r\n    // Window/tab visible or invisible for pausing timers.\r\n    document.addEventListener('visibilitychange', this.handleVisibilityEvent);\r\n\r\n    this.setState({\r\n      viewportWidth: document.documentElement.clientWidth,\r\n      viewportHeight: document.documentElement.clientHeight\r\n    });\r\n\r\n    new Promise((resolve, reject) => {\r\n      this.tinode = TinodeWeb.tnSetup(this.state.serverAddress, this.state.transport,\r\n        this.props.intl.locale, this.state.persist, resolve);\r\n      this.tinode.onConnect = this.handleConnected;\r\n      this.tinode.onDisconnect = this.handleDisconnect;\r\n      this.tinode.onAutoreconnectIteration = this.handleAutoreconnectIteration;\r\n    }).then(() => {\r\n      // Initialize desktop alerts.\r\n      if (this.state.desktopAlertsEnabled) {\r\n        this.initFCMessaging().then(() => {\r\n          if (this.state.desktopAlerts) {\r\n            if (!this.state.firebaseToken) {\r\n              this.togglePushToken(true);\r\n            } else {\r\n              this.tinode.setDeviceToken(this.state.firebaseToken);\r\n            }\r\n          }\r\n        }).catch(() => {\r\n          // do nothing: handled earlier.\r\n          // catch needed to pervent unnecessary logging of error.\r\n        });\r\n      }\r\n\r\n      // Parse and save the hash navigation params.\r\n      const parsedNav = HashNavigation.parseUrlHash(window.location.hash);\r\n\r\n      // Read contacts from cache.\r\n      this.resetContactList();\r\n\r\n      const token = this.state.persist ? LocalStorageUtil.getObject('auth-token') : undefined;\r\n      if (token) {\r\n        this.setState({autoLogin: true});\r\n\r\n        // When reading from storage, date is returned as string.\r\n        token.expires = new Date(token.expires);\r\n        this.tinode.setAuthToken(token);\r\n        this.tinode.connect().catch((err) => {\r\n          // Socket error\r\n          this.handleError(err.message, 'err');\r\n        });\r\n      }\r\n\r\n      // Save possible topic name and navigate to blank state.\r\n      this.setState({requestedTopic: parsedNav.path[1]});\r\n      HashNavigation.navigateTo('');\r\n\r\n      this.readTimer = null;\r\n      this.readTimerCallback = null;\r\n\r\n      this.handleHashRoute();\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.handleResize);\r\n    window.removeEventListener('hashchange', this.handleHashRoute);\r\n    document.removeEventListener('visibilitychange', this.handleVisibilityEvent);\r\n  }\r\n\r\n  // Setup transport (usually websocket) and server address. This will terminate connection with the server.\r\n  static tnSetup(serverAddress, transport, locale, persistentCache, onSetupCompleted) {\r\n    const tinode = new Tinode({appName: APP_NAME, host: serverAddress, apiKey: API_KEY, transport: transport,\r\n      secure: isSecureConnection(), persist: persistentCache}, onSetupCompleted);\r\n    tinode.setHumanLanguage(locale);\r\n    tinode.enableLogging(LOGGING_ENABLED, true);\r\n    return tinode;\r\n  }\r\n\r\n  // Notifiy Tinode that a push message was received from the server.\r\n  handlePushMessage(data) {\r\n    if (data.what == 'msg' && Tinode.isChannelTopicName(data.topic)) {\r\n      // The last argument is a fake user Id: otherwise the update is seen as one from the current user.\r\n      this.tinode.oobNotification(data.topic, data.seq, 'fake-uid');\r\n    }\r\n  }\r\n\r\n  initFCMessaging() {\r\n    const {formatMessage, locale} = this.props.intl;\r\n    const onError = (msg, err) => {\r\n      console.error(msg, err);\r\n      this.handleError(formatMessage(messages.push_init_failed), 'err');\r\n      this.setState({desktopAlertsEnabled: false});\r\n    }\r\n\r\n    try {\r\n      this.fbPush = firebase.initializeApp(FIREBASE_INIT, APP_NAME).messaging();\r\n      this.fbPush.usePublicVapidKey(FIREBASE_INIT.messagingVapidKey);\r\n\r\n      return navigator.serviceWorker.register('/service-worker.js').then((reg) => {\r\n        this.checkForAppUpdate(reg);\r\n        this.fbPush.useServiceWorker(reg);\r\n        reg.active.postMessage(JSON.stringify({locale: locale, version: PACKAGE_VERSION}));\r\n\r\n        // Google could not be bothered to mention that onTokenRefresh is never called.\r\n        this.fbPush.onTokenRefresh(() => {\r\n          this.requestPushToken();\r\n        });\r\n\r\n        // Handhe FCM pushes\r\n        // (a) for channels always,\r\n        // (b) pushes when the app is in foreground but has not focus.\r\n        this.fbPush.onMessage(payload => { this.handlePushMessage(payload.data); });\r\n\r\n        return reg;\r\n      }).catch((err) => {\r\n        // registration failed :(\r\n        onError(\"Failed to register service worker:\", err);\r\n        return Promise.reject(err);\r\n      });\r\n    } catch (err) {\r\n      onError(\"Failed to initialize push notifications\", err);\r\n      return Promise.reject(err);\r\n    }\r\n  }\r\n\r\n  handleResize() {\r\n    const mobile = document.documentElement.clientWidth <= MEDIA_BREAKPOINT;\r\n    this.setState({\r\n      viewportWidth: document.documentElement.clientWidth,\r\n      viewportHeight: document.documentElement.clientHeight\r\n    });\r\n    if (this.state.displayMobile != mobile) {\r\n      this.setState({displayMobile: mobile});\r\n    }\r\n  }\r\n\r\n  // Check if a newer version of TinodeWeb app is available at the server.\r\n  checkForAppUpdate(reg) {\r\n    reg.onupdatefound = () => {\r\n      const installingWorker = reg.installing;\r\n      installingWorker.onstatechange = () => {\r\n        if (installingWorker.state == 'installed' && navigator.serviceWorker.controller) {\r\n          const msg = <>\r\n            <FormattedMessage id=\"update_available\"\r\n              defaultMessage=\"Update available.\"\r\n              description=\"Message shown when an app update is available.\" /> <a href=\"\">\r\n              <FormattedMessage id=\"reload_update\"\r\n                defaultMessage=\"Reload\"\r\n                description=\"Call to action to reload application when update is available.\" />\r\n            </a>.</>;\r\n          this.handleError(msg, 'info');\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Handle for hashchange event: display appropriate panels.\r\n  handleHashRoute() {\r\n    const hash = HashNavigation.parseUrlHash(window.location.hash);\r\n    if (hash.path && hash.path.length > 0) {\r\n      // Left-side panel selector.\r\n      if (['register','settings','edit','notif','security','support','general',\r\n          'cred','reset','newtpk','archive','blocked','contacts',''].includes(hash.path[0])) {\r\n        this.setState({sidePanelSelected: hash.path[0]});\r\n      } else {\r\n        console.warn(\"Unknown sidepanel view\", hash.path[0]);\r\n      }\r\n\r\n      // Topic for MessagesView selector.\r\n      let topicName = hash.path[1] || null;\r\n      if (topicName != this.state.topicSelected) {\r\n        if (!Tinode.topicType(topicName)) {\r\n          // Clear invalid topic name.\r\n          topicName = null;\r\n        }\r\n        const newState = {\r\n          topicSelected: topicName\r\n        };\r\n        const acs = this.tinode.getTopicAccessMode(topicName);\r\n        if (acs) {\r\n          newState.topicSelectedAcs = acs;\r\n        }\r\n        this.setState(newState);\r\n      }\r\n    } else {\r\n      // Empty hashpath\r\n      this.setState({sidePanelSelected: '', topicSelected: null});\r\n    }\r\n\r\n    // Save validation credentials, if available.\r\n    if (hash.params.method) {\r\n      this.setState({ credMethod: hash.params.method });\r\n    }\r\n    if (hash.params.code) {\r\n      this.setState({ credCode: hash.params.code });\r\n    }\r\n\r\n    // Additional parameters of panels.\r\n    this.setState({\r\n      showInfoPanel: hash.params.info,\r\n      newTopicTabSelected: hash.params.tab\r\n    });\r\n  }\r\n\r\n  handleOnline(online) {\r\n    if (online) {\r\n      this.handleError();\r\n      clearInterval(this.reconnectCountdown);\r\n      this.tinode.reconnect();\r\n    } else {\r\n      this.handleError(this.props.intl.formatMessage(messages.no_connection), 'warn');\r\n    }\r\n    this.setState({liveConnection: online});\r\n  }\r\n\r\n  handleVisibilityEvent() {\r\n    this.setState({applicationVisible: !document.hidden});\r\n  }\r\n\r\n  handleError(err, level, action, actionText) {\r\n    this.setState({errorText: err, errorLevel: level, errorAction: action, errorActionText: actionText});\r\n  }\r\n\r\n  // User clicked Login button in the side panel.\r\n  handleLoginRequest(login, password, token, id_device) {\r\n    this.setState({\r\n      loginDisabled: true,\r\n      login: login,\r\n      password: password,\r\n      token: token,\r\n      id_device: id_device,\r\n      loadSpinnerVisible: true,\r\n      autoLogin: true\r\n    });\r\n    this.handleError('', null);\r\n\r\n    if (this.tinode.isConnected()) {\r\n      this.doLogin(login, password, token, id_device, {meth: this.state.credMethod, resp: this.state.credCode});\r\n    } else {\r\n      this.tinode.connect().catch((err) => {\r\n        // Socket error\r\n        this.setState({loginDisabled: false, autoLogin: false, loadSpinnerVisible: false});\r\n        this.handleError(err.message, 'err');\r\n      });\r\n    }\r\n  }\r\n\r\n  // Enable or disable saving the password and IndexedDB.\r\n  handlePersistenceChange(persist) {\r\n    if (persist) {\r\n      this.tinode.initStorage().then(() => {\r\n        LocalStorageUtil.setObject('keep-logged-in', true);\r\n        this.setState({persist: true});\r\n      });\r\n    } else {\r\n      this.tinode.clearStorage().then(() => {\r\n        LocalStorageUtil.setObject('keep-logged-in', false);\r\n        this.setState({persist: false});\r\n      });\r\n    }\r\n  }\r\n\r\n  // Connection succeeded.\r\n  handleConnected() {\r\n    // Just to be sure.\r\n    clearInterval(this.reconnectCountdown);\r\n    this.handleError();\r\n\r\n    const params = this.tinode.getServerInfo();\r\n    this.setState({\r\n      serverVersion: params.ver + ' ' + (params.build ? params.build : 'none')\r\n    });\r\n\r\n    if (this.state.autoLogin) {\r\n      this.doLogin(this.state.login, this.state.password, this.state.token, this.state.id_device, {meth: this.state.credMethod, resp: this.state.credCode});\r\n    }\r\n  }\r\n\r\n  // Called for each auto-reconnect iteration.\r\n  handleAutoreconnectIteration(sec, prom) {\r\n    clearInterval(this.reconnectCountdown);\r\n\r\n    if (sec < 0) {\r\n      // Clear error\r\n      this.handleError();\r\n      return;\r\n    }\r\n\r\n    if (prom) {\r\n      // Reconnecting now\r\n      prom.then(() => {\r\n        // Reconnected: clear error\r\n        this.handleError();\r\n      }).catch((err) => {\r\n        this.handleError(err.message, 'err');\r\n      });\r\n      return;\r\n    }\r\n\r\n    const {formatMessage} = this.props.intl;\r\n    let count = sec / 1000;\r\n    count = count | count;\r\n    this.reconnectCountdown = setInterval(() => {\r\n      const timeLeft = (count > 99) ? secondsToTime(count) : count;\r\n      this.handleError(\r\n        formatMessage(messages.reconnect_countdown, {seconds: timeLeft}),\r\n        'warn',\r\n        () => {\r\n          clearInterval(this.reconnectCountdown);\r\n          this.tinode.reconnect();\r\n        },\r\n        formatMessage(messages.reconnect_now)\r\n      );\r\n      count -= 1;\r\n    }, 1000);\r\n  }\r\n\r\n  // Connection lost\r\n  handleDisconnect(err) {\r\n    this.setState({\r\n      connected: false,\r\n      ready: false,\r\n      topicSelectedOnline: false,\r\n      errorText: err && err.message ? err.message : \"Disconnected\",\r\n      errorLevel: err && err.message ? 'err' : 'warn',\r\n      loginDisabled: false,\r\n      contextMenuVisible: false,\r\n      serverVersion: \"no connection\"\r\n    });\r\n  }\r\n\r\n  doLogin(login, password, access_token, id_device, cred) {\r\n      if (this.tinode.isAuthenticated()) {\r\n      // Already logged in. Go to default screen.\r\n      HashNavigation.navigateTo('');\r\n      return;\r\n    }\r\n    // Sanitize and package credentail.\r\n    cred = Tinode.credential(cred);\r\n    // Try to login with login/password. If they are not available, try token. If no token, ask for login/password.\r\n    let promise = null;\r\n    const token = this.tinode.getAuthToken();\r\n    if (login && password) {\r\n      this.setState({password: null});\r\n      promise = this.tinode.loginBasic(login, password, cred);\r\n\r\n      //token from login\r\n      localStorage.setItem('access_token', access_token);\r\n      localStorage.setItem('id_device', id_device);\r\n      \r\n    } else if (token) {\r\n      promise = this.tinode.loginToken(token.token, cred);\r\n\r\n      //token from login\r\n      localStorage.setItem('access_token', access_token);\r\n      localStorage.setItem('id_device', id_device);\r\n    }\r\n\r\n    if (promise) {\r\n      promise.then((ctrl) => {\r\n        if (ctrl.code >= 300 && ctrl.text === 'validate credentials') {\r\n          this.setState({loadSpinnerVisible: false});\r\n          if (cred) {\r\n            this.handleError(this.props.intl.formatMessage(messages.code_doesnot_match), 'warn');\r\n          }\r\n          this.handleCredentialsRequest(ctrl.params);\r\n        } else {\r\n          this.handleLoginSuccessful();\r\n        }\r\n      }).catch((err) => {\r\n        // Login failed, report error.\r\n        this.setState({\r\n          loginDisabled: false,\r\n          credMethod: undefined,\r\n          credCode: undefined,\r\n          loadSpinnerVisible: false,\r\n          autoLogin: false\r\n        });\r\n        this.handleError(err.message, 'err');\r\n        localStorage.removeItem('auth-token');\r\n        HashNavigation.navigateTo('');\r\n\r\n        //token from login\r\n      localStorage.setItem('access_token', null);\r\n      localStorage.setItem('id_device', null);\r\n      });\r\n    } else {\r\n      // No login credentials provided.\r\n      // Make sure we are on the login page.\r\n      HashNavigation.navigateTo('');\r\n      this.setState({loginDisabled: false});\r\n    }\r\n  }\r\n\r\n  handleCredentialsRequest(params) {\r\n    const parsed = HashNavigation.parseUrlHash(window.location.hash);\r\n    parsed.path[0] = 'cred';\r\n    parsed.params['method'] = params.cred[0];\r\n    HashNavigation.navigateTo(HashNavigation.composeUrlHash(parsed.path, parsed.params));\r\n  }\r\n\r\n  handleLoginSuccessful() {\r\n    this.handleError();\r\n\r\n    // Refresh authentication token.\r\n    if (LocalStorageUtil.getObject('keep-logged-in')) {\r\n      LocalStorageUtil.setObject('auth-token', this.tinode.getAuthToken());\r\n    }\r\n\r\n    const goToTopic = this.state.requestedTopic;\r\n    // Logged in fine, subscribe to 'me' attaching callbacks from the contacts view.\r\n    const me = this.tinode.getMeTopic();\r\n    me.onMetaDesc = this.tnMeMetaDesc;\r\n    me.onContactUpdate = this.tnMeContactUpdate;\r\n    me.onSubsUpdated = this.tnMeSubsUpdated;\r\n    this.setState({\r\n      connected: true,\r\n      credMethod: undefined,\r\n      credCode: undefined,\r\n      myUserId: this.tinode.getCurrentUserID(),\r\n      autoLogin: true,\r\n      requestedTopic: undefined,\r\n    });\r\n    // Subscribe, fetch topic desc, the list of subscriptions. Messages are not fetched.\r\n    me.subscribe(\r\n      me.startMetaQuery().\r\n        withLaterSub().\r\n        withDesc().\r\n        withTags().\r\n        withCred().\r\n        build()\r\n      ).catch((err) => {\r\n        this.tinode.disconnect();\r\n        localStorage.removeItem('auth-token');\r\n        this.handleError(err.message, 'err');\r\n        HashNavigation.navigateTo('');\r\n      }).finally(() => {\r\n        this.setState({loadSpinnerVisible: false});\r\n      });\r\n    let urlHash = HashNavigation.setUrlSidePanel(window.location.hash, 'contacts');\r\n    if (goToTopic) {\r\n      urlHash = HashNavigation.setUrlTopic(urlHash, goToTopic);\r\n    }\r\n    HashNavigation.navigateTo(urlHash);\r\n  }\r\n\r\n  tnMeMetaDesc(desc) {\r\n    if (desc) {\r\n      if (desc.public) {\r\n        this.setState({\r\n          sidePanelTitle: desc.public.fn,\r\n          sidePanelAvatar: makeImageDataUrl(desc.public.photo)\r\n        });\r\n      }\r\n      if (desc.acs) {\r\n        this.setState({\r\n          incognitoMode: !desc.acs.isPresencer()\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  // Reactions to updates to the contact list.\r\n  tnMeContactUpdate(what, cont) {\r\n    if (what == 'on' || what == 'off') {\r\n      this.resetContactList();\r\n      if (this.state.topicSelected == cont.topic) {\r\n        this.setState({topicSelectedOnline: (what == 'on')});\r\n      }\r\n    } else if (what == 'read') {\r\n      this.resetContactList();\r\n    } else if (what == 'msg') {\r\n      // Check if the topic is archived. If so, don't play a sound.\r\n      const topic = this.tinode.getTopic(cont.topic);\r\n      const archived = topic && topic.isArchived();\r\n\r\n      // New message received. Maybe the message is from the current user, then unread is 0.\r\n      if (cont.unread > 0 && this.state.messageSounds && !archived) {\r\n        // Skip update if the topic is currently open, otherwise the badge will annoyingly flash.\r\n        if (document.hidden || this.state.topicSelected != cont.topic) {\r\n          POP_SOUND.play();\r\n        }\r\n      }\r\n      // Reorder contact list to use possibly updated 'touched'.\r\n      this.resetContactList();\r\n    } else if (what == 'recv') {\r\n      // Explicitly ignoring \"recv\" -- it causes no visible updates to contact list.\r\n    } else if (what == 'gone' || what == 'unsub') {\r\n      // Topic deleted or user unsubscribed. Remove topic from view.\r\n      // If the currently selected topic is gone, clear the selection.\r\n      if (this.state.topicSelected == cont.topic) {\r\n        this.handleTopicSelected(null);\r\n      }\r\n      // Redraw without the deleted topic.\r\n      this.resetContactList();\r\n    } else if (what == 'acs') {\r\n      // Permissions changed. If it's for the currently selected topic,\r\n      // update the views.\r\n      if (this.state.topicSelected == cont.topic) {\r\n        this.setState({topicSelectedAcs: cont.acs});\r\n      }\r\n    } else if (what == 'del') {\r\n      // TODO: messages deleted (hard or soft) -- update pill counter.\r\n    } else if (what == 'upd') {\r\n      // upd - handled by the SDK. Explicitly ignoring here.\r\n    } else {\r\n      // TODO(gene): handle other types of notifications:\r\n      // * ua -- user agent changes (maybe display a pictogram for mobile/desktop).\r\n      console.info(\"Unsupported (yet) presence update:\" + what + \" in: \" + cont.topic);\r\n    }\r\n  }\r\n\r\n  tnMeSubsUpdated(unused) {\r\n    this.resetContactList();\r\n  }\r\n\r\n  // Merge search results and contact list to create a single flat\r\n  // list of known contacts for GroupManager to use.\r\n  static prepareSearchableContacts(chatList, foundContacts) {\r\n    const merged = {};\r\n\r\n    // For chatList topics merge only p2p topics and convert them to the\r\n    // same format as foundContacts.\r\n    for (const c of chatList) {\r\n      if (Tinode.isP2PTopicName(c.topic)) {\r\n          merged[c.topic] = {\r\n            user: c.topic,\r\n            updated: c.updated,\r\n            public: c.public,\r\n            private: c.private,\r\n            acs: c.acs\r\n          };\r\n      }\r\n    }\r\n\r\n    // Add all foundCountacts if they have not been added already.\r\n    for (const c of foundContacts) {\r\n      if (!merged[c.user]) {\r\n        merged[c.user] = c;\r\n      }\r\n    }\r\n\r\n    return Object.values(merged);\r\n  }\r\n\r\n  resetContactList() {\r\n    const newState = {\r\n      chatList: []\r\n    };\r\n\r\n    if (!this.state.ready) {\r\n      newState.ready = true;\r\n    }\r\n\r\n    this.tinode.getMeTopic().contacts((c) => {\r\n      if (!c.topic && !c.user) {\r\n        // Contacts expect c.topic to be set.\r\n        c.topic = c.name;\r\n      }\r\n      newState.chatList.push(c);\r\n      if (this.state.topicSelected == c.topic) {\r\n        newState.topicSelectedOnline = c.online;\r\n        newState.topicSelectedAcs = c.acs;\r\n      }\r\n    });\r\n\r\n    const past = new Date(0);\r\n    newState.chatList.sort((a, b) => {\r\n      return (a.touched || past).getTime() - (b.touched || past).getTime();\r\n    });\r\n\r\n    // Merge search results and chat list.\r\n    newState.searchableContacts = TinodeWeb.prepareSearchableContacts(newState.chatList, this.state.searchResults);\r\n    this.setState(newState);\r\n  }\r\n\r\n  // Sending \"received\" notifications\r\n  tnData(data) {\r\n    const topic = this.tinode.getTopic(data.topic);\r\n    if (topic.msgStatus(data, true) >= Tinode.MESSAGE_STATUS_SENT && data.from != this.state.myUserId) {\r\n      clearTimeout(this.receivedTimer);\r\n      this.receivedTimer = setTimeout(() => {\r\n        this.receivedTimer = undefined;\r\n        topic.noteRecv(data.seq);\r\n      }, RECEIVED_DELAY);\r\n    }\r\n  }\r\n\r\n  /* Fnd topic: find contacts by tokens */\r\n  tnInitFind() {\r\n    const fnd = this.tinode.getFndTopic();\r\n    fnd.onSubsUpdated = this.tnFndSubsUpdated;\r\n    if (fnd.isSubscribed()) {\r\n      this.tnFndSubsUpdated();\r\n    } else {\r\n      fnd.subscribe(fnd.startMetaQuery().withSub().build()).catch((err) => {\r\n        this.handleError(err.message, 'err');\r\n      });\r\n    }\r\n  }\r\n\r\n  tnFndSubsUpdated() {\r\n    const foundContacts = [];\r\n    // Don't attempt to create P2P topics which already exist. Server will reject the duplicates.\r\n    this.tinode.getFndTopic().contacts((s) => {\r\n      foundContacts.push(s);\r\n    });\r\n    this.setState({\r\n      searchResults: foundContacts,\r\n      searchableContacts: TinodeWeb.prepareSearchableContacts(this.state.chatList, foundContacts)\r\n    });\r\n  }\r\n\r\n  /** Called when the user enters a contact into the contact search field in the NewAccount panel\r\n    @param query {Array} is an array of contacts to search for\r\n   */\r\n  handleSearchContacts(query) {\r\n    const fnd = this.tinode.getFndTopic();\r\n    fnd.setMeta({desc: {public: query}}).then((ctrl) => {\r\n      return fnd.getMeta(fnd.startMetaQuery().withSub().build());\r\n    }).catch((err) => {\r\n      this.handleError(err.message, 'err');\r\n    });\r\n  }\r\n\r\n  // User clicked on a contact in the side panel or deleted a contact.\r\n  handleTopicSelected(topicName) {\r\n    // Clear newTopicParams after use.\r\n    if (this.state.newTopicParams && this.state.newTopicParams._topicName != topicName) {\r\n      this.setState({\r\n        newTopicParams: null\r\n      });\r\n    }\r\n\r\n    if (topicName) {\r\n      this.setState({\r\n        errorText: '',\r\n        errorLevel: null,\r\n        mobilePanel: 'topic-view',\r\n        showInfoPanel: false\r\n      });\r\n      // Different contact selected.\r\n      if (this.state.topicSelected != topicName) {\r\n        this.setState({\r\n          topicSelectedOnline: this.tinode.isTopicOnline(topicName),\r\n          topicSelectedAcs: this.tinode.getTopicAccessMode(topicName)\r\n        });\r\n        HashNavigation.navigateTo(HashNavigation.setUrlTopic('', topicName));\r\n      }\r\n    } else {\r\n      // Currently selected contact deleted\r\n      this.setState({\r\n        errorText: '',\r\n        errorLevel: null,\r\n        mobilePanel: 'sidepanel',\r\n        topicSelectedOnline: false,\r\n        topicSelectedAcs: null,\r\n        showInfoPanel: false\r\n      });\r\n\r\n      HashNavigation.navigateTo(HashNavigation.setUrlTopic('', null));\r\n    }\r\n  }\r\n\r\n  // In mobile view user requested to show sidepanel\r\n  handleHideMessagesView() {\r\n    this.setState({\r\n      mobilePanel: 'sidepanel'\r\n    });\r\n    HashNavigation.navigateTo(HashNavigation.setUrlTopic(window.location.hash, null));\r\n  }\r\n\r\n  // User is sending a message, either plain text or a drafty object, possibly\r\n  // with attachments.\r\n  //  - msg - Drafty message with content\r\n  //  - promise - Promise to be resolved when the upload is completed\r\n  //  - uploader - for tracking progress\r\n  handleSendMessage(msg, promise, uploader) {\r\n    const topic = this.tinode.getTopic(this.state.topicSelected);\r\n\r\n    msg = topic.createMessage(msg, false);\r\n    // The uploader is used to show progress.\r\n    msg._uploader = uploader;\r\n\r\n    if (!topic.isSubscribed()) {\r\n      if (!promise) {\r\n        promise = Promise.resolve();\r\n      }\r\n      promise = promise.then(() => { return topic.subscribe(); });\r\n    }\r\n\r\n    if (promise) {\r\n      promise = promise.catch((err) => {\r\n        this.handleError(err.message, 'err');\r\n      });\r\n    }\r\n\r\n    topic.publishDraft(msg, promise)\r\n      .then((ctrl) => {\r\n        if (topic.isArchived()) {\r\n          return topic.archive(false);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        this.handleError(err.message, 'err');\r\n      });\r\n  }\r\n\r\n  handleNewChatInvitation(topicName, action) {\r\n    const topic = this.tinode.getTopic(topicName);\r\n    let response = null;\r\n    switch (action) {\r\n      case 'accept':\r\n        // Accept given permissions.\r\n        const mode = topic.getAccessMode().getGiven();\r\n        response = topic.setMeta({sub: {mode: mode}});\r\n        if (topic.isP2PType()) {\r\n          // For P2P topics change 'given' permission of the peer too.\r\n          // In p2p topics the other user has the same name as the topic.\r\n          response = response.then((ctrl) => {\r\n            topic.setMeta({sub: {user: topicName, mode: mode}});\r\n          });\r\n        }\r\n        break;\r\n      case 'delete':\r\n        // Ignore invitation by deleting it.\r\n        response = topic.delTopic(true);\r\n        break;\r\n      case 'block':\r\n        // Ban the topic making futher invites impossible.\r\n        // Just self-ban.\r\n        const am = topic.getAccessMode().updateWant('-JP').getWant();\r\n        response = topic.setMeta({sub: {mode: am}}).then((ctrl) => {\r\n          return this.handleTopicSelected(null);\r\n        });\r\n        break;\r\n      default:\r\n        console.warn(\"Unknown invitation action\", '\"' + action + '\"\"');\r\n    }\r\n\r\n    if (response != null) {\r\n      response.catch((err) => {\r\n        this.handleError(err.message, 'err');\r\n      });\r\n    }\r\n  }\r\n\r\n  // User chose a Sign Up menu item.\r\n  handleNewAccount() {\r\n    this.handleError();\r\n\r\n    HashNavigation.navigateTo(HashNavigation.setUrlSidePanel(window.location.hash, 'register'));\r\n  }\r\n\r\n  // Actual registration of a new account.\r\n  handleNewAccountRequest(login_, password_, public_, cred_, tags_) {\r\n    // Clear old error, if any.\r\n    this.handleError();\r\n\r\n    this.tinode.connect(this.state.serverAddress)\r\n      .then(() => {\r\n        return this.tinode.createAccountBasic(login_, password_,\r\n          {public: public_, tags: tags_, cred: Tinode.credential(cred_)});\r\n      }).then((ctrl) => {\r\n        if (ctrl.code >= 300 && ctrl.text == 'validate credentials') {\r\n          this.handleCredentialsRequest(ctrl.params);\r\n        } else {\r\n          this.handleLoginSuccessful(this);\r\n        }\r\n      }).catch((err) => {\r\n        this.handleError(err.message, 'err');\r\n      });\r\n  }\r\n\r\n  handleUpdateAccountRequest(password, pub, defacs) {\r\n    this.handleError();\r\n\r\n    if (pub || defacs) {\r\n      const params = {};\r\n      if (pub) {\r\n        params.public = pub;\r\n      }\r\n      if (defacs) {\r\n        params.defacs = defacs;\r\n      }\r\n      this.tinode.getMeTopic().setMeta({desc: params}).catch((err) => {\r\n        this.handleError(err.message, 'err');\r\n      });\r\n    }\r\n    if (password) {\r\n      this.tinode.updateAccountBasic(null, this.tinode.getCurrentLogin(), password).catch((err) => {\r\n        this.handleError(err.message, 'err');\r\n      });\r\n    }\r\n  }\r\n\r\n  handleToggleIncognitoMode(on) {\r\n    const me = this.tinode.getMeTopic();\r\n    const am = me.getAccessMode().updateWant(on ? '-P' : '+P').getWant();\r\n    me.setMeta({sub: {mode: am}}).catch((err) => {\r\n      this.handleError(err.message, 'err');\r\n    });\r\n  }\r\n\r\n  handleUpdateAccountTagsRequest(tags) {\r\n    this.tinode.getMeTopic().setMeta({tags: tags})\r\n      .catch((err) => {\r\n        this.handleError(err.message, 'err');\r\n      });\r\n  }\r\n\r\n  // User chose Settings menu item.\r\n  handleSettings() {\r\n    this.handleError();\r\n\r\n    HashNavigation.navigateTo(HashNavigation.setUrlSidePanel(window.location.hash,\r\n      this.state.myUserId ? 'edit' : 'settings'));\r\n  }\r\n\r\n  // User updated global parameters.\r\n  handleGlobalSettings(settings) {\r\n    const serverAddress = settings.serverAddress || this.state.serverAddress;\r\n    const transport = settings.transport || this.state.transport;\r\n    if (this.tinode) {\r\n      this.tinode.clearStorage();\r\n      this.tinode.onDisconnect = undefined;\r\n      this.tinode.disconnect();\r\n    }\r\n    this.tinode = TinodeWeb.tnSetup(serverAddress, transport, this.props.intl.locale,\r\n      LocalStorageUtil.getObject('keep-logged-in'));\r\n    this.tinode.onConnect = this.handleConnected;\r\n    this.tinode.onDisconnect = this.handleDisconnect;\r\n    this.tinode.onAutoreconnectIteration = this.handleAutoreconnectIteration;\r\n\r\n    this.setState({\r\n      serverAddress: serverAddress,\r\n      transport: transport\r\n    });\r\n    LocalStorageUtil.setObject('settings', {\r\n      serverAddress: serverAddress,\r\n      transport: transport\r\n    });\r\n\r\n    HashNavigation.navigateTo(HashNavigation.setUrlSidePanel(window.location.hash, ''));\r\n  }\r\n\r\n  // User chose 'Archived chats'.\r\n  handleShowArchive() {\r\n    HashNavigation.navigateTo(HashNavigation.setUrlSidePanel(window.location.hash,\r\n      this.state.myUserId ? 'archive' : ''));\r\n  }\r\n\r\n  // User viewes 'Blocked chats'.\r\n  handleShowBlocked() {\r\n    HashNavigation.navigateTo(HashNavigation.setUrlSidePanel(window.location.hash,\r\n      this.state.myUserId ? 'blocked' : ''));\r\n  }\r\n\r\n  togglePushToken(enabled) {\r\n    if (enabled) {\r\n      if (!this.state.firebaseToken) {\r\n        const fcm = this.fbPush ?\r\n          Promise.resolve() :\r\n          this.initFCMessaging();\r\n        fcm.then(() => {\r\n          return this.fbPush.requestPermission();\r\n        }).then(() => {\r\n          this.requestPushToken();\r\n        }).catch((err) => {\r\n          console.warn(\"Failed to get notification permission.\", err);\r\n          this.handleError(err.message, 'err');\r\n          this.setState({desktopAlerts: false, firebaseToken: null});\r\n          LocalStorageUtil.updateObject('settings', {desktopAlerts: false});\r\n        });\r\n      } else {\r\n        this.setState({desktopAlerts: true});\r\n        if (LocalStorageUtil.getObject('keep-logged-in')) {\r\n          LocalStorageUtil.updateObject('settings', {desktopAlerts: true});\r\n        }\r\n      }\r\n    } else if (this.state.firebaseToken && this.fbPush) {\r\n      this.fbPush.deleteToken(this.state.firebaseToken).catch((err) => {\r\n        console.warn(\"Unable to delete token.\", err);\r\n      }).finally(() => {\r\n        LocalStorageUtil.updateObject('settings', {desktopAlerts: false});\r\n        localStorage.removeItem('firebase-token');\r\n        this.setState({desktopAlerts: false, firebaseToken: null});\r\n        // Inform the server that the token was deleted.\r\n        this.tinode.setDeviceToken(null);\r\n      });\r\n    } else {\r\n      this.setState({desktopAlerts: false, firebaseToken: null});\r\n      LocalStorageUtil.updateObject('settings', {desktopAlerts: false});\r\n    }\r\n  }\r\n\r\n  requestPushToken() {\r\n    this.fbPush.getToken().then((refreshedToken) => {\r\n      const persist = LocalStorageUtil.getObject('keep-logged-in');\r\n      if (refreshedToken != this.state.firebaseToken) {\r\n        this.tinode.setDeviceToken(refreshedToken);\r\n        if (persist) {\r\n          LocalStorageUtil.setObject('firebase-token', refreshedToken);\r\n        }\r\n      }\r\n      this.setState({firebaseToken: refreshedToken, desktopAlerts: true});\r\n      if (persist) {\r\n        LocalStorageUtil.updateObject('settings', {desktopAlerts: true});\r\n      }\r\n    }).catch((err) => {\r\n      this.handleError(err.message, 'err');\r\n      console.warn(\"Failed to retrieve firebase token\", err);\r\n    });\r\n  }\r\n\r\n  handleToggleMessageSounds(enabled) {\r\n    this.setState({messageSounds: enabled});\r\n    LocalStorageUtil.updateObject('settings', {\r\n      messageSoundsOff: !enabled\r\n    });\r\n  }\r\n\r\n  handleCredAdd(method, value) {\r\n    const me = this.tinode.getMeTopic();\r\n    me.setMeta({cred: {meth: method, val: value}}).catch((err) => {\r\n      this.handleError(err.message, 'err');\r\n    });\r\n  }\r\n\r\n  handleCredDelete(method, value) {\r\n    const me = this.tinode.getMeTopic();\r\n    me.delCredential(method, value).catch((err) => {\r\n      this.handleError(err.message, 'err');\r\n    });\r\n  }\r\n\r\n  handleCredConfirm(method, response) {\r\n    this.handleCredentialsRequest({cred: [method]});\r\n  }\r\n\r\n  // User clicked Cancel button in Setting or Sign Up panel.\r\n  handleSidepanelCancel() {\r\n    const parsed = HashNavigation.parseUrlHash(window.location.hash);\r\n    let path = '';\r\n    if (['security','support','general','notif'].includes(parsed.path[0])) {\r\n      path = 'edit';\r\n    } else if ('blocked' == parsed.path[0]) {\r\n      path = 'security';\r\n    } else if (this.state.myUserId) {\r\n      path = 'contacts';\r\n    }\r\n    parsed.path[0] = path;\r\n    if (parsed.params) {\r\n      delete parsed.params.code;\r\n      delete parsed.params.method;\r\n      delete parsed.params.tab;\r\n    }\r\n    HashNavigation.navigateTo(HashNavigation.composeUrlHash(parsed.path, parsed.params));\r\n    this.setState({errorText: '', errorLevel: null});\r\n  }\r\n\r\n  // Basic nagigator by hash value. No need to bind to this.\r\n  basicNavigator(hash) {\r\n    HashNavigation.navigateTo(HashNavigation.setUrlSidePanel(window.location.hash, hash));\r\n  }\r\n\r\n  // Request to start a topic, new or selected from search results, or \"by ID\".\r\n  handleStartTopicRequest(topicName, pub, priv, tags, isChannel) {\r\n    // Check if topic is indeed new. If not, launch it.\r\n    if (topicName && this.tinode.isTopicCached(topicName)) {\r\n      this.handleTopicSelected(topicName);\r\n      return;\r\n    }\r\n\r\n    const params = {};\r\n    if (Tinode.isP2PTopicName(topicName)) {\r\n      // Because we are initialing the subscription, set 'want' to all permissions.\r\n      params.sub = {mode: DEFAULT_P2P_ACCESS_MODE};\r\n      // Give the other user all permissions too.\r\n      params.desc = {defacs: {auth: DEFAULT_P2P_ACCESS_MODE}};\r\n    } else {\r\n      topicName = topicName || this.tinode.newGroupTopicName(isChannel);\r\n      params.desc = {public: pub, private: {comment: priv}};\r\n      params.tags = tags;\r\n    }\r\n    params._topicName = topicName;\r\n    this.setState({newTopicParams: params}, () => {this.handleTopicSelected(topicName)});\r\n  }\r\n\r\n  // New topic was creted, here is the new topic name.\r\n  handleNewTopicCreated(oldName, newName) {\r\n    if (this.state.topicSelected == oldName && oldName != newName) {\r\n      // If the current URl contains the old topic name, replace it with new.\r\n      // Update the name of the selected topic first so the navigator doen't clear\r\n      // the state.\r\n      this.setState({topicSelected: newName}, () => {\r\n        HashNavigation.navigateTo(HashNavigation.setUrlTopic('', newName));\r\n      });\r\n    }\r\n  }\r\n\r\n  handleTopicUpdateRequest(topicName, pub, priv, permissions) {\r\n    const topic = this.tinode.getTopic(topicName);\r\n    if (topic) {\r\n      const params = {};\r\n      if (pub) {\r\n        params.public = pub;\r\n      }\r\n      if (priv) {\r\n        params.private = (priv === Tinode.DEL_CHAR) ?\r\n          Tinode.DEL_CHAR : {comment: priv};\r\n      }\r\n      if (permissions) {\r\n        params.defacs = permissions;\r\n      }\r\n      topic.setMeta({desc: params}).catch((err) => {\r\n        this.handleError(err.message, 'err');\r\n      });\r\n    }\r\n  }\r\n\r\n  handleChangePermissions(topicName, mode, uid) {\r\n    const topic = this.tinode.getTopic(topicName);\r\n    if (topic) {\r\n      const am = topic.getAccessMode();\r\n      if (uid) {\r\n        am.updateGiven(mode);\r\n        mode = am.getGiven();\r\n      } else {\r\n        am.updateWant(mode);\r\n        mode = am.getWant();\r\n      }\r\n      topic.setMeta({sub: {user: uid, mode: mode}}).catch((err) => {\r\n        this.handleError(err.message, 'err');\r\n      });\r\n    }\r\n  }\r\n\r\n  handleTagsUpdated(topicName, tags) {\r\n    const topic = this.tinode.getTopic(topicName);\r\n    if (topic) {\r\n      topic.setMeta({tags: tags}).catch((err) => {\r\n        this.handleError(err.message, 'err');\r\n      });\r\n    }\r\n  }\r\n\r\n  handleLogout() {\r\n    updateFavicon(0);\r\n\r\n    // Remove stored data.\r\n    localStorage.removeItem('auth-token');\r\n    localStorage.removeItem('firebase-token');\r\n    localStorage.removeItem('settings');\r\n    if (this.state.firebaseToken) {\r\n      this.fbPush.deleteToken(this.state.firebaseToken)\r\n    }\r\n\r\n    clearInterval(this.reconnectCountdown);\r\n\r\n    if (this.tinode) {\r\n      this.tinode.clearStorage();\r\n      this.tinode.onDisconnect = undefined;\r\n      this.tinode.disconnect();\r\n    }\r\n    this.setState(this.getBlankState());\r\n\r\n    this.tinode = TinodeWeb.tnSetup(this.state.serverAddress,\r\n      this.state.transport, this.props.intl.locale, LocalStorageUtil.getObject('keep-logged-in'));\r\n    this.tinode.onConnect = this.handleConnected;\r\n    this.tinode.onDisconnect = this.handleDisconnect;\r\n    this.tinode.onAutoreconnectIteration = this.handleAutoreconnectIteration;\r\n    HashNavigation.navigateTo('');\r\n  }\r\n\r\n  handleDeleteAccount() {\r\n    this.tinode.delCurrentUser(true).then((ctrl) => {\r\n      this.handleLogout();\r\n    });\r\n  }\r\n\r\n  handleDeleteTopicRequest(topicName) {\r\n    const topic = this.tinode.getTopic(topicName);\r\n    if (!topic) {\r\n      return;\r\n    }\r\n\r\n    // Request to hard-delete topic.\r\n    topic.delTopic(true).then((ctrl) => {\r\n      // Hide MessagesView and InfoView panels.\r\n      HashNavigation.navigateTo(HashNavigation.setUrlTopic(window.location.hash, ''));\r\n    }).catch((err) => {\r\n      this.handleError(err.message, 'err');\r\n    });\r\n  }\r\n\r\n  handleDeleteMessagesRequest(topicName) {\r\n    const topic = this.tinode.getTopic(topicName);\r\n    if (!topic) {\r\n      return;\r\n    }\r\n\r\n    // Request hard-delete all messages.\r\n    topic.delMessagesAll(true).catch((err) => {\r\n      this.handleError(err.message, 'err');\r\n    });\r\n  }\r\n\r\n  handleLeaveUnsubRequest(topicName) {\r\n    const topic = this.tinode.getTopic(topicName);\r\n    if (!topic) {\r\n      return;\r\n    }\r\n\r\n    topic.leave(true).then((ctrl) => {\r\n      // Hide MessagesView and InfoView panels.\r\n      HashNavigation.navigateTo(HashNavigation.setUrlTopic(window.location.hash, ''));\r\n    }).catch((err) => {\r\n      this.handleError(err.message, 'err');\r\n    });\r\n  }\r\n\r\n  handleBlockTopicRequest(topicName) {\r\n    const topic = this.tinode.getTopic(topicName);\r\n    if (!topic) {\r\n      return;\r\n    }\r\n\r\n    topic.updateMode(null, '-JP').then((ctrl) => {\r\n      // Hide MessagesView and InfoView panels.\r\n      HashNavigation.navigateTo(HashNavigation.setUrlTopic(window.location.hash, ''));\r\n    }).catch((err) => {\r\n      this.handleError(err.message, 'err');\r\n    });\r\n  }\r\n\r\n  handleReportTopic(topicName) {\r\n    const topic = this.tinode.getTopic(topicName);\r\n    if (!topic) {\r\n      return;\r\n    }\r\n\r\n    // Publish spam report.\r\n    this.tinode.publish(Tinode.TOPIC_SYS, Tinode.Drafty.attachJSON(null, {\r\n      'action': 'report',\r\n      'target': topicName\r\n    }));\r\n\r\n    // Remove J and P permissions.\r\n    topic.updateMode(null, '-JP').then((ctrl) => {\r\n      // Hide MessagesView and InfoView panels.\r\n      HashNavigation.navigateTo(HashNavigation.setUrlTopic(window.location.hash, ''));\r\n    }).catch((err) => {\r\n      this.handleError(err.message, 'err');\r\n    });\r\n  }\r\n\r\n  handleShowContextMenu(params, menuItems) {\r\n    this.setState({\r\n      contextMenuVisible: true,\r\n      contextMenuClickAt: {x: params.x, y: params.y},\r\n      contextMenuParams: params,\r\n      contextMenuItems: menuItems || this.defaultTopicContextMenu(params.topicName),\r\n      contextMenuBounds: ReactDOM.findDOMNode(this).getBoundingClientRect()\r\n    });\r\n  }\r\n\r\n  defaultTopicContextMenu(topicName) {\r\n    const topic = this.tinode.getTopic(topicName);\r\n\r\n    let muted = false, blocked = false, self_blocked = false, subscribed = false, deleter = false, archived = false;\r\n    if (topic) {\r\n      subscribed = topic.isSubscribed();\r\n      archived = topic.isArchived();\r\n\r\n      const acs = topic.getAccessMode();\r\n      if (acs) {\r\n        muted = acs.isMuted();\r\n        blocked = !acs.isJoiner();\r\n        self_blocked = !acs.isJoiner('want');\r\n        deleter = acs.isDeleter();\r\n      }\r\n    }\r\n\r\n    return [\r\n      subscribed ? {\r\n        title: this.props.intl.formatMessage(messages.menu_item_info),\r\n        handler: this.handleShowInfoView\r\n      } : null,\r\n      subscribed ? 'messages_clear' : null,\r\n      subscribed && deleter ? 'messages_clear_hard' : null,\r\n      muted ? (blocked ? null : 'topic_unmute') : 'topic_mute',\r\n      self_blocked ? 'topic_unblock' : 'topic_block',\r\n      archived ? 'topic_restore' : 'topic_archive',\r\n      'topic_delete'\r\n    ];\r\n  }\r\n\r\n  handleHideContextMenu() {\r\n    this.setState({\r\n      contextMenuVisible: false,\r\n      contextMenuClickAt: null,\r\n      contextMenuParams: null,\r\n      contextMenuBounds: null\r\n    });\r\n  }\r\n\r\n  handleContextMenuAction(action, promise, params) {\r\n    if (action == 'topic_archive') {\r\n      if (promise && params.topicName && params.topicName == this.state.topicSelected) {\r\n        promise.then(() => {\r\n          this.handleTopicSelected(null);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  handleShowAlert(title, content, onConfirm, confirmText, onReject, rejectText) {\r\n    this.setState({\r\n      alertVisible: true,\r\n      alertParams: {\r\n        title: title,\r\n        content: content,\r\n        onConfirm: onConfirm,\r\n        confirm: confirmText,\r\n        onReject: onReject,\r\n        reject: rejectText\r\n      }\r\n    });\r\n  }\r\n\r\n  handleShowInfoView() {\r\n    HashNavigation.navigateTo(HashNavigation.addUrlParam(window.location.hash, 'info', true));\r\n    this.setState({showInfoPanel: true});\r\n  }\r\n\r\n  handleHideInfoView() {\r\n    HashNavigation.navigateTo(HashNavigation.removeUrlParam(window.location.hash, 'info'));\r\n    this.setState({showInfoPanel: false});\r\n  }\r\n\r\n  handleMemberUpdateRequest(topicName, added, removed) {\r\n    if (!topicName) {\r\n      return;\r\n    }\r\n\r\n    const topic = this.tinode.getTopic(topicName);\r\n    if (!topic) {\r\n      return;\r\n    }\r\n\r\n    if (added && added.length > 0) {\r\n      added.map((uid) => {\r\n        topic.invite(uid, null).catch((err) => {\r\n          this.handleError(err.message, 'err');\r\n        });\r\n      });\r\n    }\r\n\r\n    if (removed && removed.length > 0) {\r\n      removed.map((uid) => {\r\n        topic.delSubscription(uid).catch((err) => {\r\n          this.handleError(err.message, 'err');\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  handleValidateCredentialsRequest(cred, code) {\r\n    if (this.tinode.isAuthenticated()) {\r\n      const me = this.tinode.getMeTopic();\r\n      me.setMeta({cred: {meth: cred, resp: code}})\r\n        .then(() => {\r\n          HashNavigation.navigateTo('');\r\n        })\r\n        .catch((err) => {\r\n          this.handleError(err.message, 'err');\r\n        });\r\n    } else {\r\n      this.setState({credMethod: cred, credCode: code});\r\n      this.doLogin(null, null, null, null, {meth: cred, resp: code});\r\n    }\r\n  }\r\n\r\n  handlePasswordResetRequest(method, value) {\r\n    // If already connected, connnect() will return a resolved promise.\r\n    return this.tinode.connect()\r\n      .then(() => {\r\n        return this.tinode.requestResetAuthSecret('basic', method, value);\r\n      })\r\n      .catch((err) => {\r\n        // Socket error\r\n        this.handleError(err.message, 'err');\r\n      });\r\n  }\r\n\r\n  handleResetPassword(scheme, newPassword, token) {\r\n    token = base64ReEncode(token);\r\n    if (!token) {\r\n      this.handleError(this.props.intl.formatMessage(messages.invalid_security_token), 'err');\r\n    } else {\r\n      this.tinode.connect()\r\n        .then(() => {\r\n          return this.tinode.updateAccountBasic(null, null, newPassword, {token: token});\r\n        })\r\n        .catch((err) => {\r\n          // Socket error\r\n          this.handleError(err.message, 'err');\r\n        });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"app-container\">\r\n        {this.state.contextMenuVisible ?\r\n          <ContextMenu\r\n            tinode={this.tinode}\r\n            bounds={this.state.contextMenuBounds}\r\n            clickAt={this.state.contextMenuClickAt}\r\n            params={this.state.contextMenuParams}\r\n            items={this.state.contextMenuItems}\r\n            hide={this.handleHideContextMenu}\r\n            onShowAlert={this.handleShowAlert}\r\n            onAction={this.handleContextMenuAction}\r\n            onTopicRemoved={(topicName) => {\r\n              if (topicName == this.state.topicSelected) {\r\n                this.handleTopicSelected(null);\r\n              }\r\n            }}\r\n            onError={this.handleError} />\r\n          :\r\n          null\r\n        }\r\n        <Alert\r\n          visible={this.state.alertVisible}\r\n          title={this.state.alertParams.title}\r\n          content={this.state.alertParams.content}\r\n          onReject={this.state.alertParams.onReject ? (() => { this.setState({alertVisible: false}); }) : null}\r\n          reject={this.state.alertParams.reject}\r\n          onConfirm={() => { this.setState({alertVisible: false}); this.state.alertParams.onConfirm(); }}\r\n          confirm={this.state.alertParams.confirm}\r\n          />\r\n        <SidepanelView\r\n          tinode={this.tinode}\r\n          connected={this.state.connected}\r\n          displayMobile={this.state.displayMobile}\r\n          hideSelf={this.state.displayMobile && this.state.mobilePanel !== 'sidepanel'}\r\n          state={this.state.sidePanelSelected}\r\n          title={this.state.sidePanelTitle}\r\n          avatar={this.state.sidePanelAvatar}\r\n          login={this.state.login}\r\n          persist={this.state.persist}\r\n          myUserId={this.state.myUserId}\r\n          loginDisabled={this.state.loginDisabled}\r\n          loadSpinnerVisible={this.state.loadSpinnerVisible}\r\n\r\n          errorText={this.state.errorText}\r\n          errorLevel={this.state.errorLevel}\r\n          errorAction={this.state.errorAction}\r\n          errorActionText={this.state.errorActionText}\r\n\r\n          topicSelected={this.state.topicSelected}\r\n          chatList={this.state.chatList}\r\n          credMethod={this.state.credMethod}\r\n          credCode={this.state.credCode}\r\n\r\n          transport={this.state.transport}\r\n          messageSounds={this.state.messageSounds}\r\n          desktopAlerts={this.state.desktopAlerts}\r\n          desktopAlertsEnabled={this.state.desktopAlertsEnabled}\r\n          incognitoMode={this.state.incognitoMode}\r\n          serverAddress={this.state.serverAddress}\r\n          serverVersion={this.state.serverVersion}\r\n\r\n          onGlobalSettings={this.handleGlobalSettings}\r\n          onSignUp={this.handleNewAccount}\r\n          onSettings={this.handleSettings}\r\n          onBasicNavigate={this.basicNavigator}\r\n          onLoginRequest={this.handleLoginRequest}\r\n          onPersistenceChange={this.handlePersistenceChange}\r\n          onCreateAccount={this.handleNewAccountRequest}\r\n          onUpdateAccount={this.handleUpdateAccountRequest}\r\n          onUpdateAccountTags={this.handleUpdateAccountTagsRequest}\r\n          onTogglePushNotifications={this.togglePushToken}\r\n          onToggleMessageSounds={this.handleToggleMessageSounds}\r\n          onToggleIncognitoMode={this.handleToggleIncognitoMode}\r\n          onCredAdd={this.handleCredAdd}\r\n          onCredDelete={this.handleCredDelete}\r\n          onCredConfirm={this.handleCredConfirm}\r\n          onTopicSelected={this.handleTopicSelected}\r\n          onCreateTopic={this.handleStartTopicRequest}\r\n          onLogout={this.handleLogout}\r\n          onDeleteAccount={this.handleDeleteAccount}\r\n          onShowAlert={this.handleShowAlert}\r\n          onCancel={this.handleSidepanelCancel}\r\n          onError={this.handleError}\r\n          onValidateCredentials={this.handleValidateCredentialsRequest}\r\n          onPasswordResetRequest={this.handlePasswordResetRequest}\r\n          onResetPassword={this.handleResetPassword}\r\n          onShowArchive={this.handleShowArchive}\r\n          onShowBlocked={this.handleShowBlocked}\r\n\r\n          onInitFind={this.tnInitFind}\r\n          searchResults={this.state.searchResults}\r\n          onSearchContacts={this.handleSearchContacts}\r\n\r\n          showContextMenu={this.handleShowContextMenu} />\r\n\r\n        <MessagesView\r\n          tinode={this.tinode}\r\n          connected={this.state.connected}\r\n          ready={this.state.ready}\r\n          online={this.state.topicSelectedOnline}\r\n          acs={this.state.topicSelectedAcs}\r\n          displayMobile={this.state.displayMobile}\r\n          viewportWidth={this.state.viewportWidth}\r\n          viewportHeight={this.state.viewportHeight}\r\n          hideSelf={this.state.displayMobile &&\r\n            (this.state.mobilePanel !== 'topic-view' || this.state.showInfoPanel)}\r\n          topic={this.state.topicSelected}\r\n          myUserId={this.state.myUserId}\r\n          serverVersion={this.state.serverVersion}\r\n          serverAddress={this.state.serverAddress}\r\n          applicationVisible={this.state.applicationVisible}\r\n\r\n          errorText={this.state.errorText}\r\n          errorLevel={this.state.errorLevel}\r\n          errorAction={this.state.errorAction}\r\n          errorActionText={this.state.errorActionText}\r\n\r\n          newTopicParams={this.state.newTopicParams}\r\n\r\n          onHideMessagesView={this.handleHideMessagesView}\r\n          onData={this.tnData}\r\n          onError={this.handleError}\r\n          onNewTopicCreated={this.handleNewTopicCreated}\r\n          showContextMenu={this.handleShowContextMenu}\r\n          onChangePermissions={this.handleChangePermissions}\r\n          onNewChat={this.handleNewChatInvitation}\r\n          sendMessage={this.handleSendMessage} />\r\n\r\n        {this.state.showInfoPanel ?\r\n          <InfoView\r\n            tinode={this.tinode}\r\n            connected={this.state.connected}\r\n            displayMobile={this.state.displayMobile}\r\n            topic={this.state.topicSelected}\r\n            searchableContacts={this.state.searchableContacts}\r\n            myUserId={this.state.myUserId}\r\n\r\n            errorText={this.state.errorText}\r\n            errorLevel={this.state.errorLevel}\r\n            errorAction={this.state.errorAction}\r\n            errorActionText={this.state.errorActionText}\r\n\r\n            onTopicDescUpdate={this.handleTopicUpdateRequest}\r\n            onCancel={this.handleHideInfoView}\r\n            onShowAlert={this.handleShowAlert}\r\n            onChangePermissions={this.handleChangePermissions}\r\n            onMemberUpdateRequest={this.handleMemberUpdateRequest}\r\n            onDeleteTopic={this.handleDeleteTopicRequest}\r\n            onDeleteMessages={this.handleDeleteMessagesRequest}\r\n            onLeaveTopic={this.handleLeaveUnsubRequest}\r\n            onBlockTopic={this.handleBlockTopicRequest}\r\n            onReportTopic={this.handleReportTopic}\r\n            onAddMember={this.handleManageGroupMembers}\r\n            onTopicTagsUpdate={this.handleTagsUpdated}\r\n            onInitFind={this.tnInitFind}\r\n            onError={this.handleError}\r\n\r\n            showContextMenu={this.handleShowContextMenu}\r\n            />\r\n          :\r\n          null\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default injectIntl(TinodeWeb);\r\n",
    "// ValidationView: panel for confirming credentials, like email or phone.\r\nimport React from 'react';\r\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\r\n\r\nconst messages = defineMessages({\r\n  phone: {\r\n    id: 'phone_dative',\r\n    defaultMessage: 'phone',\r\n    description: \"Dative case of 'phone', i.e. 'phone' in 'by phone'\",\r\n  },\r\n  email: {\r\n    id: 'email_dative',\r\n    defaultMessage: 'email',\r\n    description: \"Dative case of 'email', i.e. 'email' in 'by email'\",\r\n  }\r\n});\r\n\r\nclass ValidationView extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      code: props.credCode || ''\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleKeyPress = this.handleKeyPress.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleCancel = this.handleCancel.bind(this);\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.setState({code: e.target.value});\r\n  }\r\n\r\n  handleKeyPress(e) {\r\n    if (e.key === 'Enter') {\r\n      this.handleSubmit(e);\r\n    } else if (e.key == 'Escape') {\r\n      this.handleCancel(e);\r\n    }\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    e.preventDefault();\r\n    if (this.state.code && this.state.code.trim()) {\r\n      this.props.onSubmit(this.props.credMethod, this.state.code.trim());\r\n    }\r\n  }\r\n\r\n  handleCancel(e) {\r\n    e.preventDefault();\r\n    this.props.onCancel();\r\n  }\r\n\r\n\r\n  render() {\r\n    const { formatMessage } = this.props.intl;\r\n    const methods = {'email': formatMessage(messages.email), 'tel': formatMessage(messages.phone)};\r\n    let method = methods[this.props.credMethod] || this.props.credMethod;\r\n    return (\r\n      <div className=\"panel-form\">\r\n        <div className=\"panel-form-row\">\r\n          <label className=\"small\" htmlFor=\"enter-confirmation-code\">\r\n            <FormattedMessage id=\"enter_confirmation_code_prompt\"\r\n              defaultMessage=\"Enter confirmation code sent to you by {method}:\"\r\n              description=\"Request to enter confirmation code\"\r\n              values={{method: method}} />\r\n          </label>\r\n        </div>\r\n        <div className=\"panel-form-row\">\r\n        <FormattedMessage id=\"numeric_confirmation_code_prompt\"\r\n          defaultMessage=\"Numbers only\" description=\"Prompt for numeric conformation code\">{\r\n          (numbers_only) => <input type=\"text\" id=\"enter-confirmation-code\"\r\n            placeholder={numbers_only}\r\n            value={this.state.code} onChange={this.handleChange}\r\n            onKeyPress={this.handleKeyPress} required />\r\n        }</FormattedMessage>\r\n        </div>\r\n        <div className=\"dialog-buttons\">\r\n          <button className=\"primary\" onClick={this.handleSubmit}>\r\n            <FormattedMessage id=\"button_confirm\" defaultMessage=\"Confirm\" description=\"Button [Confirm]\" />\r\n          </button>\r\n          <button className=\"secondary\" onClick={this.handleCancel}>\r\n            <FormattedMessage id=\"button_cancel\" defaultMessage=\"Cancel\" description=\"Button [Cancel]\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default injectIntl(ValidationView);\r\n",
    "import React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nexport default class Alert extends React.PureComponent {\r\n  render() {\r\n    return this.props.visible ?\r\n      <div className=\"alert-container\">\r\n        <div className=\"alert\">\r\n          <div className=\"title\">{this.props.title}</div>\r\n          <div className=\"content\">{this.props.content}</div>\r\n          <div className=\"dialog-buttons\">\r\n            {this.props.onReject ?\r\n              <button className=\"outline\" onClick={this.props.onReject}>\r\n                {this.props.reject || <FormattedMessage id=\"button_cancel\" defaultMessage=\"Cancel\" description=\"Button [Cancel]\" />}\r\n              </button>\r\n              :\r\n              null\r\n            }\r\n            <button className=\"primary\" onClick={this.props.onConfirm}>\r\n              {this.props.confirm || <FormattedMessage id=\"button_ok\" defaultMessage=\"OK\" description=\"Button [OK]\"  />}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    :\r\n    null;\r\n  }\r\n};\r\n",
    "import React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport FileProgress from './file-progress.jsx';\r\nimport { bytesToHumanSize } from '../lib/strformat.js';\r\nimport { isUrlRelative, sanitizeUrl } from '../lib/utils.js';\r\n\r\nexport default class Attachment extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      downloader: null,\r\n      progress: 0\r\n    };\r\n\r\n    this.downloadFile = this.downloadFile.bind(this);\r\n    this.handleCancel = this.handleCancel.bind(this);\r\n  }\r\n\r\n  downloadFile(url, filename, mimetype) {\r\n    if (!url) {\r\n      this.props.onError(\"Invalid download URL '\" + url + \"'\");\r\n      return;\r\n    }\r\n\r\n    const downloader = this.props.tinode.getLargeFileHelper();\r\n    this.setState({downloader: downloader});\r\n    downloader.download(url, filename, mimetype,\r\n      (loaded) => {\r\n        this.setState({progress: loaded / this.props.size});\r\n      },\r\n      (err) => {\r\n        this.props.onError(err, 'err');\r\n      }\r\n    ).then(() => {\r\n      this.setState({downloader: null, progress: 0});\r\n    }).catch((err) => {\r\n      if (err) {\r\n        this.props.onError(\"Error downloading file: \" + err.message, 'err');\r\n      }\r\n      this.setState({downloader: null, progress: 0});\r\n    });\r\n  }\r\n\r\n  handleCancel() {\r\n    if (this.props.uploading) {\r\n      this.props.onCancelUpload();\r\n    } else if (this.state.downloader) {\r\n      this.state.downloader.cancel();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let filename = this.props.filename || 'file_attachment';\r\n    if (filename.length > 36) {\r\n      filename = filename.substr(0, 16) + '...' + filename.substr(-16);\r\n    }\r\n    let size = this.props.size > 0 ?\r\n      <span className=\"small gray\">({bytesToHumanSize(this.props.size)})</span> :\r\n      null;\r\n\r\n    // Detect if the download URL is relative or absolute.\r\n    // If the URL is relative use LargeFileHelper to attach authentication\r\n    // credentials to the request.\r\n    let url, helperFunc;\r\n    if (!this.props.uploading && !this.state.downloader && isUrlRelative(this.props.downloadUrl)) {\r\n      // Relative URL. Use download helper.\r\n      url = '#';\r\n      helperFunc = (e) => {\r\n        e.preventDefault();\r\n        this.downloadFile(this.props.downloadUrl, this.props.filename, this.props.mimetype);\r\n      };\r\n    } else {\r\n      url = sanitizeUrl(this.props.downloadUrl);\r\n      helperFunc = null;\r\n    }\r\n    const downloadWidget = <><i className=\"material-icons\">file_download</i> <FormattedMessage id=\"save_attachment\"\r\n      defaultMessage=\"save\" description=\"Call to save an attachment\" /></>;\r\n    return (\r\n      <div className=\"attachment\">\r\n        <div><i className=\"material-icons big gray\">insert_drive_file</i></div>\r\n        <div className=\"flex-column\">\r\n          <div>{filename} {size}</div>\r\n          {this.props.uploading || this.state.downloader ?\r\n            <FileProgress progress={this.props.uploading ? this.props.progress : this.state.progress}\r\n              onCancel={this.handleCancel} />\r\n            :\r\n            <div>{url ?\r\n              <a href={url} download={this.props.filename} onClick={helperFunc}>{downloadWidget}</a>\r\n              :\r\n              <span className=\"light-gray\">{downloadWidget}</span>\r\n            }</div>\r\n          }\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n",
    "import React from 'react';\r\n\r\nimport LetterTile from './letter-tile.jsx';\r\n\r\nimport { AVATAR_SIZE, MAX_EXTERN_ATTACHMENT_SIZE } from '../config.js';\r\nimport { imageScaled, blobToBase64, makeImageDataUrl } from '../lib/blob-helpers.js';\r\n\r\nexport default class AvatarUpload extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      dataUrl: props.avatar\r\n    };\r\n\r\n    this.handleFileUpload = this.handleFileUpload.bind(this);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.avatar != prevProps.avatar) {\r\n      this.setState({dataUrl: this.props.avatar})\r\n    }\r\n  }\r\n\r\n  handleFileUpload(e) {\r\n    imageScaled(e.target.files[0], AVATAR_SIZE, AVATAR_SIZE, MAX_EXTERN_ATTACHMENT_SIZE, true,\r\n      // Image successfully scaled and converted.\r\n      (mime, blob) => {\r\n        // Convert blob to base64-encoded bits.\r\n        blobToBase64(blob, (unused, base64bits) => {\r\n          const du = makeImageDataUrl({data: base64bits, type: mime});\r\n          this.setState({dataUrl: du});\r\n          this.props.onImageChanged(du);\r\n        });\r\n      },\r\n      // Failure\r\n      (err) => {\r\n        this.props.onError(err, 'err');\r\n      });\r\n    // Clear the value so the same file can be uploaded again.\r\n    e.target.value = '';\r\n  }\r\n\r\n  render() {\r\n    // Randomize id value in case more than one AvatarUpload is shown\r\n    // at the same time.\r\n    const randId = 'file-input-avatar-' + (Math.random() + '').substr(2);\r\n    const className = 'avatar-upload' + (this.props.readOnly ? ' read-only' : '');\r\n    return (\r\n      <div className={className}>\r\n        {this.props.readOnly || !this.state.dataUrl ?\r\n          null :\r\n          <a href=\"#\" className=\"clear-avatar\" onClick={(e) => {e.preventDefault(); this.props.onImageChanged(null);}}>\r\n            <i className=\"material-icons\">clear</i>\r\n          </a>}\r\n        {this.state.dataUrl ?\r\n          <img src={this.state.dataUrl} className=\"preview\" /> :\r\n          this.props.readOnly && this.props.uid ?\r\n            <div className=\"avatar-box\">\r\n              <LetterTile\r\n                avatar={true}\r\n                topic={this.props.uid}\r\n                title={this.props.title} />\r\n            </div>\r\n            :\r\n            <div className=\"blank\">{AVATAR_SIZE}&times;{AVATAR_SIZE}</div>}\r\n        {this.props.readOnly ? null :\r\n          <input type=\"file\" id={randId} className=\"inputfile hidden\"\r\n            accept=\"image/*\" onChange={this.handleFileUpload} />}\r\n        {this.props.readOnly ? null :\r\n        <label htmlFor={randId} className=\"round\">\r\n          <i className=\"material-icons\">file_upload</i>\r\n        </label>}\r\n      </div>\r\n    );\r\n  }\r\n};\r\n",
    "// The <- button to be displayed in title bars.\r\nimport React from 'react';\r\n\r\nexport default class ButtonBack extends React.PureComponent {\r\n  render() {\r\n    return (\r\n      <a href=\"#\" onClick={(e) => {e.preventDefault(); this.props.onBack();}}>\r\n        <i className=\"material-icons\">arrow_back</i>\r\n      </a>\r\n    );\r\n  }\r\n}\r\n",
    "// Single message, sent or received.\r\nimport React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { Drafty } from 'tinode-sdk';\r\n\r\nimport Attachment from './attachment.jsx';\r\nimport LetterTile from './letter-tile.jsx';\r\nimport ReceivedMarker from './received-marker.jsx'\r\nimport UploadingImage from './uploading-image.jsx'\r\nimport { sanitizeImageUrl, sanitizeUrl } from '../lib/utils.js';\r\n\r\nexport default class ChatMessage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      progress: 0\r\n    };\r\n\r\n    if (props.uploader) {\r\n      props.uploader.onProgress = this.handleProgress.bind(this);\r\n    }\r\n\r\n    this.handleImagePreview = this.handleImagePreview.bind(this);\r\n    this.handleFormButtonClick = this.handleFormButtonClick.bind(this);\r\n    this.handleContextClick = this.handleContextClick.bind(this);\r\n    this.handleCancelUpload = this.handleCancelUpload.bind(this);\r\n  }\r\n\r\n  handleImagePreview(e) {\r\n    e.preventDefault();\r\n    this.props.onImagePreview({\r\n      url: e.target.src,\r\n      filename: e.target.title,\r\n      width: e.target.dataset.width,\r\n      height: e.target.dataset.height,\r\n      size: e.target.dataset.size,\r\n      type: e.target.dataset.mime\r\n    });\r\n  }\r\n\r\n  handleFormButtonClick(e) {\r\n    e.preventDefault();\r\n    const data = {\r\n      seq: this.props.seq\r\n    };\r\n    data.resp = {};\r\n    if (e.target.dataset.name) {\r\n      data.resp[e.target.dataset.name] = e.target.dataset.val ? e.target.dataset.val :\r\n        e.target.dataset.val === undefined ? 1 : '' + e.target.dataset.val;\r\n    }\r\n    if (e.target.dataset.act == 'url') {\r\n      data.ref = sanitizeUrl(e.target.dataset.ref) || 'about:blank';\r\n    }\r\n    const text = e.target.dataset.title || 'unknown';\r\n    this.props.onFormResponse(e.target.dataset.act, text, data);\r\n  }\r\n\r\n  handleContextClick(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    const menuItems = this.props.received == Tinode.MESSAGE_STATUS_FAILED ? ['menu_item_send_retry'] : [];\r\n    this.props.showContextMenu({ seq: this.props.seq, content: this.props.content,\r\n                                 y: e.pageY, x: e.pageX }, menuItems);\r\n  }\r\n\r\n  handleProgress(ratio) {\r\n    this.setState({progress: ratio});\r\n  }\r\n\r\n  handleCancelUpload() {\r\n    this.props.onCancelUpload(this.props.seq, this.props.uploader);\r\n  }\r\n\r\n  render() {\r\n    const sideClass = this.props.deleted ? 'center' :\r\n      (this.props.sequence + ' ' + (this.props.response ? 'left' : 'right'));\r\n    const bubbleClass = (this.props.sequence == 'single' || this.props.sequence == 'last') ? 'bubble tip' : 'bubble';\r\n    const avatar = this.props.deleted ? null : (this.props.userAvatar || true);\r\n    const fullDisplay = (this.props.userFrom && this.props.response && !this.props.deleted &&\r\n      (this.props.sequence == 'single' || this.props.sequence == 'last'));\r\n\r\n    let content = this.props.content;\r\n    const attachments = [];\r\n    if (this.props.mimeType == Drafty.getContentType() && Drafty.isValid(content)) {\r\n      Drafty.attachments(content, function(att, i) {\r\n        if (att.mime == 'application/json') {\r\n          // Don't show json objects as attachments.\r\n          // They are not meant for users.\r\n          return;\r\n        }\r\n        attachments.push(<Attachment\r\n          tinode={this.props.tinode}\r\n          downloadUrl={Drafty.getDownloadUrl(att)}\r\n          filename={att.name}\r\n          uploading={Drafty.isProcessing(att)}\r\n          mimetype={att.mime}\r\n          size={Drafty.getEntitySize(att)}\r\n          progress={this.state.progress}\r\n          onCancelUpload={this.handleCancelUpload}\r\n          onError={this.props.onError}\r\n          key={i} />);\r\n      }, this);\r\n      content = React.createElement(React.Fragment, null, Drafty.format(content, draftyFormatter, this));\r\n    } else if (this.props.deleted) {\r\n      // Message represents a range of deleted messages.\r\n      content = <><i className=\"material-icons gray\">block</i> <i className=\"gray\">\r\n        <FormattedMessage id=\"deleted_content\"\r\n          defaultMessage=\"content deleted\" description=\"Shown when messages are deleted\" />\r\n      </i></>\r\n    } else if (typeof content != 'string') {\r\n      content = <>\r\n          <i className=\"material-icons gray\">error_outline</i> <i className=\"gray\">\r\n            <FormattedMessage id=\"invalid_content\"\r\n              defaultMessage=\"invalid content\" description=\"Shown when message is unreadable\" /></i>\r\n        </>\r\n    }\r\n\r\n    return (\r\n      <li className={sideClass}>\r\n        {this.props.userFrom && this.props.response ?\r\n          <div className=\"avatar-box\">\r\n            {fullDisplay ?\r\n              <LetterTile\r\n                topic={this.props.userFrom}\r\n                title={this.props.userName}\r\n                avatar={avatar} /> :\r\n              null}\r\n          </div> :\r\n          null}\r\n        <div>\r\n          <div className={bubbleClass}>\r\n            <div className=\"content-meta\">\r\n              <div className=\"message-content\">\r\n                {content}\r\n                {attachments}\r\n              </div>\r\n              {this.props.timestamp ?\r\n                <ReceivedMarker\r\n                  timestamp={this.props.timestamp}\r\n                  received={this.props.received} />\r\n                : null}\r\n            </div>\r\n            {this.props.deleted || !this.props.showContextMenu ?\r\n              null :\r\n              <span className=\"menuTrigger\">\r\n                <a href=\"#\" onClick={this.handleContextClick}>\r\n                  <i className=\"material-icons\">expand_more</i>\r\n                </a>\r\n              </span>\r\n            }\r\n          </div>\r\n          {fullDisplay ?\r\n            <div className=\"author\">\r\n              <FormattedMessage id=\"user_not_found\" defaultMessage=\"Not found\"\r\n                description=\"In place of a user's full name when the user is not found.\">{\r\n                    (notFound) => {return this.props.userName || <i>{notFound}</i>}\r\n              }</FormattedMessage>\r\n            </div>\r\n            : null\r\n          }\r\n        </div>\r\n      </li>\r\n    );\r\n  }\r\n};\r\n\r\n// Convert Drafty object to a tree of React elements.\r\nimport { BROKEN_IMAGE_SIZE, REM_SIZE } from '../config.js';\r\nimport { fitImageSize } from '../lib/blob-helpers.js';\r\n\r\n// Converts Drafty elements into React classes.\r\n// 'this' is set by the caller.\r\nfunction draftyFormatter(style, data, values, key) {\r\n  if (style == 'EX') {\r\n    // attachments are handled elsewhere.\r\n    return null;\r\n  }\r\n\r\n  let el = Drafty.tagName(style);\r\n  if (el) {\r\n    const attr = Drafty.attrValue(style, data) || {};\r\n    attr.key = key;\r\n    switch (style) {\r\n      case 'HL':\r\n        // Highlighted text. Assign class name.\r\n        attr.className = 'highlight';\r\n        break;\r\n      case 'IM':\r\n        // Additional processing for images\r\n        if (data) {\r\n          attr.className = 'inline-image';\r\n          const dim = fitImageSize(data.width, data.height,\r\n            Math.min(this.props.viewportWidth - REM_SIZE * 6.5, REM_SIZE * 34.5), REM_SIZE * 24, false) ||\r\n            {dstWidth: BROKEN_IMAGE_SIZE, dstHeight: BROKEN_IMAGE_SIZE};\r\n          attr.style = {\r\n            width: dim.dstWidth + 'px',\r\n            height: dim.dstHeight + 'px',\r\n            // Looks like a Chrome bug: broken image does not respect 'width' and 'height'.\r\n            minWidth: dim.dstWidth + 'px',\r\n            minHeight: dim.dstHeight + 'px'\r\n          };\r\n          if (!Drafty.isProcessing(data)) {\r\n            attr.src = this.props.tinode.authorizeURL(sanitizeImageUrl(attr.src));\r\n            attr.alt = data.name;\r\n            if (attr.src) {\r\n              attr.onClick = this.handleImagePreview;\r\n              attr.className += ' image-clickable';\r\n              attr.loading = 'lazy';\r\n            } else {\r\n              attr.src = 'img/broken_image.png';\r\n            }\r\n          } else {\r\n            // Use custom element instead of <img>.\r\n            el = UploadingImage;\r\n          }\r\n        }\r\n        break;\r\n      case 'BN':\r\n        // Button\r\n        attr.onClick = this.handleFormButtonClick;\r\n        let inner = React.Children.map(values, (child) => {\r\n          return typeof child == 'string' ? child : undefined;\r\n        });\r\n        if (!inner || inner.length == 0) {\r\n          inner = [attr.name]\r\n        }\r\n        // Get text which will be sent back when the button is clicked.\r\n        attr['data-title'] = inner.join('');\r\n        break;\r\n      case 'FM':\r\n        // Form\r\n        attr.className = 'bot-form';\r\n        break;\r\n      case 'RW':\r\n        // Form element formatting is dependent on element content.\r\n        break;\r\n      default:\r\n        if (el == '_UNKN') {\r\n          // Unknown element.\r\n          // TODO: make it prettier.\r\n          el = <><span className=\"material-icons\">extension</span></>;\r\n        }\r\n        break;\r\n    }\r\n    return React.createElement(el, attr, values);\r\n  } else {\r\n    return values;\r\n  }\r\n};\r\n",
    "import React from 'react';\r\n\r\n/* BEGIN CheckBox: styled checkbox */\r\nexport default class CheckBox extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  handleChange() {\r\n    this.props.onChange(this.props.name, !this.props.checked);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      this.props.onChange ? (\r\n        this.props.checked ?\r\n          <i className=\"material-icons blue clickable\" onClick={this.handleChange}>check_box</i> :\r\n          <i className=\"material-icons blue clickable\" onClick={this.handleChange}>check_box_outline_blank</i>\r\n        ) : (\r\n          this.props.checked ?\r\n            <i className=\"material-icons\">check_box</i> :\r\n            <i className=\"material-icons\">check_box_outline_blank</i>\r\n        )\r\n    );\r\n  }\r\n}\r\n/* END CheckBox */\r\n",
    "import React from 'react';\r\n\r\nimport Chip from './chip.jsx';\r\n\r\nimport { makeImageDataUrl } from '../lib/blob-helpers.js';\r\n\r\n/* BEGIN ChipInput: group membership widget */\r\nexport default class ChipInput extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = ChipInput.deriveStateFromProps(props);\r\n    this.state.input = '';\r\n    this.state.focused = false;\r\n\r\n    this.handleTextInput = this.handleTextInput.bind(this);\r\n    this.removeChipAt = this.removeChipAt.bind(this);\r\n    this.handleChipCancel = this.handleChipCancel.bind(this);\r\n    this.handleFocusGained = this.handleFocusGained.bind(this);\r\n    this.handleFocusLost = this.handleFocusLost.bind(this);\r\n    this.handleKeyDown = this.handleKeyDown.bind(this);\r\n  }\r\n\r\n  static deriveStateFromProps(props) {\r\n    return {\r\n      placeholder: props.chips ? '' : props.prompt,\r\n      sortedChips: ChipInput.sortChips(props.chips, props.staticMembers),\r\n      chipIndex: ChipInput.indexChips(props.chips)\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevProps.chips != this.props.chips ||\r\n      prevProps.staticMembers != this.props.staticMembers ||\r\n      prevProps.prompt != this.props.prompt) {\r\n      this.setState(ChipInput.deriveStateFromProps(this.props));\r\n    }\r\n    if (!prevState || this.props.chips.length > prevState.sortedChips.length) {\r\n      this.setState({input: ''});\r\n    }\r\n  }\r\n\r\n  // Map chip index to user name\r\n  static indexChips(chips) {\r\n    const index = {};\r\n    let count = 0;\r\n    chips.map((item) => {\r\n      index[item.user] = count;\r\n      count ++;\r\n    });\r\n    return index;\r\n  }\r\n\r\n  // Have non-removable chips appear before all other chips.\r\n  static sortChips(chips, keep) {\r\n    const required = [];\r\n    const normal = [];\r\n    chips.map((item) => {\r\n      if (keep && keep.includes(item.user)) {\r\n        required.push(item);\r\n      } else {\r\n        normal.push(item);\r\n      }\r\n    });\r\n    return required.concat(normal);\r\n  }\r\n\r\n  handleTextInput(e) {\r\n    this.setState({input: e.target.value});\r\n    if (this.props.filterFunc) {\r\n      this.props.filterFunc(e.target.value);\r\n    }\r\n  }\r\n\r\n  removeChipAt(idx) {\r\n    const removed = this.state.sortedChips[idx];\r\n    this.props.onChipRemoved(removed.user, this.state.chipIndex[removed.user]);\r\n  }\r\n\r\n  handleChipCancel(item, idx) {\r\n    this.removeChipAt(idx);\r\n  }\r\n\r\n  handleFocusGained() {\r\n    this.setState({focused: true});\r\n  }\r\n\r\n  handleFocusLost() {\r\n    this.setState({focused: false});\r\n    if (this.props.onFocusLost) {\r\n      this.props.onFocusLost(this.state.input);\r\n    }\r\n  }\r\n\r\n  handleKeyDown(e) {\r\n    if (e.key === 'Backspace') {\r\n      if (this.state.input.length == 0 && this.state.sortedChips.length > 0) {\r\n        const at = this.state.sortedChips.length - 1;\r\n        if (this.state.sortedChips[at].user !== this.props.staticMembers) {\r\n          this.removeChipAt(at);\r\n        }\r\n      }\r\n    } else if (e.key === 'Enter') {\r\n      if (this.props.onEnter) {\r\n        this.props.onEnter(this.state.input);\r\n      }\r\n    } else if (e.key === 'Escape') {\r\n      if (this.props.onCancel) {\r\n        this.props.onCancel();\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const chips = [];\r\n    let count = 0;\r\n    const staticMembers = this.props.staticMembers || [];\r\n    this.state.sortedChips.map((item) => {\r\n      chips.push(\r\n        <Chip\r\n          onCancel={this.handleChipCancel}\r\n          avatar={makeImageDataUrl(item.public ? item.public.photo : null)}\r\n          title={item.public ? item.public.fn : undefined}\r\n          noAvatar={this.props.avatarDisabled}\r\n          topic={item.user}\r\n          required={staticMembers.includes(item.user)}\r\n          invalid={item.invalid}\r\n          index={count}\r\n          key={item.user} />\r\n      );\r\n      count++;\r\n    });\r\n    const className = \"chip-input\" + (this.state.focused ? ' focused' : '');\r\n    return (\r\n      <div className={className}>\r\n        {chips}\r\n        <input type=\"text\"\r\n          placeholder={this.state.placeholder}\r\n          onChange={this.handleTextInput}\r\n          onFocus={this.handleFocusGained}\r\n          onBlur={this.handleFocusLost}\r\n          onKeyDown={this.handleKeyDown}\r\n          value={this.state.input}\r\n          autoFocus />\r\n      </div>\r\n    );\r\n  }\r\n};\r\n",
    "import React from 'react';\r\n\r\nimport LetterTile from './letter-tile.jsx';\r\n\r\nexport default class Chip extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleCancel = this.handleCancel.bind(this);\r\n  }\r\n\r\n  handleCancel(e) {\r\n    e.preventDefault();\r\n    this.props.onCancel(this.props.topic, this.props.index);\r\n  }\r\n\r\n  render() {\r\n    const title = this.props.title || this.props.topic;\r\n    const className = this.props.invalid ? 'chip invalid' : 'chip';\r\n    return (\r\n      <div className={className}>\r\n        {this.props.noAvatar ?\r\n          <span className=\"spacer\" /> :\r\n          <div className=\"avatar-box\">\r\n            <LetterTile\r\n              avatar={this.props.avatar || true}\r\n              topic={this.props.topic}\r\n              title={this.props.title} />\r\n          </div>\r\n        }\r\n        <span>{title}</span>\r\n        {this.props.onCancel && !this.props.required ?\r\n          <a href=\"#\" onClick={this.handleCancel} >&times;</a>\r\n          : <span className=\"spacer\" />}\r\n      </div>\r\n    );\r\n  }\r\n};\r\n",
    "// A panel included into a list of contacts with an action text.\r\nimport React from 'react';\r\nimport { injectIntl } from 'react-intl';\r\n\r\nclass ContactAction extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n\r\n  handleClick(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    this.props.onAction(this.props.action);\r\n  }\r\n\r\n  render() {\r\n    const {formatMessage} = this.props.intl;\r\n    return (\r\n      <li onClick={this.handleClick} className=\"action\">\r\n        <div className=\"action-text\">{formatMessage(this.props.title, this.props.values)}</div>\r\n      </li>\r\n    );\r\n  }\r\n};\r\n\r\nexport default injectIntl(ContactAction);\r\n",
    "import React from 'react';\r\n\r\nconst icon_mapping = {'muted': 'notifications_off', 'banned': 'block'};\r\n\r\n/* Contact's labels: [you], or icons [muted], [blocked] */\r\nexport default class ContactBadges extends React.PureComponent {\r\n    render() {\r\n      let badges = null;\r\n      if (this.props.badges && this.props.badges.length > 0) {\r\n        badges = [];\r\n        this.props.badges.map(function(b) {\r\n          if (b.icon) {\r\n            badges.push(<i className=\"material-icons as-badge\" key={b.key || b.icon}>{icon_mapping[b.icon]}</i>);\r\n          } else {\r\n            const style = 'badge' + (b.color ? ' ' + b.color : '');\r\n            badges.push(<span className={style} key={b.key || b.name}>{b.name}</span>);\r\n          }\r\n        });\r\n        return <>{badges}</>;\r\n      }\r\n      return null;\r\n    }\r\n};\r\n",
    "// ContactList: component for showing a list of contacts,\r\n// such as a list of group members in a group chat.\r\nimport React from 'react';\r\nimport { defineMessages, injectIntl } from 'react-intl';\r\n\r\nimport { Drafty } from 'tinode-sdk';\r\nimport Tinode from 'tinode-sdk';\r\n\r\nimport Contact from './contact.jsx';\r\nimport ContactAction from './contact-action.jsx';\r\n\r\nimport { makeImageDataUrl } from '../lib/blob-helpers.js';\r\n\r\nimport { MESSAGE_PREVIEW_LENGTH } from '../config.js';\r\n\r\nconst messages = defineMessages({\r\n  badge_you: {\r\n    id: 'badge_you',\r\n    defaultMessage: 'you',\r\n    description: 'Badge for indicating the current user'\r\n  },\r\n  badge_owner: {\r\n    id: 'badge_owner',\r\n    defaultMessage: 'owner',\r\n    description: 'Badge for indicating the owner'\r\n  }\r\n});\r\n\r\nclass ContactList extends React.Component {\r\n  render() {\r\n    const { formatMessage } = this.props.intl;\r\n    const showCheckmark = Array.isArray(this.props.topicSelected);\r\n    const contactNodes = [];\r\n    let contactsCount = 0;\r\n    if (this.props.contacts && this.props.contacts.length > 0) {\r\n      this.props.contacts.map((c) => {\r\n        if (c.action) {\r\n          // Action item\r\n          contactNodes.push(\r\n            <ContactAction\r\n              title={c.title} action={c.action} values={c.values}\r\n              key={c.action}\r\n              onAction={this.props.onAction}\r\n              />);\r\n        } else {\r\n          // Normal contact\r\n          const key = this.props.showMode ? c.user : (c.topic || c.user);\r\n          // If filter function is provided, filter out the items\r\n          // which don't satisfy the condition.\r\n          if (this.props.filterFunc && this.props.filter) {\r\n            const filterOn = [key];\r\n            if (c.private && c.private.comment) {\r\n              filterOn.push(('' + c.private.comment).toLowerCase());\r\n            }\r\n            if (c.public && c.public.fn) {\r\n              filterOn.push(('' + c.public.fn).toLowerCase());\r\n            }\r\n            if (!this.props.filterFunc(this.props.filter, filterOn)) {\r\n              return;\r\n            }\r\n          }\r\n\r\n          const isChannel = Tinode.isChannelTopicName(key);\r\n          const selected = showCheckmark ?\r\n            (this.props.topicSelected.indexOf(key) > -1) :\r\n            (this.props.topicSelected === key);\r\n          const badges = [];\r\n          if (this.props.showMode) {\r\n            if (key == this.props.myUserId) {\r\n              badges.push({name: formatMessage(messages.badge_you), color: 'green'});\r\n            }\r\n            if (c.acs && c.acs.isOwner()) {\r\n              badges.push({name: formatMessage(messages.badge_owner), color: 'blue'});\r\n            }\r\n          }\r\n\r\n          const comment = Array.isArray(c.private) ?\r\n            c.private.join(',') : (c.private ? c.private.comment : null);\r\n          let preview;\r\n          let deliveryStatus;\r\n          if (!this.props.showMode && c.latestMessage) {\r\n            const msg = c.latestMessage(true);\r\n            if (msg) {\r\n              deliveryStatus = msg._status || c.msgStatus(msg, true);\r\n              preview = typeof msg.content == 'string' ?\r\n                msg.content.substr(0, MESSAGE_PREVIEW_LENGTH) :\r\n                Drafty.preview(msg.content, MESSAGE_PREVIEW_LENGTH);\r\n            }\r\n          }\r\n          contactNodes.push(\r\n            <Contact\r\n              title={c.public ? c.public.fn : null}\r\n              avatar={makeImageDataUrl(c.public ? c.public.photo : null)}\r\n              comment={comment}\r\n              preview={preview}\r\n              received={deliveryStatus}\r\n              unread={this.props.showUnread ? c.unread : 0}\r\n              now={c.online && this.props.connected}\r\n              acs={c.acs}\r\n              showMode={this.props.showMode}\r\n              badges={badges}\r\n              showCheckmark={showCheckmark}\r\n              selected={selected}\r\n              showOnline={this.props.showOnline && !isChannel}\r\n              isChannel={isChannel}\r\n              onSelected={this.props.onTopicSelected}\r\n              showContextMenu={this.props.showContextMenu}\r\n              item={key}\r\n              index={contactNodes.length}\r\n              key={key} />\r\n          );\r\n          contactsCount ++;\r\n        }\r\n      }, this);\r\n    }\r\n\r\n    return (\r\n      <div className={this.props.noScroll ? null : \"scrollable-panel\"}>\r\n        {contactsCount == 0 ?\r\n          <div className=\"center-medium-text\"\r\n            dangerouslySetInnerHTML={{__html: this.props.emptyListMessage}} />\r\n          :\r\n          null\r\n        }\r\n        {contactNodes.length > 0 ?\r\n          <ul className=\"contact-box\">\r\n            {contactNodes}\r\n          </ul>\r\n          :\r\n          null\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default injectIntl(ContactList);\r\n",
    "// A single topic or user.\r\nimport React from 'react';\r\nimport { defineMessages, FormattedMessage, injectIntl } from 'react-intl';\r\n\r\nimport ContactBadges from './contact-badges.jsx';\r\nimport LetterTile from './letter-tile.jsx';\r\nimport ReceivedMarker from './received-marker.jsx'\r\nimport UnreadBadge from './unread-badge.jsx';\r\n\r\nimport { Drafty } from 'tinode-sdk';\r\n\r\nimport { deliveryMarker } from '../lib/utils.js';\r\n\r\nconst messages = defineMessages({\r\n  drafty_image: {\r\n    id: 'drafty_image',\r\n    defaultMessage: 'Picture',\r\n    description: 'Comment for embedded images in drafty preview'\r\n  },\r\n  drafty_form: {\r\n    id: 'drafty_form',\r\n    defaultMessage: 'Form: ',\r\n    description: 'Comment for form in drafty preview'\r\n  },\r\n  drafty_attachment: {\r\n    id: 'drafty_attachment',\r\n    defaultMessage: 'Attachment',\r\n    description: 'Comment for attachment in drafty preview'\r\n  },\r\n});\r\n\r\nclass Contact extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleClick = this.handleClick.bind(this);\r\n    this.handleContextClick = this.handleContextClick.bind(this);\r\n  }\r\n\r\n  handleClick(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (this.props.onSelected) {\r\n      // Index this.props.index is used by GroupManager.\r\n      this.props.onSelected(this.props.item, this.props.index);\r\n    }\r\n  }\r\n\r\n  handleContextClick(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    this.props.showContextMenu({ topicName: this.props.item, y: e.pageY, x: e.pageX });\r\n  }\r\n\r\n  render() {\r\n    let title = this.props.title;\r\n    if (!title) {\r\n      title = <i><FormattedMessage id=\"unnamed_topic\" defaultMessage=\"Unnamed\"\r\n        description=\"Title shown when the topic has no name\" /></i>;\r\n    } else if (title.length > 30) {\r\n      // FIXME: this is probably wrong for RTL languages.\r\n      title = title.substring(0, 28) + '';\r\n    }\r\n    const online = this.props.now ? 'online' : 'offline';\r\n    const avatar = this.props.avatar ? this.props.avatar : true;\r\n    const badges = this.props.badges ? this.props.badges.slice() : [];\r\n    const icon_badges = [];\r\n    if (this.props.acs) {\r\n      if (this.props.showMode) {\r\n        badges.push({name: this.props.acs.getMode(), key: 'mode'});\r\n      }\r\n      if (this.props.acs.isMuted()) {\r\n        icon_badges.push({icon: 'muted'});\r\n      }\r\n      if (!this.props.acs.isJoiner()) {\r\n        icon_badges.push({icon: 'banned'});\r\n      }\r\n    }\r\n\r\n    const subtitle = this.props.preview ?\r\n      (typeof this.props.preview == 'string' ? this.props.preview :\r\n        React.createElement(React.Fragment, null, Drafty.format(this.props.preview, draftyFormatter, this))) :\r\n      this.props.comment;\r\n\r\n    const icon = deliveryMarker(this.props.received);\r\n    const marker = icon ? <i className={'material-icons small space-right' +\r\n      (icon.color ? ' ' + icon.color : '')}>{icon.name}</i> : null;\r\n\r\n    return (\r\n      <li className={!this.props.showCheckmark && this.props.selected ? 'selected' : null} onClick={this.handleClick}>\r\n        <div className=\"avatar-box\">\r\n          <LetterTile\r\n            avatar={avatar}\r\n            title={this.props.title}\r\n            topic={this.props.item} />\r\n          {this.props.showOnline ? <span className={online} /> :\r\n            (this.props.showCheckmark && this.props.selected ?\r\n            <i className=\"checkmark material-icons\">check_circle</i>\r\n            : null)}\r\n        </div>\r\n        <div className=\"text-box\">\r\n          <div><span className=\"contact-title\">{title}</span>\r\n            {this.props.isChannel ? <img src=\"/img/channel.png\" className=\"channel\" alt=\"channel\" /> : null}\r\n            <UnreadBadge count={this.props.unread} /><ContactBadges badges={icon_badges} />\r\n          </div>\r\n          {this.props.showMode ?\r\n            <span><ContactBadges badges={badges} /></span> :\r\n            <div className=\"contact-comment\">{marker}{subtitle || '\\u00A0'}</div>}\r\n        </div>\r\n        {this.props.showContextMenu ?\r\n          <span className=\"menuTrigger\">\r\n            <a href=\"#\" onClick={this.handleContextClick}>\r\n              <i className=\"material-icons\">expand_more</i>\r\n            </a>\r\n          </span> : null}\r\n      </li>\r\n    );\r\n  }\r\n};\r\n\r\n\r\n// Converts Drafty object into a one-line preview.\r\nfunction draftyFormatter(style, data, values, key) {\r\n  let el = Drafty.tagName(style);\r\n  const attr = { key: key };\r\n  if (el) {\r\n    const { formatMessage } = this.props.intl;\r\n    switch (style) {\r\n      case 'BR':\r\n        // Replace new line with a space.\r\n        el = React.Fragment;\r\n        values = [' '];\r\n        break;\r\n      case 'HL':\r\n        // Make highlight less prominent in preview.\r\n        attr.className = 'highlight preview';\r\n        break;\r\n      case 'LN':\r\n        // Disable links in previews.\r\n        el = 'span';\r\n        break;\r\n      case 'IM':\r\n        // Replace image with '[icon] Image'.\r\n        el = React.Fragment;\r\n        values = [<i key=\"im\" className=\"material-icons\">photo</i>, formatMessage(messages.drafty_image)];\r\n        break;\r\n      case 'BN':\r\n        el = 'span';\r\n        attr.className = 'flat-button faux';\r\n        break;\r\n      case 'FM':\r\n        el = React.Fragment;\r\n        values = [<i key=\"fm\" className=\"material-icons\">dashboard</i>,\r\n          formatMessage(messages.drafty_form)].concat(values || []);\r\n        break;\r\n      case 'RW':\r\n        el = React.Fragment;\r\n        break;\r\n      case 'EX':\r\n        if (data && data.mime == 'application/json') {\r\n          // Ignore JSON attachments: they are form response payloads.\r\n          return null;\r\n        }\r\n        el = React.Fragment;\r\n        values = [<i key=\"ex\" className=\"material-icons\">attachment</i>, formatMessage(messages.drafty_attachment)];\r\n        break;\r\n      default:\r\n        if (el == '_UNKN') {\r\n          el = React.Fragment;\r\n          values = [<i key=\"unkn\" className=\"material-icons\">extension</i>];\r\n        }\r\n        break;\r\n    }\r\n    return React.createElement(el, attr, values);\r\n  } else {\r\n    return values;\r\n  }\r\n};\r\n\r\nexport default injectIntl(Contact);\r\n",
    "// Context Menu: popup/dropdown menu.\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { injectIntl, defineMessages } from 'react-intl';\r\n\r\nimport { REM_SIZE } from '../config.js';\r\nimport HashNavigation from '../lib/navigation.js';\r\n\r\nconst messages = defineMessages({\r\n  info: {\r\n    id: 'menu_item_info',\r\n    defaultMessage: 'Info',\r\n    description: 'Show extended topic information'\r\n  },\r\n  clear_messages: {\r\n    id: 'menu_item_clear_messages',\r\n    defaultMessage: 'Clear messages',\r\n    description: 'Delete all messages'\r\n  },\r\n  clear_for_all: {\r\n    id: 'menu_item_clear_messages_for_all',\r\n    defaultMessage: 'Clear for All',\r\n    description: 'Delete all message(s) for all members'\r\n  },\r\n  delete: {\r\n    id: 'menu_item_delete',\r\n    defaultMessage: 'Delete',\r\n    description: 'Delete selected messages'\r\n  },\r\n  delete_for_all: {\r\n    id: 'menu_item_delete_for_all',\r\n    defaultMessage: 'Delete for All',\r\n    description: 'Delete selected message(s) for all members'\r\n  },\r\n  send_retry: {\r\n    id: 'menu_item_send_retry',\r\n    defaultMessage: 'Retry',\r\n    description: 'Retry sending message'\r\n  },\r\n  mute: {\r\n    id: 'menu_item_mute',\r\n    defaultMessage: 'Mute',\r\n    description: 'Turn off notifications'\r\n  },\r\n  unmute: {\r\n    id: 'menu_item_unmute',\r\n    defaultMessage: 'Unmute',\r\n    description: 'Turn notifications on'\r\n  },\r\n  topic_delete: {\r\n    id: 'menu_item_delete_topic',\r\n    defaultMessage: 'Delete',\r\n    description: 'Delete entire topic'\r\n  },\r\n  topic_delete_warning: {\r\n    id: 'topic_delete_warning',\r\n    defaultMessage: 'Are you sure you want to delete this conversation? It cannot be undone.',\r\n    description: 'Alert warning when deleting entire topic'\r\n  },\r\n  delete_messages_warning: {\r\n    id: 'delete_messages_warning',\r\n    defaultMessage: 'Are you sure you want to delete all messages for everyone? It cannot be undone.',\r\n    description: 'Alert dialog warning when hard-deleting all messages.'\r\n  },\r\n  unblock: {\r\n    id: 'menu_item_unblock',\r\n    defaultMessage: 'Unblock',\r\n    description: 'Unblock topic or user'\r\n  },\r\n  // Generic string suitable for either topic or user.\r\n  block: {\r\n    id: 'menu_item_block',\r\n    defaultMessage: 'Block',\r\n    description: 'Block topic or user'\r\n  },\r\n  topic_block_warning: {\r\n    id: 'topic_block_warning',\r\n    defaultMessage: 'Are you sure you want to block this conversation?',\r\n    description: 'Alert warning when blocking a topic.'\r\n  },\r\n  member_delete: {\r\n    id: 'menu_item_member_delete',\r\n    defaultMessage: 'Remove',\r\n    description: 'Remove user from topic'\r\n  },\r\n  archive: {\r\n    id: 'menu_item_archive_topic',\r\n    defaultMessage: 'Archive',\r\n    description: 'Move topic from the list of active chats to archive'\r\n  },\r\n  unarchive: {\r\n    id: 'menu_item_restore_topic',\r\n    defaultMessage: 'Restore',\r\n    description: 'Restore topic from archive'\r\n  },\r\n  edit_permissions: {\r\n    id: 'menu_item_edit_permissions',\r\n    defaultMessage: 'Edit permissions',\r\n    description: 'Menu item [Edit permissions]'\r\n  },\r\n  clear_messages_warning: {\r\n    id: 'clear_messages_warning',\r\n    defaultMessage: 'Are you sure you want to clear all messages? It cannot be undone.',\r\n    description: 'Alert dialog warning when deleting all messages.'\r\n  },\r\n});\r\n\r\nclass ContextMenu extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const {formatMessage} = props.intl;\r\n\r\n    this.handlePageClick = this.handlePageClick.bind(this);\r\n    this.handleEscapeKey = this.handleEscapeKey.bind(this);\r\n    this.handleClick = this.handleClick.bind(this);\r\n\r\n    // Preconfigured menu items.\r\n    this.MenuItems = {\r\n      'topic_info': {\r\n        id: 'topic_info',\r\n        title: formatMessage(messages.info),\r\n        handler: null\r\n      },\r\n      'messages_clear': {\r\n        id: 'messages_clear',\r\n        title: formatMessage(messages.clear_messages),\r\n        handler: (params, errorHandler) => {\r\n          return props.onShowAlert(\r\n            formatMessage(messages.clear_messages), // title\r\n            formatMessage(messages.clear_messages_warning), // content\r\n            (() => { this.deleteMessages(true, false, params, errorHandler); }), // onConfirm\r\n            null, // \"OK\"\r\n            true, // Show Reject button\r\n            null  // \"Cancel\"\r\n          );\r\n        }\r\n      },\r\n      'messages_clear_hard': {\r\n        id: 'messages_clear_hard',\r\n        title: formatMessage(messages.clear_for_all),\r\n        handler: (params, errorHandler) => {\r\n          return props.onShowAlert(\r\n            formatMessage(messages.clear_for_all), // title\r\n            formatMessage(message.delete_messages_warning), // content\r\n            (() => { return this.deleteMessages(true, true, params, errorHandler); }),\r\n            null, // \"OK\"\r\n            true, // Show Reject button\r\n            null  // \"Cancel\"\r\n          );\r\n        }\r\n      },\r\n      'message_delete': {\r\n        id: 'message_delete',\r\n        title: formatMessage(messages.delete),\r\n        handler: (params, errorHandler) => {\r\n          return this.deleteMessages(false, false, params, errorHandler);\r\n        }\r\n      },\r\n      'message_delete_hard': {\r\n        id: 'message_delete_hard',\r\n        title: formatMessage(messages.delete_for_all),\r\n        handler: (params, errorHandler) => {\r\n          return this.deleteMessages(false, true, params, errorHandler);\r\n        }\r\n      },\r\n      'menu_item_send_retry': {\r\n        id: 'menu_item_send_retry',\r\n        title: formatMessage(messages.send_retry),\r\n        handler: (params, errorHandler) => {\r\n          return this.retryMessage(params, errorHandler);\r\n        }\r\n      },\r\n      'topic_unmute': {\r\n        id: 'topic_unmute',\r\n        title: formatMessage(messages.unmute),\r\n        handler: this.topicPermissionSetter.bind(this, '+P')\r\n      },\r\n      'topic_mute': {\r\n        id: 'topic_mute',\r\n        title: formatMessage(messages.mute),\r\n        handler: this.topicPermissionSetter.bind(this, '-P')\r\n      },\r\n      'topic_unblock': {\r\n        id: 'topic_unblock',\r\n        title: formatMessage(messages.unblock),\r\n        handler: this.topicPermissionSetter.bind(this, '+JP')\r\n      },\r\n      'topic_block': {\r\n        id: 'topic_block',\r\n        title: formatMessage(messages.block),\r\n        handler: (params, errorHandler) => {\r\n          return props.onShowAlert(\r\n            formatMessage(messages.block), // title\r\n            formatMessage(messages.topic_block_warning), // content\r\n            (() => {\r\n              return this.topicPermissionSetter('-JP', params, errorHandler).then((ctrl) => {\r\n                this.props.onTopicRemoved(params.topicName);\r\n                return ctrl;\r\n              });\r\n            }),\r\n            null, // \"OK\"\r\n            true, // Show Reject button\r\n            null  // \"Cancel\"\r\n          );\r\n        }\r\n      },\r\n      'topic_delete': {\r\n        id: 'topic_delete',\r\n        title: formatMessage(messages.topic_delete),\r\n        handler: (params, errorHandler) => {\r\n          return props.onShowAlert(\r\n            formatMessage(messages.topic_delete), // title\r\n            formatMessage(messages.topic_delete_warning), // content\r\n            (() => {\r\n              const topic = this.props.tinode.getTopic(params.topicName);\r\n              if (!topic) {\r\n                console.log(\"Topic not found: \", params.topicName);\r\n                return;\r\n              }\r\n              return topic.delTopic(true).catch((err) => {\r\n                if (errorHandler) {\r\n                  errorHandler(err.message, 'err');\r\n                }\r\n              });\r\n            }),\r\n            null, // \"OK\"\r\n            true, // Show Reject button\r\n            null  // \"Cancel\"\r\n          );\r\n        }\r\n      },\r\n      'topic_archive': {\r\n        id: 'topic_archive',\r\n        title: formatMessage(messages.archive),\r\n        handler: (params, errorHandler) => {\r\n          const topic = this.props.tinode.getTopic(params.topicName);\r\n          if (!topic) {\r\n            console.log(\"Topic not found: \", params.topicName);\r\n            return;\r\n          }\r\n          return topic.archive(true).catch((err) => {\r\n            if (errorHandler) {\r\n              errorHandler(err.message, 'err');\r\n            }\r\n          });\r\n        }\r\n      },\r\n      'topic_restore': {\r\n        id: 'topic_restore',\r\n        title: formatMessage(messages.unarchive),\r\n        handler: (params, errorHandler) => {\r\n          const topic = this.props.tinode.getTopic(params.topicName);\r\n          if (!topic) {\r\n            console.log(\"Topic not found: \", params.topicName);\r\n            return;\r\n          }\r\n          return topic.archive(false).catch((err) => {\r\n            if (errorHandler) {\r\n              errorHandler(err.message, 'err');\r\n            }\r\n          });\r\n        }\r\n      },\r\n      // menu_item_edit_permissions is defined elsewhere.\r\n      'permissions': {\r\n        id: 'permissions',\r\n        title: formatMessage(messages.edit_permissions),\r\n        handler: null\r\n      },\r\n      'member_delete': {\r\n        id: 'member_delete',\r\n        title: formatMessage(messages.member_delete),\r\n        handler: (params, errorHandler) => {\r\n          const topic = this.props.tinode.getTopic(params.topicName);\r\n          if (!topic || !params.user) {\r\n            console.log(\"Topic or user not found: '\" + params.topicName + \"', '\" + params.user + \"'\");\r\n            return;\r\n          }\r\n          return topic.delSubscription(params.user).catch((err) => {\r\n            if (errorHandler) {\r\n              errorHandler(err.message, 'err');\r\n            }\r\n          });\r\n        }\r\n      },\r\n      'member_mute': {\r\n        id: 'member_mute',\r\n        title: formatMessage(messages.mute),\r\n        handler: this.topicPermissionSetter.bind(this, '-P')\r\n      },\r\n      'member_unmute': {\r\n        id: 'member_unmute',\r\n        title: formatMessage(messages.unmute),\r\n        handler: this.topicPermissionSetter.bind(this, '+P')\r\n      },\r\n      'member_block': {\r\n        id: 'member_block',\r\n        title: formatMessage(messages.block),\r\n        handler: this.topicPermissionSetter.bind(this, '-JP')\r\n      },\r\n      'member_unblock': {\r\n        id: 'member_unblock',\r\n        title: formatMessage(messages.unblock),\r\n        handler: this.topicPermissionSetter.bind(this, '+JP')\r\n      },\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('mousedown', this.handlePageClick, false);\r\n    document.addEventListener('keyup', this.handleEscapeKey, false);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('mousedown', this.handlePageClick, false);\r\n    document.removeEventListener('keyup', this.handleEscapeKey, false);\r\n  }\r\n\r\n  handlePageClick(e) {\r\n    if (ReactDOM.findDOMNode(this).contains(e.target)) {\r\n      return;\r\n    }\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    this.props.hide();\r\n  }\r\n\r\n  handleEscapeKey(e) {\r\n    if (e.keyCode === 27) {\r\n      this.props.hide();\r\n    }\r\n  }\r\n\r\n  handleClick(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    this.props.hide();\r\n    let item = this.props.items[e.currentTarget.dataset.id];\r\n    if (typeof item == 'string') {\r\n      item = this.MenuItems[item];\r\n    }\r\n\r\n    if (!item) {\r\n      console.log(\"Invalid menu item ID\", e.currentTarget.dataset.id);\r\n    } else {\r\n      this.props.onAction(\r\n        item.id,\r\n        item.handler(this.props.params, this.props.onError),\r\n        this.props.params);\r\n    }\r\n  }\r\n\r\n  // Menu Actions\r\n\r\n  deleteMessages(all, hard, params, errorHandler) {\r\n    const topic = this.props.tinode.getTopic(params.topicName);\r\n    if (!topic) {\r\n      console.log(\"Topic not found: \", params.topicName);\r\n      return;\r\n    }\r\n\r\n    // We don't know if the message is still pending (e.g. attachment is being uploaded),\r\n    // so try cancelling first. No harm if we can't cancel.\r\n    // The message can be cancelled if transmission to the server has not\r\n    // started yet or if the message send has failed.\r\n    if (!all && topic.cancelSend(params.seq)) {\r\n      return;\r\n    }\r\n    // Can't cancel. Delete instead.\r\n    const promise = all ?\r\n      topic.delMessagesAll(hard) :\r\n      topic.delMessagesList([params.seq], hard);\r\n\r\n    return promise.catch((err) => {\r\n      if (errorHandler) {\r\n        errorHandler(err.message, 'err');\r\n      }\r\n    });\r\n  }\r\n\r\n  // Retries sending failed message.\r\n  retryMessage(params, errorHandler) {\r\n    const topic = this.props.tinode.getTopic(params.topicName);\r\n    // Remove the existing message entry.\r\n    if (!topic || !topic.flushMessage(params.seq)) {\r\n      return;\r\n    }\r\n    const msg = topic.createMessage(params.content, false);\r\n    return topic.publishDraft(msg).catch((err) => {\r\n      if (errorHandler) {\r\n        errorHandler(err.message, 'err');\r\n      }\r\n    });\r\n  }\r\n\r\n  // Function is used by context menu to set permissions.\r\n  topicPermissionSetter(mode, params, errorHandler) {\r\n    const topic = this.props.tinode.getTopic(params.topicName);\r\n    if (!topic) {\r\n      console.log(\"Topic not found\", params.topicName);\r\n      return;\r\n    }\r\n\r\n    let result = topic.updateMode(params.user, mode);\r\n    if (errorHandler) {\r\n      result = result.catch((err) => {\r\n        errorHandler(err.message, 'err');\r\n      });\r\n    }\r\n    return result;\r\n  }\r\n\r\n  render() {\r\n    let count = 0;\r\n    let menu = [];\r\n    this.props.items.map((item) => {\r\n      if (typeof item == 'string') {\r\n        item = this.MenuItems[item];\r\n      }\r\n      if (item && item.title) {\r\n        menu.push(\r\n          item.title == '-' ?\r\n            <li className=\"separator\" key={count} />\r\n            :\r\n            <li onClick={this.handleClick} data-id={count} key={count}>{item.title}</li>\r\n        );\r\n      }\r\n      count++;\r\n    });\r\n\r\n    // Ensure that menu is inside the app-container.\r\n    const hSize = 12 * REM_SIZE;\r\n    const vSize = REM_SIZE * (0.7 + menu.length * 2.5);\r\n    const left = (this.props.bounds.right - this.props.clickAt.x < hSize) ?\r\n        (this.props.clickAt.x - this.props.bounds.left - hSize) :\r\n        (this.props.clickAt.x - this.props.bounds.left);\r\n    const top = (this.props.bounds.bottom - this.props.clickAt.y < vSize) ?\r\n        (this.props.clickAt.y - this.props.bounds.top - vSize) :\r\n        (this.props.clickAt.y - this.props.bounds.top);\r\n\r\n    const position = {\r\n      left: left + 'px',\r\n      top: top + 'px'\r\n    };\r\n\r\n    return (\r\n      <ul className=\"menu\" style={position}>\r\n        {menu}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nexport default injectIntl(ContextMenu);\r\n",
    "import React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport SendMessage from '../widgets/send-message.jsx';\r\n\r\nimport { bytesToHumanSize } from '../lib/strformat.js';\r\n\r\n// Get material icon name from mime type.\r\nfunction iconFromMime(mime) {\r\n  // If more icons become available in material icons, add them to this mime-to-icon mapping.\r\n  const mimeToIcon = {default: 'insert_drive_file', image: 'image', text: 'description', video: 'theaters'};\r\n\r\n  return mimeToIcon[mime] || mimeToIcon[(mime || '').split('/')[0]] || mimeToIcon['default'];\r\n}\r\n\r\nexport default class DocPreview extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleSendDoc = this.handleSendDoc.bind(this);\r\n  }\r\n\r\n  handleSendDoc(caption) {\r\n    this.props.onClose();\r\n    this.props.onSendMessage(this.props.content.file);\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.content) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div id=\"image-preview\">\r\n        <div id=\"image-preview-caption-panel\">\r\n          <span>{this.props.content.filename}</span>\r\n          <a href=\"#\" onClick={(e) => {e.preventDefault(); this.props.onClose();}}><i className=\"material-icons gray\">close</i></a>\r\n        </div>\r\n        <div id=\"image-preview-container\">\r\n          <div className=\"flex-column narrow\">\r\n            <i className=\"material-icons gray\">{iconFromMime(this.props.content.type)}</i>\r\n            <div><b><FormattedMessage id=\"label_content_type\" defaultMessage=\"Content type:\"\r\n              description=\"Label for file content type (mime)\" /></b> {this.props.content.type || 'application/octet-stream'}</div>\r\n            <div><b><FormattedMessage id=\"label_size\" defaultMessage=\"Size:\"\r\n              description=\"Label for file size\" /></b> {bytesToHumanSize(this.props.content.size)}</div>\r\n          </div>\r\n        </div>\r\n        <SendMessage\r\n          noInput={true}\r\n          onSendMessage={this.handleSendDoc}\r\n          onError={this.props.onError} />\r\n      </div>\r\n    );\r\n  }\r\n};\r\n",
    "import React from 'react';\r\n\r\nimport MenuCancel from './menu-cancel.jsx';\r\n\r\nexport default class ErrorPanel extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      show: false,\r\n    };\r\n\r\n    this.hide = this.hide.bind(this);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.level !== this.props.level) {\r\n      this.setState({\r\n        show: !(!this.props.level)\r\n      });\r\n    }\r\n  }\r\n\r\n  hide() {\r\n    this.setState({show: false});\r\n    if (this.props.onClearError) {\r\n      this.props.onClearError();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const icons = {err: 'error', warn: 'warning', info: 'info'}\r\n    const level = icons[this.props.level] || '';\r\n    const className = 'info-box ' + level;\r\n    return (\r\n      <div className={className}>\r\n        <div className=\"icon\"><i className=\"material-icons\">{level}</i></div>\r\n        <span>\r\n          {this.props.text}\r\n          {this.props.action ?\r\n            <>\r\n              &#32;<a href=\"#\"\r\n                style={{ whiteSpace: 'nowrap' }}\r\n                onClick={(e) => {e.preventDefault(); this.props.action();}}>\r\n                {this.props.actionText}\r\n              </a>\r\n            </>\r\n          : null}\r\n        </span>\r\n        <div className=\"cancel\"><MenuCancel onCancel={this.hide} /></div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n",
    "// File uload/download progress indicator with a cancel inside.\r\nimport React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nexport default class FileProgress extends React.PureComponent {\r\n  render() {\r\n    return (\r\n      <div className=\"uploader\">\r\n        <div><span style={{width: (this.props.progress * 100) + \"%\"}}></span></div>\r\n        {this.props.progress < 0.999 ?\r\n          <a href=\"#\" onClick={(e) => {e.preventDefault(); this.props.onCancel();}}>\r\n            <i className=\"material-icons\">close</i> <FormattedMessage id=\"action_cancel\"\r\n              defaultMessage=\"cancel\" description=\"Call to action [cancel]\" />\r\n          </a>\r\n          :\r\n          <FormattedMessage id=\"upload_finishing\" defaultMessage=\"finishing...\"\r\n            description=\"Notification that upload is finishing\" />\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",
    "// GroupMembers: control for managing a list of group members.\r\nimport React from 'react';\r\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\r\n\r\nimport ChipInput from './chip-input.jsx';\r\nimport ContactList from './contact-list.jsx';\r\n\r\nconst messages = defineMessages({\r\n  no_contacts: {\r\n    id: 'no_contacts',\r\n    defaultMessage: 'You have no contacts :-(',\r\n    description: 'Shown in ContactsView when the user has no contacts'\r\n  },\r\n  contacts_not_found_short: {\r\n    id: 'contacts_not_found_short',\r\n    defaultMessage: \"No contacts match ''{query}''\",\r\n    description: 'Shown in ContactsView when search returned no results'\r\n  }\r\n});\r\n\r\nclass GroupManager extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      // Array of topic members\r\n      members: props.members,\r\n      index: GroupManager.indexMembers(props.members),\r\n      staticMembers: GroupManager.staticMembers(props.members, props.keepInitialMembers, props.requiredMember),\r\n      contactFilter: '',\r\n      noContactsMessage: props.intl.formatMessage(messages.no_contacts),\r\n      selectedContacts: GroupManager.selectedContacts(props.members)\r\n    };\r\n\r\n    this.handleContactSelected = this.handleContactSelected.bind(this);\r\n    this.handleMemberRemoved = this.handleMemberRemoved.bind(this);\r\n    this.handleContactFilter = this.handleContactFilter.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleCancel = this.handleCancel.bind(this);\r\n  }\r\n\r\n  static indexMembers(members) {\r\n    let index = {};\r\n    members.map((m) => {\r\n      index[m.user] = {delta: 0, present: true}; // Delta: 0 unchanged, +1 added, -1 removed\r\n    });\r\n    return index;\r\n  }\r\n\r\n  static staticMembers(members, keepInitial, requiredMember) {\r\n    let stat = [];\r\n    members.map((m) => {\r\n      if (keepInitial || m.user == requiredMember) {\r\n        stat.push(m.user);\r\n      }\r\n    });\r\n    return stat;\r\n  }\r\n\r\n  static selectedContacts(members) {\r\n    let sel = [];\r\n    members.map((m) => {\r\n      sel.push(m.user);\r\n    });\r\n    return sel;\r\n  }\r\n\r\n  handleContactSelected(userId, index) {\r\n    let status = this.state.index[userId];\r\n    if (status) {\r\n      if (status.present) {\r\n        // Prevent duplicate members\r\n        return;\r\n      }\r\n      status.delta += 1;\r\n      status.present = true;\r\n    } else {\r\n      status = {delta: 1, present: true};\r\n    }\r\n\r\n    let m = this.state.members.slice();\r\n    m.push(this.props.contacts[index]);\r\n\r\n    const sel = GroupManager.selectedContacts(m);\r\n\r\n    const i = this.state.index;\r\n    i[userId] = status;\r\n\r\n    this.setState({members: m, index: i, selectedContacts: sel});\r\n  }\r\n\r\n  handleMemberRemoved(userId, index) {\r\n    const status = this.state.index[userId];\r\n    if (!status || !status.present) {\r\n      return;\r\n    }\r\n    status.present = false;\r\n    status.delta -= 1;\r\n\r\n    let m = this.state.members.slice();\r\n    m.splice(index, 1);\r\n\r\n    const sel = GroupManager.selectedContacts(m);\r\n\r\n    const i = this.state.index;\r\n    i[userId] = status;\r\n\r\n    this.setState({members: m, index: i, selectedContacts: sel});\r\n  }\r\n\r\n  handleContactFilter(val) {\r\n    const {formatMessage} = this.props.intl;\r\n    const msg = !val ?\r\n      formatMessage(messages.no_contacts) :\r\n      formatMessage(messages.contacts_not_found_short, {query: val});\r\n\r\n    this.setState({contactFilter: val, noContactsMessage: msg});\r\n  }\r\n\r\n  static doContactFiltering(filter, values) {\r\n    if (filter) {\r\n      for (let i=0; i<values.length; i++) {\r\n        if (values[i].indexOf(filter) >= 0) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  handleSubmit() {\r\n    var instance = this;\r\n    var members = [];\r\n    var added = [];\r\n    var removed = [];\r\n\r\n    var keys = Object.keys(this.state.index);\r\n    keys.map(function(k) {\r\n      if (instance.state.index[k].present) {\r\n        members.push(k);\r\n      }\r\n\r\n      if (instance.state.index[k].delta > 0) {\r\n        added.push(k);\r\n      } else if (instance.state.index[k].delta < 0) {\r\n        removed.push(k);\r\n      }\r\n    });\r\n    this.props.onSubmit(members, added, removed);\r\n  }\r\n\r\n  handleCancel() {\r\n    this.props.onCancel();\r\n  }\r\n\r\n  render() {\r\n    const {formatMessage} = this.props.intl;\r\n    return (\r\n      <div id=\"group-manager\">\r\n        <div className=\"panel-form-row\">\r\n          <label className=\"small\">\r\n            <FormattedMessage id=\"title_group_members\" defaultMessage=\"Group Members\" description=\"Section title\" />\r\n          </label>\r\n        </div>\r\n        <div className=\"panel-form-row\">\r\n          <ChipInput\r\n            chips={this.state.members}\r\n            staticMembers={this.state.staticMembers}\r\n            prompt=\"add members\"\r\n            filterFunc={this.handleContactFilter}\r\n            onChipRemoved={this.handleMemberRemoved} />\r\n        </div>\r\n        <div className=\"panel-form-row\">\r\n          <label className=\"small\">\r\n            <FormattedMessage id=\"title_all_contacts\" defaultMessage=\"All Contacts\"\r\n              description=\"Section title [All Contacts]\" />\r\n          </label>\r\n        </div>\r\n        <ContactList\r\n          contacts={this.props.contacts}\r\n          myUserId={this.props.myUserId}\r\n          topicSelected={this.state.selectedContacts}\r\n          filter={this.state.contactFilter}\r\n          filterFunc={GroupManager.doContactFiltering}\r\n          emptyListMessage={this.state.noContactsMessage}\r\n          showOnline={false}\r\n          showUnread={false}\r\n          onTopicSelected={this.handleContactSelected} />\r\n        <div id=\"group-manager-buttons\" className=\"panel-form-row\">\r\n          <button className=\"primary\" onClick={this.handleSubmit}>\r\n            <FormattedMessage id=\"button_ok\" defaultMessage=\"OK\" description=\"Button [OK]\" />\r\n          </button>\r\n          <button className=\"secondary\" onClick={this.handleCancel}>\r\n            <FormattedMessage id=\"button_cancel\" defaultMessage=\"Cancel\" description=\"Button [Cancel]\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default injectIntl(GroupManager);\r\n",
    "// GroupSubs: a list of group subscribers currently online.\r\n// Show in the topic title bar\r\nimport React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport { MAX_ONLINE_IN_TOPIC } from '../config.js'\r\n\r\nimport LetterTile from './letter-tile.jsx';\r\nimport { makeImageDataUrl } from '../lib/blob-helpers.js';\r\n\r\nexport default class GroupSubs extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    const usersOnline = [];\r\n    const totalCount = (this.props.subscribers || []).length;\r\n    const countToShow = Math.min(MAX_ONLINE_IN_TOPIC, totalCount);\r\n\r\n    (this.props.subscribers || []).some((sub) => {\r\n      usersOnline.push(\r\n        <div className=\"avatar-box\" key={sub.user}>\r\n          <LetterTile\r\n            topic={sub.user}\r\n            avatar={makeImageDataUrl(sub.public ? sub.public.photo : null) || true}\r\n            title={sub.public ? sub.public.fn : null} />\r\n        </div>\r\n      );\r\n      return usersOnline.length == countToShow;\r\n    });\r\n\r\n    return (\r\n      <div id=\"topic-users\">{usersOnline} {totalCount > countToShow ?\r\n        <span>\r\n          <FormattedMessage id=\"more_online_members\" defaultMessage=\"+{overflow} more\"\r\n              description=\"Shown in MessagesView title bar when the number of online subscribers exceeds MAX_ONLINE_IN_TOPIC\"\r\n              values={{ overflow: (totalCount - countToShow) }} />\r\n        </span> : null}\r\n      </div>\r\n    );\r\n  }\r\n};\r\n",
    "import React from 'react';\r\n\r\nimport { KNOWN_HOSTS } from '../config.js';\r\n\r\n/* Combobox for selecting host name */\r\n\r\nexport default class HostSelector extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      hostName: props.serverAddress,\r\n      changed: false\r\n    };\r\n\r\n    this.handleHostNameChange = this.handleHostNameChange.bind(this);\r\n    this.handleEditingFinished = this.handleEditingFinished.bind(this);\r\n  }\r\n\r\n  handleHostNameChange(e) {\r\n    this.setState({hostName: e.target.value, changed: true});\r\n  }\r\n\r\n  handleEditingFinished() {\r\n    if (this.state.changed) {\r\n      this.setState({changed: false});\r\n      this.props.onServerAddressChange(this.state.hostName.trim());\r\n    }\r\n  }\r\n\r\n  render() {\r\n    var hostOptions = [];\r\n    for (let key in KNOWN_HOSTS) {\r\n      let item = KNOWN_HOSTS[key];\r\n      hostOptions.push(\r\n        <option key={item} value={item} />\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"panel-form-row\">\r\n        <input type=\"search\" id=\"host-name\" placeholder={this.props.hostName} list=\"known-hosts\"\r\n          className=\"quoted\" value={this.state.hostName} onChange={this.handleHostNameChange}\r\n          onBlur={this.handleEditingFinished} required />\r\n        <datalist id=\"known-hosts\">\r\n          {hostOptions}\r\n        </datalist>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",
    "import React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport SendMessage from '../widgets/send-message.jsx';\r\n\r\nimport { REM_SIZE } from '../config.js';\r\nimport { fitImageSize } from '../lib/blob-helpers.js';\r\nimport { bytesToHumanSize } from '../lib/strformat.js';\r\n\r\nexport default class ImagePreview extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      width: 0,\r\n      height: 0\r\n    };\r\n\r\n    this.handleSendImage = this.handleSendImage.bind(this);\r\n  }\r\n\r\n  assignWidth(node) {\r\n    if (node && !this.state.width) {\r\n      const bounds = node.getBoundingClientRect();\r\n      this.setState({\r\n        width: bounds.width | 0,\r\n        height: bounds.height | 0\r\n      });\r\n    }\r\n  }\r\n\r\n  handleSendImage(caption) {\r\n    this.props.onClose();\r\n    this.props.onSendMessage(caption, this.props.content.blob);\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.content) {\r\n      return null;\r\n    }\r\n\r\n    const dim = fitImageSize(this.props.content.width, this.props.content.height,\r\n      this.state.width, this.state.height, false);\r\n    const size = dim ? { width: dim.dstWidth + 'px', height: dim.dstHeight + 'px' } :\r\n      ((this.props.content.width > this.props.content.height) ? {width: '100%'} : {height: '100%'});\r\n    size.maxWidth = '100%';\r\n    size.maxHeight = '100%';\r\n\r\n    let filename = this.props.content.filename;\r\n    // Average font aspect ratio is ~0.5; File name takes 1/3 of the viewport width.\r\n    const maxlength = Math.max(((this.state.width / REM_SIZE / 1.5) | 0) - 2, 12);\r\n    if (filename.length > maxlength) {\r\n      filename = filename.slice(0, maxlength/2 - 1) + '' + filename.slice(1 - maxlength/2);\r\n    }\r\n    const width = this.props.content.width || '-';\r\n    const height = this.props.content.height || '-';\r\n    return (\r\n      <div id=\"image-preview\">\r\n        <div id=\"image-preview-caption-panel\">\r\n          {!this.props.onSendMessage ?\r\n            <a href={this.props.content.url} download={this.props.content.filename}>\r\n              <i className=\"material-icons\">file_download</i> <FormattedMessage\r\n                id=\"download_action\" defaultMessage=\"download\" description=\"Call to action [download]\" />\r\n            </a>\r\n            :\r\n            <span>{this.props.content.filename}</span>\r\n          }\r\n          <a href=\"#\" onClick={(e) => {e.preventDefault(); this.props.onClose();}}><i className=\"material-icons gray\">close</i></a>\r\n        </div>\r\n        <div id=\"image-preview-container\" ref={(node) => this.assignWidth(node)}>\r\n          <img src={this.props.content.url} style={size} className=\"image-preview\" alt={this.props.content.filename} />\r\n        </div>\r\n        {this.props.onSendMessage ?\r\n          <SendMessage\r\n            messagePrompt=\"add_image_caption\"\r\n            acceptBlank={true}\r\n            onSendMessage={this.handleSendImage}\r\n            onError={this.props.onError} />\r\n          :\r\n          <div id=\"image-preview-footer\">\r\n            <div>\r\n              <div><b><FormattedMessage id=\"label_file_name\" defaultMessage=\"File name:\"\r\n                description=\"Label for a file name\" /></b></div>\r\n              <div><span title={this.props.content.filename}>{filename ? filename : '-'}</span></div>\r\n            </div>\r\n            <div>\r\n              <div><b><FormattedMessage id=\"label_content_type\" defaultMessage=\"Content type:\"\r\n                description=\"Label for file content type (mime)\" /></b></div>\r\n              <div>{this.props.content.type}</div>\r\n            </div>\r\n            <div>\r\n              <div><b><FormattedMessage id=\"label_size\" defaultMessage=\"Size:\"\r\n                description=\"Label for file size\" /></b></div>\r\n              <div>{width} &times; {height} px; {bytesToHumanSize(this.props.content.size)}</div>\r\n            </div>\r\n          </div>}\r\n      </div>\r\n    );\r\n  }\r\n};\r\n",
    "// In-place text editor. Shows text with an icon which toggles it into an input field.\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport VisiblePassword from './visible-password.jsx';\r\n\r\nexport default class InPlaceEdit extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      active: props.active,\r\n      initialValue: props.value || '',\r\n      value: props.value || ''\r\n    };\r\n\r\n    this.handeTextChange = this.handeTextChange.bind(this);\r\n    this.handleKeyDown = this.handleKeyDown.bind(this);\r\n    this.handleStartEditing = this.handleStartEditing.bind(this);\r\n    this.handleEditingFinished = this.handleEditingFinished.bind(this);\r\n    this.handlePasswordFinished = this.handlePasswordFinished.bind(this);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    // If text has changed while in read mode, update text and discard changes.\r\n    // Ignore update if in edit mode.\r\n    const newValue = this.props.value || '';\r\n    if (prevState.initialValue != newValue && !prevState.active) {\r\n      this.setState({\r\n        initialValue: newValue,\r\n        value: newValue\r\n      });\r\n    }\r\n  }\r\n\r\n  handeTextChange(e) {\r\n    this.setState({value: e.target.value});\r\n  }\r\n\r\n  handleKeyDown(e) {\r\n    if (e.keyCode === 27) {\r\n      // Escape pressed\r\n      this.setState({value: this.props.value, active: false});\r\n    } else if (e.keyCode === 13) {\r\n      // Enter pressed\r\n      this.handleEditingFinished(e);\r\n    }\r\n  }\r\n\r\n  handleStartEditing() {\r\n    if (!this.props.readOnly) {\r\n      ReactDOM.findDOMNode(this).focus();\r\n      this.setState({active: true});\r\n    }\r\n  }\r\n\r\n  handleEditingFinished(event) {\r\n    if (this.props.required && !event.target.checkValidity()) {\r\n      // Empty input\r\n      this.setState({value: this.props.value, active: false});\r\n      return;\r\n    }\r\n    this.setState({active: false});\r\n    let value = this.state.value.trim();\r\n    if ((value || this.props.value) && (value !== this.props.value)) {\r\n      this.props.onFinished(value);\r\n    }\r\n  }\r\n\r\n  handlePasswordFinished(value) {\r\n    this.setState({active: false});\r\n    if (value && (value !== this.props.value)) {\r\n      this.props.onFinished(value);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.state.active) {\r\n      var fieldType = this.props.type || 'text';\r\n    } else {\r\n      var spanText = this.props.type == 'password' ? '' : this.state.value;\r\n      var spanClass = 'in-place-edit' +\r\n        (this.props.readOnly ? ' disabled' : '');\r\n      if (!spanText) {\r\n        spanText = this.props.placeholder;\r\n        spanClass += ' placeholder';\r\n      }\r\n      if (spanText.length > 20) {\r\n        // FIXME: this is wrong for RTL languages.\r\n        spanText = spanText.substring(0, 19) + '...';\r\n      }\r\n    }\r\n    return (\r\n      this.state.active ?\r\n        (fieldType == 'password' ?\r\n          <VisiblePassword\r\n            value={this.state.value}\r\n            placeholder={this.props.placeholder}\r\n            required={this.props.required ? 'required' : ''}\r\n            autoComplete={this.props.autoComplete}\r\n            autoFocus={true}\r\n            onFinished={this.handlePasswordFinished}/>\r\n          :\r\n          <input type={fieldType}\r\n            value={this.state.value}\r\n            placeholder={this.props.placeholder}\r\n            required={this.props.required ? 'required' : ''}\r\n            autoComplete={this.props.autoComplete}\r\n            autoFocus\r\n            onChange={this.handeTextChange}\r\n            onKeyDown={this.handleKeyDown}\r\n            onBlur={this.handleEditingFinished} />\r\n        )\r\n        :\r\n        <span className={spanClass} onClick={this.handleStartEditing}>\r\n          <span className=\"content\">{spanText}</span>\r\n        </span>\r\n    );\r\n  }\r\n};\r\n",
    "// A single topic or user.\r\nimport React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nexport default class Invitation extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleButtonAction = this.handleButtonAction.bind(this);\r\n  }\r\n\r\n  handleButtonAction(evt, data) {\r\n    evt.preventDefault();\r\n    this.props.onAction(data);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"accept-invite-panel\">\r\n        <div className=\"title\">\r\n          <FormattedMessage id=\"chat_invitation\"\r\n            defaultMessage=\"You are invited to start a new chat. What would you like to do?\"\r\n            description=\"New chat invitation message: [Accept] [Ignore] [Block].\" />\r\n        </div>\r\n        <div className=\"footer\">\r\n          <button className=\"primary\" onClick={event => { this.handleButtonAction(event, \"accept\"); }}>\r\n            <FormattedMessage id=\"chat_invitation_accept\"\r\n              defaultMessage=\"Accept\" description=\"Action [Accept] for chat invitation.\" />\r\n          </button>\r\n          <button className=\"secondary\" onClick={event => { this.handleButtonAction(event, \"delete\"); }}>\r\n            <FormattedMessage id=\"chat_invitation_ignore\"\r\n              defaultMessage=\"Ignore\" description=\"Action [Ignore] for chat invitation.\" />\r\n          </button>\r\n          <button className=\"secondary\" onClick={event => { this.handleButtonAction(event, \"block\"); }}>\r\n            <FormattedMessage id=\"chat_invitation_block\"\r\n              defaultMessage=\"Block\" description=\"Action [Block] for chat invitation.\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n",
    "import React from 'react';\r\n\r\nimport Tinode from 'tinode-sdk';\r\n\r\nimport { stringHash } from '../lib/strformat.js';\r\n\r\nexport default class LetterTile extends React.PureComponent {\r\n  render() {\r\n    let avatar;\r\n    if (this.props.avatar === true) {\r\n      const isGroup = (Tinode.topicType(this.props.topic) == 'grp');\r\n      const iconColor = (isGroup ? 'light-color' : 'dark-color')\r\n        + (Math.abs(stringHash(this.props.topic)) % 16);\r\n      if (this.props.topic && this.props.title && this.props.title.trim()) {\r\n        const letter = this.props.title.trim().charAt(0);\r\n        const className = 'lettertile ' + iconColor;\r\n        avatar = (<div className={className}><div>{letter}</div></div>)\r\n      } else {\r\n        const className = 'material-icons ' + iconColor;\r\n        avatar = isGroup ?\r\n          <i className={className}>group</i> : <i className={className}>person</i>;\r\n      }\r\n    } else if (this.props.avatar) {\r\n      // If avatar image is invalid, show a placeholder.\r\n      avatar = <img className=\"avatar\" alt=\"avatar\" src={this.props.avatar}\r\n        onError={(e)=>{e.target.onerror = null; e.target.src=\"/img/broken_image.png\"}} />;\r\n    } else {\r\n      avatar = null;\r\n    }\r\n    return avatar;\r\n  }\r\n}\r\n",
    "import React from 'react';\r\n\r\nexport default class LoadSpinner extends React.PureComponent {\r\n  render() {\r\n    return (this.props.show ?\r\n      <div className=\"load-spinner-box\"><div className=\"loader-spinner\"></div></div> : null);\r\n  }\r\n}\r\n",
    "// The X menu to be displayed in title bars.\r\nimport React from 'react';\r\n\r\nexport default class MenuCancel extends React.PureComponent {\r\n  render() {\r\n    return (\r\n      <a href=\"#\" onClick={(e) => {e.preventDefault(); this.props.onCancel();}}>\r\n        <i className=\"material-icons\">close</i>\r\n      </a>\r\n    );\r\n  }\r\n}\r\n",
    "import React from 'react';\r\n\r\nexport default class MenuContacts extends React.PureComponent {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <a href=\"#\" onClick={(e) => {e.preventDefault(); this.props.onNewTopic();}}><i className=\"material-icons\">chat</i></a>\r\n        &nbsp;\r\n        <a href=\"#\" onClick={(e) => {e.preventDefault(); this.props.onSettings();}}><i className=\"material-icons\">settings</i></a>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n",
    "import React from 'react';\r\n\r\nexport default class MenuStart extends React.PureComponent {\r\n  render() {\r\n    return (\r\n        <div>\r\n          <a href=\"#\" onClick={(e) => {e.preventDefault(); this.props.onSignUp();}}><i className=\"material-icons\">person_add</i></a>\r\n          &nbsp;\r\n          <a href=\"#\" onClick={(e) => {e.preventDefault(); this.props.onSettings();}}><i className=\"material-icons\">settings</i></a>\r\n        </div>\r\n    );\r\n  }\r\n};\r\n",
    "// Toggle [Title text >] -> [Title text v]\r\n\r\nimport React from 'react';\r\n\r\nexport default class MoreButton extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      open: props.open\r\n    };\r\n    this.handleToggle = this.handleToggle.bind(this);\r\n  }\r\n\r\n  handleToggle() {\r\n    const open = !this.state.open;\r\n    this.setState({open: open});\r\n    if (this.props.onToggle) {\r\n      this.props.onToggle(open);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (<label className=\"small clean-clickable\" onClick={this.handleToggle}>{this.props.title}...\r\n      {this.state.open ? <i className=\"material-icons\">expand_more</i> :\r\n        <i className=\"material-icons\">chevron_right</i>}\r\n      </label>);\r\n  }\r\n}\r\n",
    "import React from 'react';\r\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\r\n\r\nconst messages = defineMessages({\r\n  invalid_id: {\r\n    id: 'error_invalid_id',\r\n    defaultMessage: 'Invalid ID',\r\n    description: 'Error message'\r\n  }\r\n});\r\n\r\nclass NewTopicById extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      groupId: '',\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleKeyPress = this.handleKeyPress.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.setState({groupId: e.target.value});\r\n  }\r\n\r\n  handleKeyPress(e) {\r\n    if (e.key === 'Enter') {\r\n      this.handleSubmit(e);\r\n    }\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    e.preventDefault();\r\n    if (this.state.groupId) {\r\n      const name = this.state.groupId.trim();\r\n      const prefix = name.substr(0, 3);\r\n      if (name.length > 3 && ['usr', 'grp', 'chn'].includes(prefix)) {\r\n        this.props.onSubmit(name);\r\n      } else {\r\n        this.props.onError(this.props.intl.formatMessage(messages.invalid_id), 'err');\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"panel-form\">\r\n        <div className=\"panel-form-row\">\r\n        <FormattedMessage id=\"group_user_id_prompt\" defaultMessage=\"Group or User ID\"\r\n          description=\"Prompt for entering user or group ID\">{\r\n          (prompt) => <input type=\"text\" placeholder={prompt}\r\n            value={this.state.groupId} onChange={this.handleChange}\r\n            onKeyPress={this.handleKeyPress} required autoFocus />\r\n        }</FormattedMessage>\r\n        </div>\r\n        <div className=\"dialog-buttons\">\r\n          <button className=\"primary\" onClick={this.handleSubmit}>\r\n            <FormattedMessage id=\"button_subscribe\" defaultMessage=\"Subscribe\"\r\n              description=\"Button [Subscribe]\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default injectIntl(NewTopicById);\r\n",
    "import React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport AvatarUpload from './avatar-upload.jsx';\r\nimport CheckBox from './checkbox.jsx';\r\nimport TagManager from './tag-manager.jsx';\r\n\r\nimport { MAX_TITLE_LENGTH } from '../config.js';\r\n\r\nexport default class NewTopicGroup extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      fn: '', // full/formatted name\r\n      private: '',\r\n      imageDataUrl: null,\r\n      tags: [],\r\n      isChannel: false\r\n    };\r\n\r\n    this.handleFnChange = this.handleFnChange.bind(this);\r\n    this.handlePrivateChange = this.handlePrivateChange.bind(this);\r\n    this.handleImageChanged = this.handleImageChanged.bind(this);\r\n    this.handleTagsChanged = this.handleTagsChanged.bind(this);\r\n    this.handleChannelToggle = this.handleChannelToggle.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleFnChange(e) {\r\n    this.setState({fn: e.target.value});\r\n  }\r\n\r\n  handlePrivateChange(e) {\r\n    this.setState({private: e.target.value});\r\n  }\r\n\r\n  handleImageChanged(img) {\r\n    this.setState({imageDataUrl: img});\r\n  }\r\n\r\n  handleTagsChanged(tags) {\r\n    this.setState({tags: tags});\r\n  }\r\n\r\n  handleChannelToggle() {\r\n    this.setState({isChannel: !this.state.isChannel});\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    const fn = this.state.fn.trim().substring(0, MAX_TITLE_LENGTH);\r\n    const comment = this.state.private.trim().substring(0, MAX_TITLE_LENGTH);\r\n    if (fn) {\r\n      this.props.onSubmit(fn, this.state.imageDataUrl, comment, this.state.tags, this.state.isChannel);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let submitClasses = 'primary';\r\n    if (this.props.disabled) {\r\n      submitClasses += ' disabled';\r\n    }\r\n    return (\r\n      <form className=\"panel-form\" onSubmit={this.handleSubmit}>\r\n        <div className=\"panel-form-row\">\r\n          <div className=\"panel-form-column\">\r\n            <label className=\"small\" htmlFor=\"new-topic-fn\">\r\n              <FormattedMessage id=\"label_topic_name\" defaultMessage=\"Name\"\r\n                description=\"Label for editing topic name\" />\r\n            </label>\r\n            <FormattedMessage id=\"topic_name_editing_placeholder\" defaultMessage=\"Freeform name of the group\"\r\n              description=\"Prompt for entering topic name\">{\r\n              (placeholder) => <input type=\"text\" id=\"new-topic-fn\" placeholder={placeholder}\r\n                value={this.state.fn} onChange={this.handleFnChange} autoFocus required />\r\n            }</FormattedMessage>\r\n            <br />\r\n            <label className=\"small\" htmlFor=\"new-topic-priv\">\r\n              <FormattedMessage id=\"label_private\" defaultMessage=\"Private comment\"\r\n                description=\"Label for editing 'private'\" />\r\n            </label>\r\n            <FormattedMessage id=\"private_editing_placeholder\" defaultMessage=\"Visible to you only\"\r\n              description=\"Placeholder for editing 'private'\">{\r\n              (placeholder) => <input type=\"text\" id=\"new-topic-priv\" placeholder={placeholder}\r\n                value={this.state.private} onChange={this.handlePrivateChange} />\r\n            }</FormattedMessage>\r\n          </div>\r\n          <AvatarUpload\r\n            onError={this.props.onError}\r\n            onImageChanged={this.handleImageChanged} />\r\n        </div>\r\n        <div className=\"panel-form-row\">\r\n          <CheckBox checked={this.state.isChannel} onChange={this.handleChannelToggle}/>&nbsp;\r\n          <label onClick={this.handleChannelToggle}><FormattedMessage id=\"channel_prompt\"\r\n            defaultMessage=\"This is a channel\"\r\n            description=\"Checkbox label when creating a channel\" /></label>\r\n        </div>\r\n        <FormattedMessage id=\"title_tag_manager\" defaultMessage=\"Tags (user discovery)\"\r\n          description=\"Section title for TagManager\">{\r\n          (title) => <TagManager\r\n            tags={this.state.tags}\r\n            activated={true}\r\n            onTagsChanged={this.handleTagsChanged}\r\n            tinode={this.props.tinode}\r\n            title={title} />\r\n        }</FormattedMessage>\r\n        <div className=\"dialog-buttons\">\r\n          <button className={submitClasses}>\r\n            <FormattedMessage id=\"button_create\" defaultMessage=\"Create\"\r\n              description=\"Button [Create]\" />\r\n          </button>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n};\r\n",
    "// PermissionsEditor: Component for editing permissions\r\n// <PermissionsEditor mode=\"JWROD\" skip=\"O\" onChange={this.handleCheckboxTest} />\r\nimport React from 'react';\r\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\r\n\r\nimport CheckBox from './checkbox.jsx';\r\nimport Contact from './contact.jsx';\r\n\r\nimport { makeImageDataUrl } from '../lib/blob-helpers.js';\r\n\r\n// Translatable permission names.\r\nconst messages = defineMessages({\r\n  joiner: {\r\n    id: 'permission_join',\r\n    defaultMessage: \"Join ({val})\",\r\n    description: 'Name of J permission'\r\n  },\r\n  reader: {\r\n    id: 'permission_read',\r\n    defaultMessage: \"Read ({val})\",\r\n    description: 'Name of R permission'\r\n  },\r\n  writer: {\r\n    id: 'permission_write',\r\n    defaultMessage: \"Write ({val})\",\r\n    description: 'Name of W permission'\r\n  },\r\n  preser: {\r\n    id: 'permission_pres',\r\n    defaultMessage: \"Get notified ({val})\",\r\n    description: 'Name of P permission'\r\n  },\r\n  approver: {\r\n    id: 'permission_admin',\r\n    defaultMessage: \"Approve ({val})\",\r\n    description: 'Name of A permission'\r\n  },\r\n  sharer: {\r\n    id: 'permission_share',\r\n    defaultMessage: \"Share ({val})\",\r\n    description: 'Name of S permission'\r\n  },\r\n  deleter: {\r\n    id: 'permission_delete',\r\n    defaultMessage: \"Delete ({val})\",\r\n    description: 'Name of D permission'\r\n  },\r\n  owner: {\r\n    id: 'permission_owner',\r\n    defaultMessage: \"Owner ({val})\",\r\n    description: 'Name of O permission'\r\n  }\r\n});\r\n\r\nclass PermissionsEditor extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      mode: (props.mode || '').replace('N', '')\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleCancel = this.handleCancel.bind(this);\r\n  }\r\n\r\n  handleChange(val) {\r\n    let mode = this.state.mode;\r\n    let idx = mode.indexOf(val);\r\n    if (idx == -1) {\r\n      mode += val;\r\n    } else {\r\n      mode = mode.replace(val, '');\r\n    }\r\n    this.setState({mode: mode});\r\n  }\r\n\r\n  handleSubmit() {\r\n    // Normalize string, otherwise cannot check if mode has changed.\r\n    var mode = (this.state.mode || 'N').split('').sort().join('');\r\n    var before = (this.props.mode || 'N').split('').sort().join('')\r\n    if (mode !== before) {\r\n      this.props.onSubmit(mode);\r\n    } else {\r\n      this.props.onCancel();\r\n    }\r\n  }\r\n\r\n  handleCancel() {\r\n    this.props.onCancel();\r\n  }\r\n\r\n  render() {\r\n    const {formatMessage} = this.props.intl;\r\n    const all = 'JRWPASDO';\r\n    const names = {\r\n      'J': formatMessage(messages.joiner, {val: 'J'}),\r\n      'R': formatMessage(messages.reader, {val: 'R'}),\r\n      'W': formatMessage(messages.writer, {val: 'W'}),\r\n      'P': formatMessage(messages.preser, {val: 'P'}),\r\n      'A': formatMessage(messages.approver, {val: 'A'}),\r\n      'S': formatMessage(messages.sharer, {val: 'S'}),\r\n      'D': formatMessage(messages.deleter, {val: 'D'}),\r\n      'O': formatMessage(messages.owner, {val: 'O'})\r\n    };\r\n\r\n    let skip = this.props.skip || '';\r\n    let mode = this.state.mode;\r\n    let compare = (this.props.compare || '').replace('N', '');\r\n    let items = [];\r\n    for (let i=0; i<all.length; i++) {\r\n      let c = all.charAt(i);\r\n      if (skip.indexOf(c) >= 0 && mode.indexOf(c) < 0) {\r\n        // Permission is marked as inactive: hide unchecked permissions, disable checked permissions\r\n        continue;\r\n      }\r\n      items.push(\r\n        <tr key={c}>\r\n          <td>{names[c]}</td>\r\n          <td className=\"checkbox\">{skip.indexOf(c) < 0 ?\r\n            <CheckBox name={c} checked={(mode.indexOf(c) >= 0)} onChange={this.handleChange}/>\r\n            :\r\n            <CheckBox name={c} checked={(mode.indexOf(c) >= 0)} />\r\n          }</td>{this.props.compare ? <td className=\"checkbox\">\r\n            <CheckBox name={c} checked={(compare.indexOf(c) >= 0)}/>\r\n          </td> : null}\r\n        </tr>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"panel-form-column\">\r\n        {this.props.userTitle ?\r\n          <ul className=\"contact-box\"><Contact\r\n            item={this.props.item}\r\n            title={this.props.userTitle}\r\n            avatar={makeImageDataUrl(this.props.userAvatar ? this.props.userAvatar : null)} /></ul> : null}\r\n        <label className=\"small\"><FormattedMessage id=\"title_permissions\"\r\n          defaultMessage=\"Permissions\" description=\"Section title\"/></label>\r\n        <table className=\"permission-editor\">\r\n        {this.props.compare ?\r\n          <thead><tr>\r\n            <th></th><th>{this.props.modeTitle}</th>\r\n            <th>{this.props.compareTitle}</th>\r\n          </tr></thead> :\r\n          null}\r\n        <tbody>\r\n          {items}\r\n        </tbody></table>\r\n        <br />\r\n        <div className=\"dialog-buttons\">\r\n          <button className=\"outline\" onClick={this.handleCancel}>\r\n            <FormattedMessage id=\"button_cancel\" defaultMessage=\"Cancel\" description=\"Button [Cancel]\" />\r\n          </button>\r\n          <button className=\"primary\" onClick={this.handleSubmit}>\r\n            <FormattedMessage id=\"button_ok\" defaultMessage=\"OK\" description=\"Button [OK]\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default injectIntl(PermissionsEditor);\r\n",
    "// Received/read indicator.\r\nimport React from 'react';\r\nimport { defineMessages, injectIntl } from 'react-intl';\r\n\r\nimport Tinode from 'tinode-sdk';\r\n\r\nimport { shortDateFormat } from '../lib/strformat.js';\r\nimport { deliveryMarker } from '../lib/utils.js';\r\n\r\nconst messages = defineMessages({\r\n  message_sending: {\r\n    id: 'message_sending',\r\n    defaultMessage: 'sending...',\r\n    description: 'Message being sent, in place of time stamp'\r\n  },\r\n  message_sending_failed: {\r\n    id: 'message_sending_failed',\r\n    defaultMessage: 'failed',\r\n    description: 'Failed to send message, in place of time stamp'\r\n  }\r\n});\r\n\r\nclass ReceivedMarker extends React.PureComponent {\r\n  render() {\r\n    const {formatMessage} = this.props.intl;\r\n    let timestamp;\r\n    if (this.props.received <= Tinode.MESSAGE_STATUS_SENDING) {\r\n      timestamp = formatMessage(messages.message_sending);\r\n    } else if (this.props.received == Tinode.MESSAGE_STATUS_FAILED) {\r\n      timestamp = formatMessage(messages.message_sending_failed);\r\n    } else {\r\n      timestamp = shortDateFormat(this.props.timestamp, this.props.intl.locale);\r\n    }\r\n\r\n    const icon = deliveryMarker(this.props.received);\r\n    const marker = icon ? <i className={'material-icons small ' + icon.color}>{icon.name}</i> : null;\r\n\r\n    return (\r\n      <span className=\"timestamp\">\r\n        {timestamp}{'\\u00a0'}{marker}\r\n      </span>\r\n    );\r\n  }\r\n};\r\n\r\nexport default injectIntl(ReceivedMarker);\r\n",
    "import React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport Tinode from 'tinode-sdk';\r\n\r\nexport default class SearchContacts extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      edited: false,\r\n      search: ''\r\n    };\r\n\r\n    this.handleSearchChange = this.handleSearchChange.bind(this);\r\n    this.handleSearch = this.handleSearch.bind(this);\r\n    this.handleClear = this.handleClear.bind(this);\r\n    this.handleKeyDown = this.handleKeyDown.bind(this);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.state.edited) {\r\n      this.setState({search: '', edited: false});\r\n      this.props.onSearchContacts(Tinode.DEL_CHAR);\r\n    }\r\n  }\r\n\r\n  handleSearchChange(e) {\r\n    this.setState({search: e.target.value});\r\n  }\r\n\r\n  handleSearch(e) {\r\n    e.preventDefault();\r\n    var query = this.state.search.trim();\r\n    this.setState({edited: (query.length > 0)});\r\n    this.props.onSearchContacts(query.length > 0 ? query : Tinode.DEL_CHAR);\r\n  }\r\n\r\n  handleClear(e) {\r\n    e.preventDefault();\r\n    if (this.state.edited) {\r\n      this.props.onSearchContacts(Tinode.DEL_CHAR);\r\n    }\r\n    this.setState({search: '', edited: false});\r\n  }\r\n\r\n  handleKeyDown(e) {\r\n    if (e.key === 'Enter') {\r\n      this.handleSearch(e);\r\n    } else if (e.key === 'Escape') {\r\n      this.handleClear();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"panel-form\">\r\n        <div className=\"panel-form-row\">\r\n          <i className=\"material-icons search\">search</i>\r\n          <FormattedMessage id=\"search_placeholder\" defaultMessage=\"List like email:alice@example.com, tel:17025550003...\"\r\n            description=\"Placeholder in contacts search field\">{\r\n            (search_placeholder) => <input className=\"search\" type=\"text\"\r\n              placeholder={search_placeholder}\r\n              value={this.state.search} onChange={this.handleSearchChange}\r\n              onKeyDown={this.handleKeyDown} required autoFocus />\r\n          }</FormattedMessage>\r\n          <a href=\"#\" onClick={this.handleClear}>\r\n            <i className=\"material-icons\">close</i>\r\n          </a>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n",
    "// Send message form.\r\nimport React from 'react';\r\nimport { defineMessages, injectIntl } from 'react-intl';\r\nimport { Drafty } from 'tinode-sdk';\r\n\r\nimport { KEYPRESS_DELAY } from '../config.js';\r\nimport { filePasted } from '../lib/blob-helpers.js';\r\n\r\nconst messages = defineMessages({\r\n  messaging_disabled: {\r\n    id: 'messaging_disabled_prompt',\r\n    defaultMessage: 'Messaging disabled',\r\n    description: 'Prompt in SendMessage in read-only topic'\r\n  },\r\n  type_new_message: {\r\n    id: 'new_message_prompt',\r\n    defaultMessage: 'New message',\r\n    description: 'Prompt in send message field'\r\n  },\r\n  add_image_caption: {\r\n    id: 'image_caption_prompt',\r\n    defaultMessage: 'Image caption',\r\n    description: 'Prompt in SendMessage for attached image'\r\n  },\r\n  file_attachment_too_large: {\r\n    id: 'file_attachment_too_large',\r\n    defaultMessage: 'The file size {size} exceeds the {limit} limit.',\r\n    description: 'Error message when attachment is too large'\r\n  },\r\n  cannot_initiate_upload: {\r\n    id: 'cannot_initiate_file_upload',\r\n    defaultMessage: 'Cannot initiate file upload.',\r\n    description: 'Generic error messagewhen attachment fails'\r\n  },\r\n});\r\n\r\nclass SendMessage extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      message: '',\r\n      // Make initial keypress time as if it happened 5001 milliseconds in the past.\r\n      keypressTimestamp: new Date().getTime() - KEYPRESS_DELAY - 1\r\n    };\r\n\r\n    this.handlePasteEvent = this.handlePasteEvent.bind(this);\r\n    this.handleAttachImage = this.handleAttachImage.bind(this);\r\n    this.handleAttachFile = this.handleAttachFile.bind(this);\r\n    this.handleSend = this.handleSend.bind(this);\r\n    this.handleKeyPress = this.handleKeyPress.bind(this);\r\n    this.handleMessageTyping = this.handleMessageTyping.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.messageEditArea) {\r\n      this.messageEditArea.addEventListener('paste', this.handlePasteEvent, false);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.messageEditArea) {\r\n      this.messageEditArea.removeEventListener('paste', this.handlePasteEvent, false);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.messageEditArea) {\r\n      this.messageEditArea.focus();\r\n    }\r\n  }\r\n\r\n  handlePasteEvent(e) {\r\n    if (this.props.disabled) {\r\n      return;\r\n    }\r\n    // FIXME: handle large files too.\r\n    if (filePasted(e,\r\n      (bits, mime, width, height, fname) => {\r\n        this.props.onAttachImage(mime, bits, width, height, fname);\r\n      },\r\n      (mime, bits, fname) => {\r\n        this.props.onAttachFile(mime, bits, fname);\r\n      },\r\n      this.props.onError)) {\r\n\r\n      // If a file was pasted, don't paste base64 data into input field.\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  handleAttachImage(e) {\r\n    if (e.target.files && e.target.files.length > 0) {\r\n      this.props.onAttachImage(e.target.files[0]);\r\n    }\r\n    // Clear the value so the same file can be uploaded again.\r\n    e.target.value = '';\r\n  }\r\n\r\n  handleAttachFile(e) {\r\n    const {formatMessage} = this.props.intl;\r\n    if (e.target.files && e.target.files.length > 0) {\r\n      this.props.onAttachFile(e.target.files[0]);\r\n    }\r\n    // Clear the value so the same file can be uploaded again.\r\n    e.target.value = '';\r\n  }\r\n\r\n  handleSend(e) {\r\n    e.preventDefault();\r\n    const message = this.state.message.trim();\r\n    if (message || this.props.acceptBlank || this.props.noInput) {\r\n      this.props.onSendMessage(message);\r\n      this.setState({message: ''});\r\n    }\r\n  }\r\n\r\n  /* Send on Enter key */\r\n  handleKeyPress(e) {\r\n    // Remove this if you don't want Enter to trigger send\r\n    if (e.key === 'Enter') {\r\n      // Have Shift-Enter insert a line break instead\r\n      if (!e.shiftKey) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        this.handleSend(e);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleMessageTyping(e) {\r\n    const newState = {message: e.target.value};\r\n    if (this.props.onKeyPress) {\r\n      const now = new Date().getTime();\r\n      if (now - this.state.keypressTimestamp > KEYPRESS_DELAY) {\r\n        this.props.onKeyPress();\r\n        newState.keypressTimestamp = now;\r\n      }\r\n    }\r\n    this.setState(newState);\r\n  }\r\n\r\n  render() {\r\n    const {formatMessage} = this.props.intl;\r\n    const prompt = this.props.disabled ?\r\n      formatMessage(messages.messaging_disabled) :\r\n      (this.props.messagePrompt ?\r\n        formatMessage(messages[this.props.messagePrompt]) :\r\n        formatMessage(messages.type_new_message));\r\n    return (\r\n      <div id=\"send-message-panel\">\r\n        {!this.props.disabled ?\r\n          <>\r\n            {this.props.onAttachFile ?\r\n              <>\r\n                <a href=\"#\" onClick={(e) => {e.preventDefault(); this.attachImage.click();}} title=\"Add image\">\r\n                  <i className=\"material-icons secondary\">photo</i>\r\n                </a>\r\n                <a href=\"#\" onClick={(e) => {e.preventDefault(); this.attachFile.click();}} title=\"Attach file\">\r\n                  <i className=\"material-icons secondary\">attach_file</i>\r\n                </a>\r\n              </>\r\n              :\r\n              null}\r\n            {this.props.noInput ?\r\n              <div className=\"hr thin\" /> :\r\n              <textarea id=\"sendMessage\" placeholder={prompt}\r\n                value={this.state.message} onChange={this.handleMessageTyping}\r\n                onKeyPress={this.handleKeyPress}\r\n                ref={(ref) => {this.messageEditArea = ref;}}\r\n                autoFocus />}\r\n            <a href=\"#\" onClick={this.handleSend} title=\"Send\">\r\n              <i className=\"material-icons\">send</i>\r\n            </a>\r\n            <input type=\"file\" ref={(ref) => {this.attachFile = ref;}}\r\n              onChange={this.handleAttachFile} style={{display: 'none'}} />\r\n            <input type=\"file\" ref={(ref) => {this.attachImage = ref;}} accept=\"image/*\"\r\n              onChange={this.handleAttachImage} style={{display: 'none'}} />\r\n          </>\r\n          :\r\n          <div id=\"writing-disabled\">{prompt}</div>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default injectIntl(SendMessage);\r\n",
    "import React from 'react';\r\n\r\nimport LetterTile from './letter-tile.jsx';\r\nimport ButtonBack from './button-back.jsx';\r\nimport MenuContacts from './menu-contacts.jsx';\r\nimport MenuStart from './menu-start.jsx';\r\n\r\nexport default class SideNavbar extends React.PureComponent {\r\n  render() {\r\n    return (\r\n        <div id=\"side-caption-panel\" className=\"caption-panel\">\r\n          {this.props.onCancel ? <ButtonBack onBack={this.props.onCancel} /> : null}\r\n          {this.props.avatar ?\r\n            <div id=\"self-avatar\" className=\"avatar-box\">\r\n              <LetterTile\r\n                avatar={this.props.avatar}\r\n                topic={this.props.myUserId}\r\n                title={this.props.title} />\r\n            </div>\r\n            :\r\n            null}\r\n          <div id=\"sidepanel-title\" className=\"panel-title\">{this.props.title}</div>\r\n          {this.props.state === 'login' ?\r\n              <MenuStart onSignUp={this.props.onSignUp} onSettings={this.props.onSettings} /> :\r\n            this.props.state === 'contacts' ?\r\n              <MenuContacts onNewTopic={this.props.onNewTopic} onSettings={this.props.onSettings} /> :\r\n            null}\r\n        </div>\r\n    );\r\n  }\r\n};\r\n",
    "// TagManager: edit topic or user tags.\r\nimport React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport ChipInput from './chip-input.jsx';\r\n\r\nimport { MAX_TAG_COUNT, MAX_TAG_LENGTH, MIN_TAG_LENGTH } from '../config.js';\r\nimport { arrayEqual } from '../lib/utils.js';\r\n\r\nexport default class TagManager extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      tags: this.props.tags,\r\n      tagInput: '',\r\n      activated: this.props.activated\r\n    };\r\n\r\n    this.handleTagInput = this.handleTagInput.bind(this);\r\n    this.handleAddTag = this.handleAddTag.bind(this);\r\n    this.handleRemoveTag = this.handleRemoveTag.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleCancel = this.handleCancel.bind(this);\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    if (!arrayEqual(nextProps.tags, prevState.tags) && !prevState.activated) {\r\n      return {tags: nextProps.tags};\r\n    }\r\n    return null;\r\n  }\r\n\r\n  handleTagInput(text) {\r\n    this.setState({tagInput: text});\r\n    if (text.length > 0) {\r\n      const last = text[text.length-1];\r\n      if (text[0] == '\"') {\r\n        // This is a quoted string.\r\n        if (text.length > 1 && last == '\"') {\r\n          this.handleAddTag(text.substring(1, text.length-1));\r\n        }\r\n      } else if (last == ',' || last == ' ' || last == ';' || last == '\"') {\r\n        // User entered ',', ' ' or ';'\r\n        this.handleAddTag(text.substring(0, text.length-1).trim());\r\n      }\r\n    }\r\n  }\r\n\r\n  handleAddTag(tag) {\r\n    const maxTagCount = this.props.tinode.getServerLimit('maxTagCount', MAX_TAG_COUNT);\r\n\r\n    if (tag.length > 0 && this.state.tags.length < maxTagCount) {\r\n      const tags = this.state.tags.slice(0);\r\n      tags.push(tag);\r\n\r\n      this.setState({tags: tags, tagInput: ''});\r\n      if (this.props.onTagsChanged) {\r\n        this.props.onTagsChanged(tags);\r\n      }\r\n      return tags;\r\n    }\r\n    return this.state.tags;\r\n  }\r\n\r\n  handleRemoveTag(tag, index) {\r\n    const tags = this.state.tags.slice(0);\r\n    tags.splice(index, 1);\r\n    this.setState({tags: tags});\r\n    if (this.props.onTagsChanged) {\r\n      this.props.onTagsChanged(tags);\r\n    }\r\n  }\r\n\r\n  handleSubmit() {\r\n    // Add unprocessed input to tags, submit the list.\r\n    this.props.onSubmit(this.handleAddTag(this.state.tagInput.trim()));\r\n    this.setState({activated: false, tags: this.props.tags});\r\n  }\r\n\r\n  handleCancel() {\r\n    this.setState({activated: false, tagInput: '', tags: this.props.tags});\r\n    if (this.props.onCancel) {\r\n      this.props.onCancel();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const minTagLength = this.props.tinode.getServerLimit('minTagLength', MIN_TAG_LENGTH);\r\n    const maxTagLength = this.props.tinode.getServerLimit('maxTagLength', MAX_TAG_LENGTH);\r\n\r\n    let tags = [];\r\n    if (this.state.activated) {\r\n      this.state.tags.map((tag) => {\r\n        tags.push({user: tag, invalid: (tag.length < minTagLength || tag.length > maxTagLength)});\r\n      });\r\n    } else {\r\n      this.state.tags.map((tag) => {\r\n        tags.push(<span className=\"badge\" key={tags.length}>{tag}</span>);\r\n      });\r\n      if (tags.length == 0) {\r\n        tags = (\r\n          <i>\r\n            <FormattedMessage id=\"tags_not_found\" defaultMessage=\"No tags defined. Add some.\" description=\"\" />\r\n          </i>\r\n        );\r\n      }\r\n    }\r\n    return (\r\n      <div className=\"panel-form-column\">\r\n        <div className=\"panel-form-row\">\r\n          <label className=\"small\">{this.props.title}</label>\r\n        </div>\r\n        {this.state.activated ?\r\n        <div>\r\n          <FormattedMessage id=\"tags_editor_no_tags\" defaultMessage=\"Add some tags\"\r\n            description=\"Tag editor prompt when no tags are found.\">{\r\n            (add_tags_prompt) => <ChipInput\r\n              chips={tags}\r\n              avatarDisabled={true}\r\n              prompt={add_tags_prompt}\r\n              onEnter={this.handleAddTag}\r\n              onFocusLost={this.handleAddTag}\r\n              onCancel={this.handleCancel}\r\n              onChipRemoved={this.handleRemoveTag}\r\n              filterFunc={this.handleTagInput} />\r\n          }</FormattedMessage>\r\n          {this.props.onSubmit || this.props.onCancel ?\r\n            <div id=\"tag-manager-buttons\" className=\"dialog-buttons panel-form-row\">\r\n              <button className=\"outline\" onClick={this.handleCancel}>\r\n                <FormattedMessage id=\"button_cancel\" defaultMessage=\"Cancel\" description=\"Button [Cancel]\" />\r\n              </button>\r\n              <button className=\"primary\" onClick={this.handleSubmit}>\r\n                <FormattedMessage id=\"button_ok\" defaultMessage=\"OK\" description=\"Button [OK]\" />\r\n              </button>\r\n            </div>\r\n          : null}\r\n        </div>\r\n        :\r\n        <div className=\"quoted\">\r\n          <a href=\"#\" className=\"flat-button\" onClick={(e) => {e.preventDefault(); this.setState({activated: true});}}>\r\n            <i className=\"material-icons\">edit</i> &nbsp;<FormattedMessage id=\"title_manage_tags\" defaultMessage=\"Manage\"\r\n              description=\"Section title for the list of tags\" />\r\n          </a>\r\n          <>{tags}</>\r\n        </div>\r\n      }\r\n      </div>\r\n    );\r\n  }\r\n};\r\n",
    "// The counter of unread messages in the topic.\r\nimport React from 'react';\r\n\r\nexport default class UnreadBadge extends React.PureComponent {\r\n  render() {\r\n    return (this.props.count > 0 ?\r\n      <span className=\"unread\">{this.props.count > 9 ? \"9+\" : this.props.count}</span>\r\n      : null);\r\n  }\r\n};\r\n",
    "// Image view with progress bar and a cancel button.\r\nimport React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport FileProgress from './file-progress.jsx';\r\n\r\nexport default class UploadingImage extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"inline-image\">\r\n        {React.createElement('img', this.props)}\r\n        <div className=\"rounded-container\">\r\n          <FileProgress progress={this.props.progress} onCancel={this.props.onCancelUpload} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n",
    "// Password with a visiblity toggle.\r\nimport React from 'react';\r\n\r\nexport default class VisiblePassword extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      value: this.props.value,\r\n      visible: false\r\n    };\r\n\r\n    this.handleVisibility = this.handleVisibility.bind(this);\r\n    this.handeTextChange = this.handeTextChange.bind(this);\r\n    this.handleKeyDown = this.handleKeyDown.bind(this);\r\n    this.handleEditingFinished = this.handleEditingFinished.bind(this);\r\n  }\r\n\r\n  handeTextChange(e) {\r\n    this.setState({value: e.target.value});\r\n    if (this.props.onChange) {\r\n      this.props.onChange(e);\r\n    }\r\n  }\r\n\r\n  handleVisibility(e) {\r\n    e.preventDefault();\r\n    this.setState({visible: !this.state.visible});\r\n  }\r\n\r\n  handleKeyDown(e) {\r\n    if (e.keyCode == 27) {\r\n      // Escape pressed\r\n      this.setState({value: this.props.value, visible: false});\r\n      if (this.props.onFinished) {\r\n        this.props.onFinished();\r\n      }\r\n    } else if (e.keyCode == 13) {\r\n      // Enter pressed\r\n      this.handleEditingFinished();\r\n    }\r\n  }\r\n\r\n  handleEditingFinished(e) {\r\n    if (e) {\r\n      let currentTarget = e.currentTarget;\r\n      setTimeout(() => {\r\n        if (!currentTarget.contains(document.activeElement)) {\r\n          if (this.props.onFinished) {\r\n            this.props.onFinished(this.state.value);\r\n          }\r\n        }\r\n      }, 0);\r\n    } else if (this.props.onFinished) {\r\n      this.props.onFinished(this.state.value.trim());\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div tabIndex=\"-1\" className=\"group-focus\"\r\n        onBlur={this.handleEditingFinished}>\r\n        <input className=\"with-visibility\"\r\n          type={this.state.visible ? \"text\" : \"password\"}\r\n          value={this.state.value}\r\n          placeholder={this.props.placeholder}\r\n          required={this.props.required ? 'required' : ''}\r\n          autoFocus={this.props.autoFocus ? 'autoFocus' : ''}\r\n          autoComplete={this.props.autoComplete}\r\n          onChange={this.handeTextChange}\r\n          onKeyDown={this.handleKeyDown} />\r\n        <span onClick={this.handleVisibility}>\r\n          <i className=\"material-icons clickable light-gray\">\r\n            {this.state.visible ? 'visibility' : 'visibility_off'}\r\n          </i>\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n",
    "module.exports = React;",
    "module.exports = ReactDOM;",
    "module.exports = ReactIntl;",
    "module.exports = Tinode;",
    "module.exports = firebase;",
    "module.exports = firebase.messaging;",
    "// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n",
    "// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};",
    "// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};",
    "__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))",
    "// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};",
    "// Put all packages together.\r\n// Used to generate umd/index.prod.js\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { IntlProvider } from 'react-intl';\r\n\r\nimport allMessages from './messages.json';\r\nimport TinodeWeb from './views/tinode-web.jsx';\r\nimport HashNavigation from './lib/navigation.js';\r\n\r\n// Detect human language to use in the UI:\r\n//  Check parameters from URL hash #?hl=ru, then browser, then use 'en' as a fallback.\r\nconst { params } = HashNavigation.parseUrlHash(window.location.hash);\r\nconst language = (params && params.hl) ||\r\n  (navigator.languages && navigator.languages[0]) ||\r\n  navigator.language ||\r\n  navigator.userLanguage ||\r\n  'en';\r\n\r\n// Get the base language 'en' from a more specific 'en_GB' or 'en-US' as a partial fallback.\r\nconst baseLanguage = language.toLowerCase().split(/[-_]/)[0];\r\n\r\n// Try the full locale first, then the locale without the region code, fallback to 'en'.\r\nconst messages =\r\n  allMessages[language] ||\r\n  allMessages[baseLanguage] ||\r\n  allMessages.en;\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <IntlProvider locale={language} messages={messages} textComponent={React.Fragment}>\r\n      <TinodeWeb />\r\n    </IntlProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('mountPoint')\r\n);\r\n"
  ],
  "names": [
    "PACKAGE_VERSION",
    "APP_NAME",
    "API_KEY",
    "KNOWN_HOSTS",
    "hosted",
    "local",
    "DEFAULT_HOST",
    "LOGGING_ENABLED",
    "KEYPRESS_DELAY",
    "RECEIVED_DELAY",
    "READ_DELAY",
    "MIN_TAG_LENGTH",
    "MAX_TAG_LENGTH",
    "MAX_TAG_COUNT",
    "DEFAULT_P2P_ACCESS_MODE",
    "NEW_GRP_ACCESS_MODE",
    "CHANNEL_ACCESS_MODE",
    "NO_ACCESS_MODE",
    "MEDIA_BREAKPOINT",
    "REM_SIZE",
    "AVATAR_SIZE",
    "BROKEN_IMAGE_SIZE",
    "MESSAGES_PAGE",
    "MAX_INBAND_ATTACHMENT_SIZE",
    "MAX_EXTERN_ATTACHMENT_SIZE",
    "MAX_IMAGE_DIM",
    "IMAGE_PREVIEW_DIM",
    "MAX_ONLINE_IN_TOPIC",
    "MAX_TITLE_LENGTH",
    "MESSAGE_PREVIEW_LENGTH",
    "LINK_CONTACT_US",
    "LINK_PRIVACY_POLICY",
    "LINK_TERMS_OF_SERVICE",
    "bytesToHumanSize",
    "SUPPORTED_IMAGE_FORMATS",
    "MIME_EXTENSIONS",
    "makeImageDataUrl",
    "photo",
    "data",
    "type",
    "mime",
    "startsWith",
    "ref",
    "fitImageSize",
    "width",
    "height",
    "maxWidth",
    "maxHeight",
    "forceSquare",
    "Math",
    "min",
    "scale",
    "size",
    "dstWidth",
    "dstHeight",
    "srcWidth",
    "srcHeight",
    "xoffset",
    "yoffset",
    "fileNameForMime",
    "fname",
    "idx",
    "indexOf",
    "ext",
    "at",
    "lastIndexOf",
    "substring",
    "imageScaled",
    "fileOrBlob",
    "maxSize",
    "onSuccess",
    "onError",
    "img",
    "Image",
    "crossOrigin",
    "onerror",
    "err",
    "onload",
    "URL",
    "revokeObjectURL",
    "src",
    "dim",
    "canvas",
    "document",
    "createElement",
    "ctx",
    "getContext",
    "imageSmoothingEnabled",
    "drawImage",
    "includes",
    "blob",
    "Promise",
    "resolve",
    "toBlob",
    "length",
    "clearRect",
    "name",
    "createObjectURL",
    "fileToBase64",
    "file",
    "reader",
    "FileReader",
    "addEventListener",
    "result",
    "split",
    "readAsDataURL",
    "blobToBase64",
    "filePasted",
    "event",
    "onImageSuccess",
    "onAttachmentSuccess",
    "items",
    "clipboardData",
    "originalEvent",
    "i",
    "item",
    "kind",
    "getAsFile",
    "console",
    "log",
    "imageFileScaledToBase64",
    "imageFileToBase64",
    "getMimeType",
    "header",
    "exec",
    "base64EncodedLen",
    "n",
    "floor",
    "base64DecodedLen",
    "base64ReEncode",
    "str",
    "replace",
    "btoa",
    "atob",
    "detectServerAddress",
    "host",
    "window",
    "location",
    "protocol",
    "hostname",
    "port",
    "isSecureConnection",
    "isLocalHost",
    "LocalStorageUtil",
    "setObject",
    "key",
    "value",
    "localStorage",
    "setItem",
    "JSON",
    "stringify",
    "getObject",
    "getItem",
    "parse",
    "updateObject",
    "oldVal",
    "Object",
    "assign",
    "removeItem",
    "HashNavigation",
    "parseUrlHash",
    "hash",
    "parts",
    "params",
    "path",
    "substr",
    "forEach",
    "part",
    "decodeURIComponent",
    "navigateTo",
    "url",
    "composeUrlHash",
    "join",
    "args",
    "hasOwnProperty",
    "push",
    "addUrlParam",
    "parsed",
    "removeUrlParam",
    "setUrlSidePanel",
    "sidepanel",
    "setUrlTopic",
    "topic",
    "info",
    "shortDateFormat",
    "then",
    "locale",
    "navigator",
    "userLanguage",
    "language",
    "now",
    "Date",
    "getFullYear",
    "getMonth",
    "getDate",
    "toLocaleTimeString",
    "hour12",
    "hour",
    "minute",
    "toLocaleDateString",
    "month",
    "day",
    "year",
    "secondsToTime",
    "seconds",
    "sec",
    "bytes",
    "sizes",
    "bucket",
    "log2",
    "count",
    "pow",
    "round",
    "toFixed",
    "stringHash",
    "charCodeAt",
    "Tinode",
    "updateFavicon",
    "oldIcon",
    "getElementById",
    "head",
    "getElementsByTagName",
    "newIcon",
    "id",
    "rel",
    "href",
    "removeChild",
    "appendChild",
    "title",
    "theCard",
    "fn",
    "imageUrl",
    "imageMimeType",
    "card",
    "trim",
    "mimeType",
    "matches",
    "arrayEqual",
    "a",
    "b",
    "Array",
    "isArray",
    "sort",
    "l",
    "asPhone",
    "val",
    "test",
    "asEmail",
    "isUrlRelative",
    "sanitizeUrl",
    "allowedSchemes",
    "schemes",
    "re",
    "RegExp",
    "sanitizeImageUrl",
    "sanitizedUrl",
    "deliveryMarker",
    "received",
    "MESSAGE_STATUS_SENDING",
    "MESSAGE_STATUS_FAILED",
    "color",
    "MESSAGE_STATUS_SENT",
    "MESSAGE_STATUS_RECEIVED",
    "MESSAGE_STATUS_READ",
    "React",
    "FormattedMessage",
    "AvatarUpload",
    "InPlaceEdit",
    "TagManager",
    "AccGeneralView",
    "Component",
    "constructor",
    "props",
    "me",
    "tinode",
    "getMeTopic",
    "state",
    "fullName",
    "public",
    "undefined",
    "avatar",
    "tags",
    "credentials",
    "getCredentials",
    "addCredActive",
    "addCredInvalid",
    "newCred",
    "previousOnTags",
    "onTagsUpdated",
    "tnNewTags",
    "bind",
    "tnCredsUpdated",
    "handleFullNameUpdate",
    "handleImageChanged",
    "handleCredChange",
    "handleCredKeyDown",
    "handleCredEntered",
    "handleTagsUpdated",
    "componentDidMount",
    "onCredsUpdated",
    "componentWillUnmount",
    "setState",
    "creds",
    "onUpdateAccount",
    "DEL_CHAR",
    "e",
    "target",
    "keyCode",
    "method",
    "onCredAdd",
    "slice",
    "onUpdateTags",
    "render",
    "map",
    "cred",
    "meth",
    "done",
    "preventDefault",
    "onCredConfirm",
    "onCredDelete",
    "full_name_placeholder",
    "myUserId",
    "title_tag_manager",
    "CheckBox",
    "EditAccountView",
    "PureComponent",
    "handleCheckboxClick",
    "what",
    "checked",
    "onToggleMessageSounds",
    "onTogglePushNotifications",
    "onToggleIncognitoMode",
    "messageSounds",
    "desktopAlertsEnabled",
    "desktopAlerts",
    "incognitoMode",
    "defineMessages",
    "injectIntl",
    "PermissionsEditor",
    "messages",
    "delete_account",
    "defaultMessage",
    "delete_account_warning",
    "AccSecurityView",
    "blockedCount",
    "contacts",
    "c",
    "acs",
    "isJoiner",
    "defacs",
    "getDefaultAccess",
    "auth",
    "anon",
    "showPermissionEditorFor",
    "handlePasswordUpdate",
    "handleLaunchPermissionsEditor",
    "handleHidePermissionsEditor",
    "handlePermissionsChanged",
    "handleDeleteAccount",
    "pwd",
    "password",
    "which",
    "editedPermissions",
    "perm",
    "newState",
    "formatMessage",
    "intl",
    "onShowAlert",
    "onDeleteAccount",
    "password_unchanged",
    "onLogout",
    "onShowBlocked",
    "AccSupportView",
    "getLibrary",
    "serverVersion",
    "serverAddress",
    "ContactList",
    "archived_contacts_title",
    "ContactsView",
    "handleAction",
    "deriveStateFromProps",
    "unreadThreads",
    "archivedCount",
    "chatList",
    "blocked",
    "private",
    "arch",
    "archive",
    "unread",
    "touched",
    "action",
    "values",
    "contactList",
    "componentDidUpdate",
    "prevProps",
    "prevState",
    "action_ignored",
    "onShowArchive",
    "no_contacts",
    "connected",
    "topicSelected",
    "onTopicSelected",
    "showContextMenu",
    "VisiblePassword",
    "CreateAccountView",
    "login",
    "email",
    "imageDataUrl",
    "errorCleared",
    "saveToken",
    "handleLoginChange",
    "handlePasswordChange",
    "handleEmailChange",
    "handleFnChange",
    "handleToggleSaveToken",
    "handleSubmit",
    "onCreateAccount",
    "submitClasses",
    "disabled",
    "login_prompt",
    "password_prompt",
    "full_name_prompt",
    "email_prompt",
    "stay_logged_in",
    "owner",
    "onBasicNavigate",
    "ErrorPanel",
    "GroupManager",
    "MenuCancel",
    "MoreButton",
    "requested",
    "granted",
    "edit_permissions",
    "other_user",
    "clear_messages",
    "clear_messages_warning",
    "delete_messages",
    "delete_messages_warning",
    "topic_delete",
    "topic_delete_warning",
    "leave_chat",
    "leave_chat_warning",
    "block_contact",
    "block_contact_warning",
    "report_chat",
    "report_chat_warning",
    "InfoView",
    "admin",
    "sharer",
    "deleter",
    "muted",
    "address",
    "groupTopic",
    "channel",
    "selectedContact",
    "access",
    "modeGiven",
    "modeWant",
    "modeGiven2",
    "modeWant2",
    "showMemberPanel",
    "moreInfoExpanded",
    "previousMetaDesc",
    "previousSubsUpdated",
    "previousTagsUpdated",
    "resetSubs",
    "resetDesc",
    "onMetaDesc",
    "onSubsUpdated",
    "handlePrivateUpdate",
    "handleMuted",
    "handleShowAddMembers",
    "handleHideAddMembers",
    "handleMemberUpdateRequest",
    "handleDeleteTopic",
    "handleDeleteMessages",
    "handleLeave",
    "handleBlock",
    "handleReport",
    "handleMemberSelected",
    "handleMoreInfo",
    "handleContextMenu",
    "getTopic",
    "getType",
    "user2",
    "subscriber",
    "getGiven",
    "getWant",
    "subscribers",
    "sub",
    "getAccessMode",
    "isOwner",
    "isAdmin",
    "isSharer",
    "isDeleter",
    "isMuted",
    "comment",
    "isGroupType",
    "isChannelType",
    "getMode",
    "getMeta",
    "startMetaQuery",
    "withTags",
    "build",
    "desc",
    "subs",
    "onTopicDescUpdate",
    "ignored",
    "onChangePermissions",
    "userPermissionsEdited",
    "uid",
    "toEdit",
    "toCompare",
    "toSkip",
    "titleEdit",
    "titleCompare",
    "userTitle",
    "userAvatar",
    "AccessMode",
    "encode",
    "diff",
    "user",
    "userPermissionsTitle",
    "userPermissionsAvatar",
    "immutablePermissions",
    "editedPermissionsTitle",
    "immutablePermissionsTitle",
    "editedPermissionsSkipped",
    "onInitFind",
    "members",
    "added",
    "removed",
    "onMemberUpdateRequest",
    "onDeleteTopic",
    "onDeleteMessages",
    "onLeaveTopic",
    "onBlockTopic",
    "onReportTopic",
    "open",
    "onTopicTagsUpdate",
    "instance",
    "topicName",
    "menuItems",
    "handler",
    "x",
    "y",
    "onCancel",
    "displayMobile",
    "errorLevel",
    "errorText",
    "searchableContacts",
    "private_placeholder",
    "more",
    "no_members",
    "LoginView",
    "token",
    "id_device",
    "hostName",
    "persist",
    "handleTokenChange",
    "handleIdDeviceChange",
    "onPersistenceChange",
    "onLogin",
    "token_prompt",
    "id_device_prompt",
    "LogoView",
    "version",
    "Drafty",
    "ChatMessage",
    "DocPreview",
    "GroupSubs",
    "ImagePreview",
    "Invitation",
    "LetterTile",
    "LoadSpinner",
    "SendMessage",
    "NOTIFICATION_EXEC_INTERVAL",
    "online_now",
    "last_seen",
    "not_found",
    "file_attachment_too_large",
    "isUnconfirmed",
    "ex",
    "getExcessive",
    "isPeerRestricted",
    "ms",
    "getMissing",
    "MessagesView",
    "getDerivedStateFromProps",
    "leave",
    "sendImageAttachment",
    "sendFileAttachment",
    "sendKeyPress",
    "handleScrollReference",
    "handleScrollEvent",
    "handleDescChange",
    "handleSubsUpdated",
    "handleMessageUpdate",
    "handleAllMessagesReceived",
    "handleInfoReceipt",
    "handleImagePostview",
    "handleClosePreview",
    "handleFormResponse",
    "handleContextClick",
    "handleShowContextMenuMessage",
    "handleNewChatAcceptance",
    "handleEnablePeer",
    "handleAttachFile",
    "handleAttachImage",
    "handleCancelUpload",
    "postReadNotification",
    "clearNotificationQueue",
    "readNotificationQueue",
    "readNotificationTimer",
    "messagesScroller",
    "removeEventListener",
    "messageCount",
    "scrollTop",
    "scrollHeight",
    "scrollPosition",
    "viewportHeight",
    "isNewGroupTopicName",
    "onData",
    "onAllMessagesReceived",
    "onInfo",
    "onPres",
    "applicationVisible",
    "isSubscribed",
    "ready",
    "newTopic",
    "newTopicParams",
    "_topicName",
    "getQuery",
    "withLaterDesc",
    "withLaterSub",
    "isReader",
    "withLaterData",
    "withLaterDel",
    "fetchingMessages",
    "setQuery",
    "subscribe",
    "ctrl",
    "code",
    "onNewTopicCreated",
    "queuedMessages",
    "pub",
    "_sending",
    "publishMessage",
    "catch",
    "message",
    "blankState",
    "nextProps",
    "nextState",
    "latestClearId",
    "onlineSubs",
    "docPreview",
    "imagePreview",
    "imagePostview",
    "typingIndicator",
    "peerMessagingDisabled",
    "online",
    "peer",
    "p2pPeerDesc",
    "maxClearId",
    "isWriter",
    "readingBlocked",
    "unconformed",
    "unconfirmed",
    "oldTopicName",
    "isTopicCached",
    "oldTopic",
    "finally",
    "node",
    "msgHasMoreMessages",
    "getMessagesPage",
    "seq",
    "setInterval",
    "clearInterval",
    "shift",
    "sendAt",
    "max",
    "noteRead",
    "setMilliseconds",
    "getMilliseconds",
    "msg",
    "isNewMessage",
    "status",
    "msgStatus",
    "from",
    "clearTimeout",
    "keyPressTimer",
    "setTimeout",
    "forceUpdate",
    "content",
    "text",
    "sendMessage",
    "attachJSON",
    "searchParams",
    "resp",
    "set",
    "search",
    "stopPropagation",
    "pageY",
    "pageX",
    "messageSpecificMenuItems",
    "onNewChat",
    "noteKeyPress",
    "maxInbandAttachmentSize",
    "getServerLimit",
    "uploader",
    "getLargeFileHelper",
    "cannot_initiate_upload",
    "uploadCompletionPromise",
    "upload",
    "attachFile",
    "filename",
    "urlPromise",
    "bits",
    "maxExternAttachmentSize",
    "limit",
    "caption",
    "tinyMine",
    "tinyBlob",
    "blobMime",
    "tinyBits64",
    "insertImage",
    "_tempPreview",
    "appendLineBreak",
    "append",
    "init",
    "bits64",
    "preview",
    "found",
    "findMessage",
    "_cancelled",
    "cancel",
    "component",
    "hideSelf",
    "component2",
    "isChannel",
    "messageNodes",
    "previousFrom",
    "chatBoxClass",
    "prev",
    "next",
    "nextFrom",
    "sequence",
    "thisFrom",
    "isReply",
    "deliveryStatus",
    "userName",
    "userFrom",
    "userDesc",
    "hi",
    "ts",
    "_uploader",
    "viewportWidth",
    "lastSeen",
    "cont",
    "getContact",
    "isP2PTopicName",
    "seen",
    "when",
    "onHideMessagesView",
    "NewTopicById",
    "NewTopicGroup",
    "SearchContacts",
    "search_for_contacts",
    "search_no_results",
    "NewTopicView",
    "tabSelected",
    "searchQuery",
    "handleTabClick",
    "handleSearchContacts",
    "handleContactSelected",
    "handleNewGroupSubmit",
    "handleGroupByID",
    "currentTarget",
    "dataset",
    "query",
    "onSearchContacts",
    "isNullValue",
    "sel",
    "onCreateTopic",
    "dataUrl",
    "priv",
    "no_contacts_placeholder",
    "searchResults",
    "PasswordResetView",
    "sent",
    "scheme",
    "onReset",
    "onRequest",
    "placeholder",
    "HostSelector",
    "SettingsView",
    "transport",
    "handleTransportSelected",
    "handleServerAddressChange",
    "onUpdate",
    "names",
    "def",
    "ws",
    "lp",
    "transportOptions",
    "SideNavbar",
    "AccNotificationsView",
    "ValidationView",
    "register",
    "settings",
    "edit",
    "general",
    "security",
    "notif",
    "support",
    "newtpk",
    "reset",
    "SidepanelView",
    "handleNewTopic",
    "view",
    "onSignUp",
    "onSettings",
    "errorAction",
    "errorActionText",
    "loadSpinnerVisible",
    "loginDisabled",
    "onLoginRequest",
    "onGlobalSettings",
    "onUpdateAccountTags",
    "credCode",
    "credMethod",
    "onValidateCredentials",
    "onPasswordResetRequest",
    "onResetPassword",
    "ReactDOM",
    "firebase",
    "Alert",
    "ContextMenu",
    "POP_SOUND",
    "Audio",
    "reconnect_countdown",
    "reconnect_now",
    "push_init_failed",
    "invalid_security_token",
    "no_connection",
    "code_doesnot_match",
    "menu_item_info",
    "TinodeWeb",
    "getBlankState",
    "handleResize",
    "handleHashRoute",
    "handleOnline",
    "checkForAppUpdate",
    "handleVisibilityEvent",
    "handleError",
    "handleLoginRequest",
    "handlePersistenceChange",
    "handleConnected",
    "handleAutoreconnectIteration",
    "doLogin",
    "handleCredentialsRequest",
    "handleLoginSuccessful",
    "handleDisconnect",
    "tnMeMetaDesc",
    "tnMeContactUpdate",
    "tnMeSubsUpdated",
    "resetContactList",
    "tnData",
    "tnInitFind",
    "tnFndSubsUpdated",
    "handleTopicSelected",
    "handleHideMessagesView",
    "handleSendMessage",
    "handleNewChatInvitation",
    "handleNewAccount",
    "handleNewAccountRequest",
    "handleUpdateAccountRequest",
    "handleUpdateAccountTagsRequest",
    "handleToggleIncognitoMode",
    "handleSettings",
    "handleGlobalSettings",
    "handleShowArchive",
    "handleShowBlocked",
    "handleToggleMessageSounds",
    "handleCredAdd",
    "handleCredDelete",
    "handleCredConfirm",
    "initFCMessaging",
    "togglePushToken",
    "requestPushToken",
    "handlePushMessage",
    "handleSidepanelCancel",
    "handleStartTopicRequest",
    "handleNewTopicCreated",
    "handleTopicUpdateRequest",
    "handleChangePermissions",
    "handleLogout",
    "handleDeleteTopicRequest",
    "handleDeleteMessagesRequest",
    "handleLeaveUnsubRequest",
    "handleBlockTopicRequest",
    "handleReportTopic",
    "handleShowContextMenu",
    "defaultTopicContextMenu",
    "handleHideContextMenu",
    "handleShowAlert",
    "handleShowInfoView",
    "handleHideInfoView",
    "handleValidateCredentialsRequest",
    "handlePasswordResetRequest",
    "handleResetPassword",
    "handleContextMenuAction",
    "autoLogin",
    "messageSoundsOff",
    "FIREBASE_INIT",
    "firebaseToken",
    "hidden",
    "sidePanelSelected",
    "sidePanelTitle",
    "sidePanelAvatar",
    "liveConnection",
    "onLine",
    "topicSelectedOnline",
    "topicSelectedAcs",
    "innerWidth",
    "showInfoPanel",
    "mobilePanel",
    "contextMenuVisible",
    "contextMenuBounds",
    "contextMenuClickAt",
    "contextMenuParams",
    "contextMenuItems",
    "alertVisible",
    "alertParams",
    "requestedTopic",
    "BroadcastChannel",
    "serviceWorkerChannel",
    "warn",
    "documentElement",
    "clientWidth",
    "clientHeight",
    "reject",
    "tnSetup",
    "onConnect",
    "onDisconnect",
    "onAutoreconnectIteration",
    "setDeviceToken",
    "parsedNav",
    "expires",
    "setAuthToken",
    "connect",
    "readTimer",
    "readTimerCallback",
    "persistentCache",
    "onSetupCompleted",
    "appName",
    "apiKey",
    "secure",
    "setHumanLanguage",
    "enableLogging",
    "isChannelTopicName",
    "oobNotification",
    "error",
    "fbPush",
    "initializeApp",
    "messaging",
    "usePublicVapidKey",
    "messagingVapidKey",
    "serviceWorker",
    "reg",
    "useServiceWorker",
    "active",
    "postMessage",
    "onTokenRefresh",
    "onMessage",
    "payload",
    "mobile",
    "onupdatefound",
    "installingWorker",
    "installing",
    "onstatechange",
    "controller",
    "topicType",
    "getTopicAccessMode",
    "newTopicTabSelected",
    "tab",
    "reconnectCountdown",
    "reconnect",
    "level",
    "actionText",
    "isConnected",
    "initStorage",
    "clearStorage",
    "getServerInfo",
    "ver",
    "prom",
    "timeLeft",
    "access_token",
    "isAuthenticated",
    "credential",
    "promise",
    "getAuthToken",
    "loginBasic",
    "loginToken",
    "goToTopic",
    "onContactUpdate",
    "getCurrentUserID",
    "withDesc",
    "withCred",
    "disconnect",
    "urlHash",
    "isPresencer",
    "archived",
    "isArchived",
    "play",
    "unused",
    "prepareSearchableContacts",
    "foundContacts",
    "merged",
    "updated",
    "past",
    "getTime",
    "receivedTimer",
    "noteRecv",
    "fnd",
    "getFndTopic",
    "withSub",
    "s",
    "setMeta",
    "isTopicOnline",
    "createMessage",
    "publishDraft",
    "response",
    "mode",
    "isP2PType",
    "delTopic",
    "am",
    "updateWant",
    "login_",
    "password_",
    "public_",
    "cred_",
    "tags_",
    "createAccountBasic",
    "updateAccountBasic",
    "getCurrentLogin",
    "on",
    "enabled",
    "fcm",
    "requestPermission",
    "deleteToken",
    "getToken",
    "refreshedToken",
    "delCredential",
    "basicNavigator",
    "newGroupTopicName",
    "oldName",
    "newName",
    "permissions",
    "updateGiven",
    "delCurrentUser",
    "delMessagesAll",
    "updateMode",
    "publish",
    "TOPIC_SYS",
    "findDOMNode",
    "getBoundingClientRect",
    "self_blocked",
    "subscribed",
    "onConfirm",
    "confirmText",
    "onReject",
    "rejectText",
    "confirm",
    "invite",
    "delSubscription",
    "requestResetAuthSecret",
    "newPassword",
    "handleManageGroupMembers",
    "phone",
    "handleChange",
    "handleKeyPress",
    "handleCancel",
    "onSubmit",
    "methods",
    "numbers_only",
    "visible",
    "FileProgress",
    "Attachment",
    "downloader",
    "progress",
    "downloadFile",
    "mimetype",
    "download",
    "loaded",
    "uploading",
    "onCancelUpload",
    "helperFunc",
    "downloadUrl",
    "downloadWidget",
    "handleFileUpload",
    "files",
    "base64bits",
    "du",
    "onImageChanged",
    "randId",
    "random",
    "className",
    "readOnly",
    "ButtonBack",
    "onBack",
    "ReceivedMarker",
    "UploadingImage",
    "onProgress",
    "handleProgress",
    "handleImagePreview",
    "handleFormButtonClick",
    "onImagePreview",
    "act",
    "onFormResponse",
    "ratio",
    "sideClass",
    "deleted",
    "bubbleClass",
    "fullDisplay",
    "attachments",
    "getContentType",
    "isValid",
    "att",
    "getDownloadUrl",
    "isProcessing",
    "getEntitySize",
    "Fragment",
    "format",
    "draftyFormatter",
    "timestamp",
    "notFound",
    "style",
    "el",
    "tagName",
    "attr",
    "attrValue",
    "minWidth",
    "minHeight",
    "authorizeURL",
    "alt",
    "onClick",
    "loading",
    "inner",
    "Children",
    "child",
    "onChange",
    "Chip",
    "ChipInput",
    "input",
    "focused",
    "handleTextInput",
    "removeChipAt",
    "handleChipCancel",
    "handleFocusGained",
    "handleFocusLost",
    "handleKeyDown",
    "chips",
    "prompt",
    "sortedChips",
    "sortChips",
    "staticMembers",
    "chipIndex",
    "indexChips",
    "index",
    "keep",
    "required",
    "normal",
    "concat",
    "filterFunc",
    "onChipRemoved",
    "onFocusLost",
    "onEnter",
    "avatarDisabled",
    "invalid",
    "noAvatar",
    "ContactAction",
    "handleClick",
    "onAction",
    "icon_mapping",
    "ContactBadges",
    "badges",
    "icon",
    "Contact",
    "badge_you",
    "badge_owner",
    "showCheckmark",
    "contactNodes",
    "contactsCount",
    "showMode",
    "filter",
    "filterOn",
    "toLowerCase",
    "selected",
    "latestMessage",
    "_status",
    "showUnread",
    "showOnline",
    "noScroll",
    "__html",
    "emptyListMessage",
    "UnreadBadge",
    "drafty_image",
    "drafty_form",
    "drafty_attachment",
    "onSelected",
    "icon_badges",
    "subtitle",
    "marker",
    "clear_for_all",
    "delete",
    "delete_for_all",
    "send_retry",
    "mute",
    "unmute",
    "unblock",
    "block",
    "topic_block_warning",
    "member_delete",
    "unarchive",
    "handlePageClick",
    "handleEscapeKey",
    "MenuItems",
    "errorHandler",
    "deleteMessages",
    "retryMessage",
    "topicPermissionSetter",
    "onTopicRemoved",
    "contains",
    "hide",
    "all",
    "hard",
    "cancelSend",
    "delMessagesList",
    "flushMessage",
    "menu",
    "hSize",
    "vSize",
    "left",
    "bounds",
    "right",
    "clickAt",
    "top",
    "bottom",
    "position",
    "iconFromMime",
    "mimeToIcon",
    "default",
    "image",
    "video",
    "handleSendDoc",
    "onClose",
    "onSendMessage",
    "show",
    "onClearError",
    "icons",
    "whiteSpace",
    "contacts_not_found_short",
    "indexMembers",
    "keepInitialMembers",
    "requiredMember",
    "contactFilter",
    "noContactsMessage",
    "selectedContacts",
    "handleMemberRemoved",
    "handleContactFilter",
    "m",
    "delta",
    "present",
    "keepInitial",
    "stat",
    "userId",
    "splice",
    "doContactFiltering",
    "keys",
    "k",
    "usersOnline",
    "totalCount",
    "countToShow",
    "some",
    "overflow",
    "changed",
    "handleHostNameChange",
    "handleEditingFinished",
    "onServerAddressChange",
    "hostOptions",
    "handleSendImage",
    "assignWidth",
    "maxlength",
    "initialValue",
    "handeTextChange",
    "handleStartEditing",
    "handlePasswordFinished",
    "newValue",
    "focus",
    "checkValidity",
    "onFinished",
    "fieldType",
    "spanText",
    "spanClass",
    "autoComplete",
    "handleButtonAction",
    "evt",
    "isGroup",
    "iconColor",
    "abs",
    "letter",
    "charAt",
    "MenuContacts",
    "onNewTopic",
    "MenuStart",
    "handleToggle",
    "onToggle",
    "invalid_id",
    "groupId",
    "prefix",
    "handlePrivateChange",
    "handleTagsChanged",
    "handleChannelToggle",
    "joiner",
    "writer",
    "preser",
    "approver",
    "before",
    "skip",
    "compare",
    "modeTitle",
    "compareTitle",
    "message_sending",
    "message_sending_failed",
    "edited",
    "handleSearchChange",
    "handleSearch",
    "handleClear",
    "search_placeholder",
    "messaging_disabled",
    "type_new_message",
    "add_image_caption",
    "keypressTimestamp",
    "handlePasteEvent",
    "handleSend",
    "handleMessageTyping",
    "messageEditArea",
    "onAttachImage",
    "onAttachFile",
    "acceptBlank",
    "noInput",
    "shiftKey",
    "onKeyPress",
    "messagePrompt",
    "attachImage",
    "click",
    "display",
    "tagInput",
    "activated",
    "handleTagInput",
    "handleAddTag",
    "handleRemoveTag",
    "last",
    "tag",
    "maxTagCount",
    "onTagsChanged",
    "minTagLength",
    "maxTagLength",
    "add_tags_prompt",
    "handleVisibility",
    "activeElement",
    "autoFocus",
    "IntlProvider",
    "allMessages",
    "hl",
    "languages",
    "baseLanguage",
    "en"
  ],
  "sourceRoot": ""
}
